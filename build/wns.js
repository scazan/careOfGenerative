!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WNS",[],t):"object"==typeof exports?exports.WNS=t():e.WNS=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){(function(n){var r;
/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||o;return e._counter=1e3,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||_(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||_(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=t._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,_()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||o,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome/i.test(e._navigator&&e._navigator.userAgent);if(!e._mobileEnabled&&e.ctx&&t){e._mobileEnabled=!1,e.mobileAutoEnable=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(t){o._autoResume();var r=e.ctx.createBufferSource();r.buffer=e._scratchBuffer,r.connect(e.ctx.destination),void 0===r.start?r.noteOn(0):r.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),r.onended=function(){r.disconnect(0),e._mobileEnabled=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&o.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&o.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var o=new i,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return o.ctx||_(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,void 0!==o.ctx&&o.ctx&&o.mobileAutoEnable&&o._enableMobileAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,r;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(r=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&d(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e){e="__default";for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var d=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-d),c=1e3*l/Math.abs(s._rate);if(s._paused=!1,s._ended=!1,s._sprite=e,s._seek=d,s._start=n._sprite[e][0]/1e3,s._stop=(n._sprite[e][0]+n._sprite[e][1])/1e3,s._loop=!(!s._loop&&!n._sprite[e][2]),!(s._seek>=s._stop)){var f=s._node;if(n._webAudio){var _=function(){n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;f.gain.setValueAtTime(e,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===f.bufferSource.start?s._loop?f.bufferSource.noteGrainOn(0,d,86400):f.bufferSource.noteGrainOn(0,d,l):s._loop?f.bufferSource.start(0,d,86400):f.bufferSource.start(0,d,l),c!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),c)),t||setTimeout(function(){n._emit("play",s._id)},0)};"running"===o.state?_():(n.once("resume",_),n._clearTimer(s._id))}else{var p=function(){f.currentTime=d,f.muted=s._muted||n._muted||o._muted||f.muted,f.volume=s._volume*o.volume(),f.playbackRate=s._rate;try{var r=f.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,r.then(function(){n._playLock=!1,t||n._emit("play",s._id)}).catch(function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.")})):t||n._emit("play",s._id),f.playbackRate=s._rate,f.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),c):(n._endTimers[s._id]=function(){n._ended(s),f.removeEventListener("ended",n._endTimers[s._id],!1)},f.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}},m=window&&window.ejecta||!f.readyState&&o._navigator.isCocoonJS;if(f.readyState>=3||m)p();else{var h=function(){p(),f.removeEventListener(o._canPlayEvent,h,!1)};f.addEventListener(o._canPlayEvent,h,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),t||n._emit("stop",o._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]?r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)(n=r._soundById(t[a]))&&(n._volume=e,i[2]||r._stopFade(t[a]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*o.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,r)}}),i;i.volume(e,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var d=o.ctx.currentTime,l=d+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,d),u._node.gain.linearRampToValueAtTime(t,l)}i._startFadeInterval(u,e,t,n,a[s],void 0===r)}}return i},_startFadeInterval:function(e,t,n,r,i,o){var a=this,s=t,u=n-t,d=Math.abs(u/.01),l=Math.max(4,d>0?r/d:r),c=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var i=(Date.now()-c)/r;c=Date.now(),s+=u*i,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))},l)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,r=arguments;if(0===r.length)return this._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=this._soundById(parseInt(r[0],10)))&&n._loop;e=r[0],this._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var i=this._getSoundIds(t),o=0;o<i.length;o++)(n=this._soundById(i[o]))&&(n._loop=e,this._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return this},rate:function(){var e,t,n,r=this,i=arguments;if(0===i.length)t=r._sounds[0]._id;else if(1===i.length){r._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var a=0;a<t.length;a++)if(n=r._soundById(t[a])){n._rateSeek=r.seek(t[a]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart,n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,o.ctx.currentTime):n._node&&(n._node.playbackRate=e);var s=r.seek(t[a]),u=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-s)/Math.abs(n._rate);!r._endTimers[t[a]]&&n._paused||(r._clearTimer(t[a]),r._endTimers[t[a]]=setTimeout(r._ended.bind(r,n),u)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){n._getSoundIds().indexOf(r[0])>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var i=n._soundById(t);if(i){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var a=n.playing(t)?o.ctx.currentTime-i._playStart:0,s=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(s+a*Math.abs(i._rate))}return i._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),i._seek=e,i._ended=!1,n._clearTimer(t),!n._webAudio&&i._node&&(i._node.currentTime=e);var d=function(){n._emit("seek",t),u&&n.play(t,!0)};if(u&&!n._webAudio){var l=function(){n._playLock?setTimeout(l,0):d()};setTimeout(l,0)}else d()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++){if(t[n]._paused||e.stop(t[n]._id),!e._webAudio)/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(o._canPlayEvent,t[n]._loadFn,!1);delete t[n]._node,e._clearTimer(t[n]._id)}var r=o._howls.indexOf(e);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===e._src){i=!1;break}return u&&i&&delete u[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(t===r[i].fn&&o||!t&&o){r.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this["_on"+e],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(e,r[i].fn,r[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),r)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),o._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),this},_cleanBuffer:function(e){if(o._scratchBuffer&&e.bufferSource){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=o._scratchBuffer}catch(e){}}return e.bufferSource=null,this}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=o._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(t,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*o.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var u={},d=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void f(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);c(r.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=e._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?c(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},l(o)}},l=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(u[t._src]=e,f(t,e)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(e).then(r).catch(n):o.ctx.decodeAudioData(e,r,n)},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},_=function(){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(e){o.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!r||o._navigator&&!o._navigator.standalone&&!r)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:1,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(t,[]))||(e.exports=r),t.Howler=o,t.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s):void 0!==n&&(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.0.15
 *  howlerjs.com
 *
 *  (c) 2013-2018, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof e?a:(this._orientation=[e,t,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,r,i,o),this)},Howl.prototype.init=function(e){return function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=arguments;if(!this._webAudio)return this;if(0===i.length)return this._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=this._soundById(parseInt(i[0],10)))?r._pannerAttr:this._pannerAttr;t=i[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:this._panningModel})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var o=this._getSoundIds(n),a=0;a<o.length;a++)if(r=this._soundById(o[a])){var s=r._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel};var u=r._panner;u?(u.coneInnerAngle=s.coneInnerAngle,u.coneOuterAngle=s.coneOuterAngle,u.coneOuterGain=s.coneOuterGain,u.distanceModel=s.distanceModel,u.maxDistance=s.maxDistance,u.refDistance=s.refDistance,u.rolloffFactor=s.rolloffFactor,u.panningModel=s.panningModel):(r._pos||(r._pos=this._pos||[0,0,-.5]),e(r,"spatial"))}return this},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(3))},function(e){e.exports=[{audioFile:"bollnasBus.mp3",spectrum:[{freq:172.265625,magnitude:-17.399746},{freq:64.599609,magnitude:-21.96829},{freq:366.064453,magnitude:-32.528049},{freq:516.796875,magnitude:-38.542358},{freq:689.0625,magnitude:-39.038445},{freq:861.328125,magnitude:-39.638317},{freq:775.195312,magnitude:-39.66655},{freq:990.527344,magnitude:-40.016201},{freq:925.927734,magnitude:-40.517895},{freq:1098.193359,magnitude:-41.060593},{freq:1356.591797,magnitude:-41.274876},{freq:1270.458984,magnitude:-43.702244},{freq:1873.388672,magnitude:-44.169426},{freq:1528.857422,magnitude:-45.135281},{freq:1636.523438,magnitude:-45.653736},{freq:1744.189453,magnitude:-45.790058}]},{audioFile:"coop.mp3",spectrum:[{freq:86.132812,magnitude:-28.932537},{freq:236.865234,magnitude:-32.327995},{freq:452.197266,magnitude:-36.28949},{freq:344.53125,magnitude:-36.789261},{freq:559.863281,magnitude:-38.61684},{freq:732.128906,magnitude:-39.494778},{freq:796.728516,magnitude:-39.511993},{freq:1076.660156,magnitude:-48.423088},{freq:1184.326172,magnitude:-50.484188},{freq:1248.925781,magnitude:-50.664841},{freq:1464.257812,magnitude:-51.075733},{freq:1399.658203,magnitude:-51.329906},{freq:1658.056641,magnitude:-51.729897},{freq:1851.855469,magnitude:-53.016678},{freq:2110.253906,magnitude:-55.621365},{freq:2024.121094,magnitude:-57.550549}]},{audioFile:"counting1.mp3",spectrum:[{freq:193.798828,magnitude:-26.017561},{freq:409.130859,magnitude:-35.475403},{freq:602.929688,magnitude:-43.021927},{freq:796.728516,magnitude:-46.480598},{freq:7192.089844,magnitude:-52.308483},{freq:7235.15625,magnitude:-52.633369},{freq:8290.283203,magnitude:-52.669678},{freq:7105.957031,magnitude:-52.945122},{freq:6567.626953,magnitude:-52.98806},{freq:6503.027344,magnitude:-53.184967},{freq:6416.894531,magnitude:-53.473446},{freq:8182.617188,magnitude:-53.531357},{freq:5684.765625,magnitude:-53.602531},{freq:8139.550781,magnitude:-54.062778},{freq:6653.759766,magnitude:-54.157398},{freq:5577.099609,magnitude:-54.469383}]},{audioFile:"countingSvenska.mp3",spectrum:[{freq:215.332031,magnitude:-18.976727},{freq:430.664062,magnitude:-23.805183},{freq:473.730469,magnitude:-23.937403},{freq:667.529297,magnitude:-36.477356},{freq:9776.074219,magnitude:-46.779316},{freq:9883.740234,magnitude:-46.87299},{freq:9948.339844,magnitude:-47.843761},{freq:818.261719,magnitude:-47.975559},{freq:9108.544922,magnitude:-50.064014},{freq:8656.347656,magnitude:-50.149624},{freq:2002.587891,magnitude:-50.343147},{freq:9711.474609,magnitude:-50.482002},{freq:7385.888672,magnitude:-50.554905},{freq:9173.144531,magnitude:-50.921734},{freq:9646.875,magnitude:-51.072002},{freq:1765.722656,magnitude:-51.101601}]},{audioFile:"crosswalk.mp3",spectrum:[{freq:257.8125,magnitude:-37.666729},{freq:820.3125,magnitude:-41.777088},{freq:750,magnitude:-43.647976},{freq:539.0625,magnitude:-47.038448},{freq:1382.8125,magnitude:-47.713871},{freq:960.9375,magnitude:-47.815086},{freq:1453.125,magnitude:-49.521015},{freq:1218.75,magnitude:-49.886189},{freq:2906.25,magnitude:-50.243725},{freq:1289.0625,magnitude:-50.455692},{freq:2625,magnitude:-51.801075},{freq:1593.75,magnitude:-51.846096},{freq:3023.4375,magnitude:-52.134571},{freq:2039.0625,magnitude:-52.144482},{freq:2320.3125,magnitude:-52.657024},{freq:1921.875,magnitude:-53.338219}]},{audioFile:"emptyWordsNea.mp3",spectrum:[{freq:215.332031,magnitude:-19.520159},{freq:430.664062,magnitude:-25.219025},{freq:602.929688,magnitude:-31.175522},{freq:64.599609,magnitude:-35.193279},{freq:796.728516,magnitude:-39.868279},{freq:1787.255859,magnitude:-41.391182},{freq:882.861328,magnitude:-42.827045},{freq:1055.126953,magnitude:-45.009171},{freq:1679.589844,magnitude:-45.019444},{freq:1119.726562,magnitude:-45.374962},{freq:1571.923828,magnitude:-45.392387},{freq:1421.191406,magnitude:-46.156982},{freq:1270.458984,magnitude:-46.377228},{freq:1894.921875,magnitude:-46.470295},{freq:1485.791016,magnitude:-47.266369},{freq:8613.28125,magnitude:-47.489655}]},{audioFile:"flightLanding.mp3",spectrum:[{freq:150.732422,magnitude:-23.22921},{freq:322.998047,magnitude:-27.817633},{freq:86.132812,magnitude:-28.757832},{freq:882.861328,magnitude:-36.045925},{freq:452.197266,magnitude:-36.165146},{freq:516.796875,magnitude:-38.192909},{freq:645.996094,magnitude:-39.4725},{freq:1055.126953,magnitude:-40.918613},{freq:990.527344,magnitude:-40.968189},{freq:732.128906,magnitude:-41.37928},{freq:796.728516,magnitude:-41.518967},{freq:1485.791016,magnitude:-42.438782},{freq:1248.925781,magnitude:-44.283665},{freq:1765.722656,magnitude:-44.834751},{freq:1162.792969,magnitude:-45.961536},{freq:1356.591797,magnitude:-46.540531}]},{audioFile:"fromBerlin.mp3",spectrum:[{freq:129.199219,magnitude:-19.337328},{freq:172.265625,magnitude:-20.061157},{freq:236.865234,magnitude:-21.243382},{freq:366.064453,magnitude:-25.249617},{freq:409.130859,magnitude:-25.250202},{freq:322.998047,magnitude:-25.32493},{freq:473.730469,magnitude:-25.473864},{freq:645.996094,magnitude:-26.291237},{freq:602.929688,magnitude:-26.820797},{freq:968.994141,magnitude:-28.423075},{freq:796.728516,magnitude:-28.616865},{freq:904.394531,magnitude:-30.327291},{freq:1464.257812,magnitude:-32.71851},{freq:1184.326172,magnitude:-33.538372},{freq:1119.726562,magnitude:-33.638268},{freq:1270.458984,magnitude:-34.200172}]},{audioFile:"kitchen1.mp3",spectrum:[{freq:107.666016,magnitude:-23.018032},{freq:150.732422,magnitude:-23.063093},{freq:107.666016,magnitude:-23.683832},{freq:150.732422,magnitude:-23.870668},{freq:236.865234,magnitude:-27.578087},{freq:236.865234,magnitude:-28.458439},{freq:301.464844,magnitude:-28.528795},{freq:301.464844,magnitude:-29.146461},{freq:430.664062,magnitude:-31.122925},{freq:430.664062,magnitude:-31.620726},{freq:538.330078,magnitude:-32.279846},{freq:538.330078,magnitude:-32.766731},{freq:495.263672,magnitude:-32.782124},{freq:495.263672,magnitude:-32.833862},{freq:645.996094,magnitude:-33.121647},{freq:645.996094,magnitude:-33.218231}]},{audioFile:"pendelTag.mp3",spectrum:[{freq:236.865234,magnitude:-16.221592},{freq:64.599609,magnitude:-18.688091},{freq:409.130859,magnitude:-20.336178},{freq:559.863281,magnitude:-21.620527},{freq:624.462891,magnitude:-23.685429},{freq:861.328125,magnitude:-25.067635},{freq:925.927734,magnitude:-25.832678},{freq:1722.65625,magnitude:-27.109802},{freq:1873.388672,magnitude:-27.189735},{freq:1055.126953,magnitude:-29.507767},{freq:1248.925781,magnitude:-29.806211},{freq:1141.259766,magnitude:-30.065187},{freq:1313.525391,magnitude:-30.253767},{freq:1916.455078,magnitude:-30.367163},{freq:1421.191406,magnitude:-31.539719},{freq:1528.857422,magnitude:-31.722507}]},{audioFile:"pendelTag2.mp3",spectrum:[{freq:301.464844,magnitude:-28.588257},{freq:150.732422,magnitude:-29.29398},{freq:366.064453,magnitude:-31.429947},{freq:86.132812,magnitude:-31.997349},{freq:689.0625,magnitude:-32.262497},{freq:775.195312,magnitude:-33.855614},{freq:559.863281,magnitude:-34.162552},{freq:947.460938,magnitude:-35.370667},{freq:861.328125,magnitude:-36.640476},{freq:1076.660156,magnitude:-39.055378},{freq:1248.925781,magnitude:-40.740498},{freq:1313.525391,magnitude:-41.248177},{freq:1442.724609,magnitude:-43.415245},{freq:1550.390625,magnitude:-44.174026},{freq:1658.056641,magnitude:-44.426029},{freq:2002.587891,magnitude:-45.137405}]},{audioFile:"sirenBirds.mp3",spectrum:[{freq:2906.982422,magnitude:-23.156624},{freq:732.128906,magnitude:-26.645731},{freq:322.998047,magnitude:-27.420908},{freq:968.994141,magnitude:-27.515535},{freq:172.265625,magnitude:-27.680265},{freq:129.199219,magnitude:-27.757851},{freq:1937.988281,magnitude:-29.04484},{freq:882.861328,magnitude:-29.5805},{freq:602.929688,magnitude:-29.844624},{freq:452.197266,magnitude:-30.23547},{freq:538.330078,magnitude:-30.711304},{freq:1098.193359,magnitude:-31.065268},{freq:1313.525391,magnitude:-33.923553},{freq:2196.386719,magnitude:-33.927032},{freq:2131.787109,magnitude:-35.18816},{freq:2304.052734,magnitude:-35.270332}]},{audioFile:"snow.mp3",spectrum:[{freq:64.599609,magnitude:-29.677166},{freq:344.53125,magnitude:-40.347485},{freq:602.929688,magnitude:-44.040558},{freq:689.0625,magnitude:-44.897915},{freq:925.927734,magnitude:-48.870106},{freq:1205.859375,magnitude:-49.086319},{freq:1098.193359,magnitude:-50.976013},{freq:1291.992188,magnitude:-52.224236},{freq:1421.191406,magnitude:-53.330524},{freq:1485.791016,magnitude:-53.476215},{freq:1378.125,magnitude:-53.615837},{freq:1636.523438,magnitude:-54.583996},{freq:1744.189453,magnitude:-55.241005},{freq:1808.789062,magnitude:-55.726116},{freq:1937.988281,magnitude:-57.665276},{freq:2024.121094,magnitude:-59.252815}]},{audioFile:"walkingInStreet.mp3",spectrum:[{freq:129.199219,magnitude:-24.899473},{freq:258.398438,magnitude:-30.800665},{freq:215.332031,magnitude:-31.003553},{freq:64.599609,magnitude:-32.746632},{freq:904.394531,magnitude:-35.545536},{freq:602.929688,magnitude:-35.755497},{freq:366.064453,magnitude:-35.907131},{freq:839.794922,magnitude:-36.146004},{freq:452.197266,magnitude:-36.174366},{freq:689.0625,magnitude:-36.796539},{freq:968.994141,magnitude:-37.352345},{freq:1098.193359,magnitude:-38.130184},{freq:1184.326172,magnitude:-38.222878},{freq:1141.259766,magnitude:-38.283627},{freq:1399.658203,magnitude:-41.17009},{freq:1787.255859,magnitude:-43.650486}]}]},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=e=>{let t=e.reduce((e,t)=>e+t),n=Math.random()*t,r=0;for(let t=0;t<e.length;t++)if(n<=(r=+(r+=e[t]).toFixed(2)))return t},i=e=>{let t=e.reduce((e,t)=>e+t);return t>0?e.map(e=>e/t):e.map(()=>0)},o=(e,t)=>{var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var o=n[i];if(e[o]!==t[o])return!1}return!0},a=(e,t)=>(e%t+t)%t;n.d(t,"getAllTransitions",function(){return s}),n.d(t,"MarkovN",function(){return d});const s=(e,t)=>e.reduce((n,r,i)=>{const o=[];for(let n=t;n>=0;n--)o.push(e[a(i-n,e.length)]);return n.push(o),n},[]),u=(e,t)=>{const n=[...e];return n.shift(),n.push(t),n};class d{constructor(e,t){this.dictionary=[],this.combinations=[],this.lastState=[];for(let n=0;n<t;n++)this.lastState.push(e[n]);this.transitionMatrix=this.createTransitionMatrix(e,t)}createTransitionMatrix(e,t){this.dictionary=Array.from(new Set(e)),this.combinations=s(e,t);let n=[];for(let e=0;e<this.combinations.length;e++){let e=[];for(let t=0;t<this.dictionary.length;t++)e.push(0);n.push(e)}for(let r=0;r<e.length;r++){let i=[];for(let n=t;n>=0;n--)i.push(e[a(r-n,e.length)]);let s=this.combinations.findIndex(e=>o(i,e)),u=e[(r+1)%e.length],d=this.dictionary.indexOf(u);n[s][d]++}return n=n.map(i)}getNextState(e){const t=this.transitionMatrix[this.combinations.findIndex(t=>o(e,t))],n=r(t);return this.dictionary[n]}*asPattern(e){for(this.lastState=e;;){let e=this.getNextState(this.lastState);this.lastState=u(this.lastState,e),yield e}}}t.default=d}])},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);const r=e=>e[Math.floor(Math.random()*e.length)],i=(e,t)=>e/t,o=(e,t)=>t.reduce((t,n)=>{const r=t-e,i=n-e;return Math.abs(i)<Math.abs(r)?n:t},t[0]),a=(e,t)=>e.reduce((e,n)=>t(n)?n:e),s=(e,t)=>{const n=Math.min(...t)-Math.min(...e),r=Math.max(...t)-Math.min(...t),i=Math.max(...e)-Math.min(...e);return e.map(a=>o((a-Math.min(...e))/i*r+n,t))},u=(e=.5)=>!(Math.random()<e),d=e=>"function"==typeof e?e:()=>e,l=(e,t)=>(e%t+t)%t;const c=n(2).default,f=function(e,t,n){return new c(e,t).asPattern(n)},_=function*(e,t){let n=new class{constructor(e,t){this.population=e,this.scores=Array(e.length).fill(0),this.goal=t,this.lastState=e[Math.floor(Math.random()*(e.length-1))]}getTotalFitnessRating(e,t){let n=0,r=e.map(t=>t-Math.min.apply(null,e));for(let e=r.length-1;e>=0;e--)n+=this.getDistance(r[e],t[e]);return n}getTopTwoGenerations(e,t){let n=0;for(let t=e.length-1;t>=0;t--)e[n]<e[t]&&(n=t),e[n]===e[t]&&(n=Math.random()>.5?n:t);let r=0;const i=e[n];if(u(.25))r=Math.floor(Math.random()*e.length);else for(let t=e.length-1;t>=0;t--)e[t]!==i&&(e[r]<e[t]&&(r=t),e[r]===e[t])&&(r=Math.random()>.5?r:t);return[t[n],t[r]]}mateGenerations(e){return[this.getSplicedOffspring(e[0],e[1]),this.getInterlacedOffspring(e[0],e[1])]}getInterlacedOffspring(e,t){const n=Array(e.length);for(let r=n.length-1;r>=0;r--)n[r]=r%2==0?e[r]:t[r];return n}getSplicedOffspring(e,t){const n=0==(Math.random()>.5?1:0)?[e,t]:[t,e],r=Math.floor(e.length/2);return[...n[0].slice(0,r),...n[1].slice(r-1,n[1].length-1)]}getDistance(e,t){return t-e}getPopulationScores(e,t){let n=Array(e.length).fill(0);for(let r=e.length-1;r>=0;r--)n[r]=this.getTotalFitnessRating(e[r],t);return n}getNextGeneration(e,t){const n=this.getPopulationScores(e,t),r=this.getTopTwoGenerations(n,e),i=this.mateGenerations(r);for(let e=0;e<i.length-1;e++)this.population.splice(Math.floor(Math.random()*(this.population.length-1)),1);return this.population=[...this.population,...i],i[Math.floor(Math.random()*(.999*i.length))]}getNextState(e){return this.getNextGeneration(this.population,this.goal)}asPattern(){const e=this;return function*(t){for(e.lastState=t;;){const t=e.getNextState(e.lastState);e.lastState=t,yield t}}}}(e,t),r=t;for(;;){let e=n.getNextState(r);r=[r[r.length-1],e],yield e}};const p=e=>{for(var t,n="number"==typeof e?e:50,r=new Float32Array(44100),i=Math.PI/180,o=0;o<44100;++o)t=2*o/44100-1,r[o]=(3+n)*t*20*i/(Math.PI+n*Math.abs(t));return r};var m=class{constructor(e,t){this.context=e,this.config=t||{}}init(){const e=this.context,t=e.createOscillator();this.config.waveformType&&(t.type=this.config.waveformType);const n=e.createGain(),r=e.createStereoPanner(),i=e.createWaveShaper();i.curve=p(800),i.oversample="4x",t.connect(n),n.connect(r),r.connect(i),i.connect(e.destination),t.type=this.config.waveformType?this.config.waveformType:u()?"triangle":"sine",n.gain.value=0,this.synthNodes={oscillator:t,gainNode:n,waveShaper:i,panner:r}}play(e){const{freq:t=220,time:n=1,pan:r=0,vol:i=1}=e;this.init();const{oscillator:o,gainNode:a,waveShaper:s,panner:u}=this.synthNodes;let d=.01;o.frequency.value=t,e.distortion&&(s.curve=p(e.distortion)),t>200&&(d*=.12),t>6e3&&(d*=.08),u.pan.value=r,o.start(0),a.gain.setTargetAtTime(i*d*(.55-.01*Math.random()),this.context.currentTime,.85*n);var l=this;return window.setTimeout(function(){l.stop(.25*n)},1e3*(n-.25*n)),this}stop(e){const t=this.context,{oscillator:n,gainNode:r}=this.synthNodes;return r.gain.setTargetAtTime(0,t.currentTime,.9*e),n.stop(t.currentTime+4*e),this}};const h=e=>{for(var t,n="number"==typeof e?e:50,r=new Float32Array(44100),i=Math.PI/180,o=0;o<44100;++o)t=2*o/44100-1,r[o]=(3+n)*t*20*i/(Math.PI+n*Math.abs(t));return r},g=e=>{var t=0,n=e.createScriptProcessor(4096,1,1);return n.onaudioprocess=function(e){for(var n=e.outputBuffer.getChannelData(0),r=0;r<4096;r++){var i=2*Math.random()-1;n[r]=(t+.02*i)/1.02,t=n[r],n[r]*=3.5}},n};var v=n(0);var y=class{constructor(e,t){this.context=e,this.players=t.samples.map(e=>({player:new v.Howl({src:e.files}),baseFreq:e.freq}))}play(e){const{freq:t=220,time:n=1,pan:r=0,vol:o=1}=e;let a=1;const s=this.findClosestSamplePlayer(t),u=s.player.play();return s.player.loop(!1,u),s.player.rate(i(t,s.baseFreq),u),t>200&&(a*=.2),s.player.fade(0,a*o,200,u),s.player.stereo(r,u),window.setTimeout(function(){s.player.fade(a*o,0,200,u),this.stop(n,s,u)}.bind(this),1e3*n+200),this}stop(e,t,n){return window.setTimeout(function(){t.player.stop()}.bind(this),300),this}findClosestSamplePlayer(e){const t=o(e,this.players.map(e=>e.baseFreq));return a(this.players,e=>e===t)}},q=n(1);n.d(t,"WNS",function(){return A});const w={samplePath:"samples/"},A=e=>{e=e?Object.assign({},w,e):w;const t=q,n=new AudioContext,i=Array(16).fill(0).map(()=>new m(n)),o={samples:[{files:[e.samplePath+"pipeA.mp3"],freq:445},{files:[e.samplePath+"pipeE.mp3"],freq:666},{files:[e.samplePath+"piano2-324.mp3"],freq:324},{files:[e.samplePath+"piano3-814.mp3"],freq:814}]},a=Array(16).fill(0).map(()=>u()?new y(n,o):new m(n)),c=t.map(t=>new y(n,{samples:[{files:[e.samplePath+t.audioFile],freq:1}]})),p=new y(n,{samples:[{files:[e.samplePath+"lowDrone.mp3"],freq:1}]}),v=Array(2).fill(0).map(()=>new class{constructor(e,t){this.context=e,this.config=t||{}}init(){this.oscillator=g(this.context),this.gainNode=this.context.createGain(),this.panner=this.context.createStereoPanner(),this.filter=this.context.createBiquadFilter(),this.filter.type="peaking",this.filter2=this.context.createBiquadFilter(),this.filter2.type="bandpass",this.waveShaper=this.context.createWaveShaper(),this.waveShaper.curve=h(80),this.waveShaper.oversample="4x",this.oscillator.connect(this.waveShaper),this.waveShaper.connect(this.filter),this.filter.connect(this.filter2),this.filter2.connect(this.panner),this.panner.connect(this.gainNode),this.gainNode.connect(this.context.destination),this.gainNode.gain.value=0}play(e){const{freq:t=220,time:n=1,pan:r=0,vol:i=1}=e;this.init();let o=1;return this.filter.frequency.value=t,this.filter.Q.value=50.901,this.filter.gain.value=20,this.filter2.frequency.value=t,this.filter2.Q.value=15.901,this.filter2.gain.value=60,e.distortion&&(this.waveShaper.curve=h(e.distortion)),t>200&&(o*=.12),this.panner.pan.value=r,this.gainNode.gain.value=.001,this.gainNode.gain.exponentialRampToValueAtTime(i*o,this.context.currentTime+n),setTimeout(this.stop.bind(this),1e3*(n+1)),this}stop(){return this.gainNode.gain.setTargetAtTime(0,this.context.currentTime,.01),this}}(n)),A=()=>{v.forEach((e,t)=>{const n=.25*Math.random()+1;e.play({pan:2*t-1,freq:[2090,2393][t]*n,vol:7.8,time:45})}),setTimeout(S,57e3)};let b=0,T=!1,x=!1;const S=()=>{const e=u(.8),n=u(.85);if(e&&!T)return T=!0,A(),setTimeout(()=>{c.forEach(e=>e.stop(0,e.players[0])),i.forEach(e=>e.stop(0))},15e3),!1;n&&!x&&(x=!0,setTimeout(()=>{x=!1},33e4),p.play({freq:1,time:3e5,vol:1})),T=!1,b=((e,t)=>{const n=Array(t).fill(0).map((e,t)=>t).filter(t=>t!==e);return r(n)})(b,t.length);const o=t[b],m=Array(80).fill(o.spectrum.map(e=>e.freq)),h=(e=>e.reduce((e,t)=>e[0].magnitude<t.magnitude?[t]:e,[{freq:0,magnitude:-100}]).map(e=>e.freq).map(t=>Array(e.length).fill(0).map((e,n)=>{const r=t*(n+1);return r>7e3?r/Math.ceil(r/7e3):r}))[0])(o.spectrum),g={initialPopulation:m.map(e=>e.map(e=>Math.random()*(h[h.length-1]-h[0])+(h[0]-20))),populationSize:16,maxGenerations:2,target:h,timeBetweenEvents:()=>15*Math.random()+10,gapBetweenEvents:()=>r([25,10]),melodyOscillators:a,chordOscillators:i,onFinish:S};c[b].play({freq:1,time:18e4,vol:.28}),new class{constructor(e){this.config=e,this.config.timeBetweenEvents=d(this.config.timeBetweenEvents),this.config.gapBetweenEvents=d(this.config.gapBetweenEvents),this.notes=_(e.initialPopulation,e.target),this.config.maxGenerations=e.maxGenerations,this.currentGeneration=0,this.config.onFinish=e.onFinish}play(){const e=this.notes.next().value;let t=0,n=Math.random()>.5?0:1;return this.config.chordOscillators.map(r=>{const i=Math.ceil(5*Math.random());r.play({freq:e[t]/i,time:this.config.timeBetweenEvents(),pan:n%2*2-1,vol:.45}),t++,n++}),this.playMelody(e,this.currentGeneration),this.currentGeneration<=this.config.maxGenerations-1?window.setTimeout(()=>{this.currentGeneration++,this.play()},1e3*(this.config.timeBetweenEvents()+this.config.gapBetweenEvents())):(this.currentGeneration++,this.endOfScene()),this}playMelody(e,t){const n=s([0,4,2,0,7,4,2,7,7,4,2,2,4,4,2,0],e),i=[.5,.5,.5,.5,.5,1,2,.25,.5,1,1,.5,.5,.5,.25,2].map((e,t)=>[n[t],e]),o=Math.floor(Math.random()*n.length),a=[];for(let e=3;e>=0;e--)a.push(n[l(o-e,n.length)]);const d=f(n,3,a);let c=0;const _=e=>{const t=Math.ceil(3*Math.random())+Math.ceil(3*Math.random())+2,n=d.next().value,o=i.filter(e=>e[0]===n);void 0!==n&&u(.55)&&this.config.melodyOscillators[c%this.config.melodyOscillators.length].play({freq:n/t,time:1+6*Math.random(),pan:1*Math.random()-.5,vol:.35}),c++,window.setTimeout(()=>{e===this.currentGeneration&&this.currentGeneration<=this.config.maxGenerations&&_(e)},1e3*(2*r(o)[1]+.5))};_(t)}endOfScene(){const e=this.config.onFinish;this.config.chordOscillators.map(e=>e.stop(1)),window.setTimeout(e,1e3)}}(g).play()};A()};t.default=A}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9XTlMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL1dOUy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9XTlMvLi9ub2RlX21vZHVsZXMvaG93bGVyL2Rpc3QvaG93bGVyLmpzIiwid2VicGFjazovL1dOUy8uL25vZGVfbW9kdWxlcy9tYXJrb3ZuL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL1dOUy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vV05TLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL1dOUy8uL3NyYy9wYXR0ZXJucy50cyIsIndlYnBhY2s6Ly9XTlMvLi9zcmMvR2VuZXRpYy50cyIsIndlYnBhY2s6Ly9XTlMvLi9zcmMvU3ludGgudHMiLCJ3ZWJwYWNrOi8vV05TLy4vc3JjL05vaXNlLnRzIiwid2VicGFjazovL1dOUy8uL3NyYy9NdWx0aVNhbXBsZXIudHMiLCJ3ZWJwYWNrOi8vV05TLy4vc3JjL3ducy50cyIsIndlYnBhY2s6Ly9XTlMvLi9zcmMvU2NlbmUudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImdsb2JhbCIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiSG93bGVyR2xvYmFsIiwidGhpcyIsImluaXQiLCJzZWxmIiwiSG93bGVyIiwiX2NvdW50ZXIiLCJfY29kZWNzIiwiX2hvd2xzIiwiX211dGVkIiwiX3ZvbHVtZSIsIl9jYW5QbGF5RXZlbnQiLCJfbmF2aWdhdG9yIiwibmF2aWdhdG9yIiwibWFzdGVyR2FpbiIsIm5vQXVkaW8iLCJ1c2luZ1dlYkF1ZGlvIiwiYXV0b1N1c3BlbmQiLCJjdHgiLCJtb2JpbGVBdXRvRW5hYmxlIiwiX3NldHVwIiwidm9sdW1lIiwidm9sIiwicGFyc2VGbG9hdCIsInNldHVwQXVkaW9Db250ZXh0IiwiZ2FpbiIsInNldFZhbHVlQXRUaW1lIiwiY3VycmVudFRpbWUiLCJsZW5ndGgiLCJfd2ViQXVkaW8iLCJpZHMiLCJfZ2V0U291bmRJZHMiLCJqIiwic291bmQiLCJfc291bmRCeUlkIiwiX25vZGUiLCJtdXRlIiwibXV0ZWQiLCJ1bmxvYWQiLCJjbG9zZSIsImNvZGVjcyIsImV4dCIsInJlcGxhY2UiLCJzdGF0ZSIsIl9hdXRvU3VzcGVuZCIsIkF1ZGlvIiwib25jYW5wbGF5dGhyb3VnaCIsImUiLCJfc2V0dXBDb2RlY3MiLCJhdWRpb1Rlc3QiLCJlcnIiLCJjYW5QbGF5VHlwZSIsIm1wZWdUZXN0IiwiY2hlY2tPcGVyYSIsInVzZXJBZ2VudCIsIm1hdGNoIiwiaXNPbGRPcGVyYSIsInBhcnNlSW50Iiwic3BsaXQiLCJtcDMiLCJtcGVnIiwib3B1cyIsIm9nZyIsIm9nYSIsIndhdiIsImFhYyIsImNhZiIsIm00YSIsIm1wNCIsIndlYmEiLCJ3ZWJtIiwiZG9sYnkiLCJmbGFjIiwiX2VuYWJsZU1vYmlsZUF1ZGlvIiwiaXNNb2JpbGUiLCJ0ZXN0IiwiX21vYmlsZUVuYWJsZWQiLCJfbW9iaWxlVW5sb2FkZWQiLCJzYW1wbGVSYXRlIiwiX3NjcmF0Y2hCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJ1bmxvY2siLCJfYXV0b1Jlc3VtZSIsInNvdXJjZSIsImNyZWF0ZUJ1ZmZlclNvdXJjZSIsImJ1ZmZlciIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInN0YXJ0Iiwibm90ZU9uIiwicmVzdW1lIiwib25lbmRlZCIsImRpc2Nvbm5lY3QiLCJkb2N1bWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfZW1pdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdXNwZW5kIiwiX3NvdW5kcyIsIl9wYXVzZWQiLCJfc3VzcGVuZFRpbWVyIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRoZW4iLCJfcmVzdW1lQWZ0ZXJTdXNwZW5kIiwiSG93bCIsInNyYyIsImNvbnNvbGUiLCJlcnJvciIsIl9hdXRvcGxheSIsImF1dG9wbGF5IiwiX2Zvcm1hdCIsImZvcm1hdCIsIl9odG1sNSIsImh0bWw1IiwiX2xvb3AiLCJsb29wIiwiX3Bvb2wiLCJwb29sIiwiX3ByZWxvYWQiLCJwcmVsb2FkIiwiX3JhdGUiLCJyYXRlIiwiX3Nwcml0ZSIsInNwcml0ZSIsIl9zcmMiLCJ1bmRlZmluZWQiLCJfeGhyV2l0aENyZWRlbnRpYWxzIiwieGhyV2l0aENyZWRlbnRpYWxzIiwiX2R1cmF0aW9uIiwiX3N0YXRlIiwiX2VuZFRpbWVycyIsIl9xdWV1ZSIsIl9wbGF5TG9jayIsIl9vbmVuZCIsIm9uZW5kIiwiZm4iLCJfb25mYWRlIiwib25mYWRlIiwiX29ubG9hZCIsIm9ubG9hZCIsIl9vbmxvYWRlcnJvciIsIm9ubG9hZGVycm9yIiwiX29ucGxheWVycm9yIiwib25wbGF5ZXJyb3IiLCJfb25wYXVzZSIsIm9ucGF1c2UiLCJfb25wbGF5Iiwib25wbGF5IiwiX29uc3RvcCIsIm9uc3RvcCIsIl9vbm11dGUiLCJvbm11dGUiLCJfb252b2x1bWUiLCJvbnZvbHVtZSIsIl9vbnJhdGUiLCJvbnJhdGUiLCJfb25zZWVrIiwib25zZWVrIiwiX29udW5sb2NrIiwib251bmxvY2siLCJfb25yZXN1bWUiLCJwdXNoIiwiZXZlbnQiLCJhY3Rpb24iLCJwbGF5IiwibG9hZCIsInVybCIsInN0ciIsImV4ZWMiLCJ0b0xvd2VyQ2FzZSIsIndhcm4iLCJsb2NhdGlvbiIsInByb3RvY29sIiwic2xpY2UiLCJTb3VuZCIsImxvYWRCdWZmZXIiLCJpbnRlcm5hbCIsImlkIiwibnVtIiwiX2VuZGVkIiwiX2lkIiwiX2luYWN0aXZlU291bmQiLCJzb3VuZElkIiwiX2xvYWRRdWV1ZSIsInNlZWsiLCJNYXRoIiwibWF4IiwiX3NlZWsiLCJkdXJhdGlvbiIsInRpbWVvdXQiLCJhYnMiLCJfc3RhcnQiLCJfc3RvcCIsIm5vZGUiLCJwbGF5V2ViQXVkaW8iLCJfcmVmcmVzaEJ1ZmZlciIsIl9wbGF5U3RhcnQiLCJidWZmZXJTb3VyY2UiLCJub3RlR3JhaW5PbiIsIkluZmluaXR5Iiwib25jZSIsIl9jbGVhclRpbWVyIiwicGxheUh0bWw1IiwicGxheWJhY2tSYXRlIiwiUHJvbWlzZSIsImNhdGNoIiwicGF1c2VkIiwibG9hZGVkTm9SZWFkeVN0YXRlIiwiZWplY3RhIiwicmVhZHlTdGF0ZSIsImlzQ29jb29uSlMiLCJsaXN0ZW5lciIsInBhdXNlIiwiX3JhdGVTZWVrIiwiX3N0b3BGYWRlIiwic3RvcCIsIm5vdGVPZmYiLCJfY2xlYW5CdWZmZXIiLCJpc05hTiIsImFyZ3VtZW50cyIsIl9pbnRlcnZhbCIsImFyZ3MiLCJpbmRleE9mIiwiYXBwbHkiLCJmYWRlIiwiZnJvbSIsInRvIiwibGVuIiwiZW5kIiwibGluZWFyUmFtcFRvVmFsdWVBdFRpbWUiLCJfc3RhcnRGYWRlSW50ZXJ2YWwiLCJpc0dyb3VwIiwiZGlmZiIsInN0ZXBzIiwic3RlcExlbiIsImxhc3RUaWNrIiwiRGF0ZSIsIm5vdyIsIl9mYWRlVG8iLCJzZXRJbnRlcnZhbCIsInRpY2siLCJtaW4iLCJyb3VuZCIsImNsZWFySW50ZXJ2YWwiLCJjYW5jZWxTY2hlZHVsZWRWYWx1ZXMiLCJsb29wU3RhcnQiLCJsb29wRW5kIiwicmVhbFRpbWUiLCJwbGF5aW5nIiwicmF0ZVNlZWsiLCJzZWVrQW5kRW1pdCIsImVtaXRTZWVrIiwic291bmRzIiwiX2Vycm9yRm4iLCJfbG9hZEZuIiwiaW5kZXgiLCJzcGxpY2UiLCJyZW1DYWNoZSIsImNhY2hlIiwib24iLCJldmVudHMiLCJvZmYiLCJpc0lkIiwia2V5cyIsIkFycmF5IiwiaXNBcnJheSIsIm1zZyIsInRhc2siLCJzaGlmdCIsImVuZGVkIiwiX2RyYWluIiwicmVzZXQiLCJsaW1pdCIsImNudCIsIl9wYW5uZXIiLCJob3dsIiwiX3BhcmVudCIsInBhcmVudCIsImNyZWF0ZUdhaW4iLCJjcmVhdGVHYWluTm9kZSIsIl9lcnJvckxpc3RlbmVyIiwiX2xvYWRMaXN0ZW5lciIsImNvZGUiLCJjZWlsIiwiX19kZWZhdWx0IiwibG9hZFNvdW5kIiwiZGF0YSIsImF0b2IiLCJkYXRhVmlldyIsIlVpbnQ4QXJyYXkiLCJjaGFyQ29kZUF0IiwiZGVjb2RlQXVkaW9EYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwid2l0aENyZWRlbnRpYWxzIiwicmVzcG9uc2VUeXBlIiwic3RhdHVzIiwicmVzcG9uc2UiLCJvbmVycm9yIiwic2FmZVhoclNlbmQiLCJzZW5kIiwiYXJyYXlidWZmZXIiLCJzdWNjZXNzIiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiaU9TIiwicGxhdGZvcm0iLCJhcHBWZXJzaW9uIiwidmVyc2lvbiIsInNhZmFyaSIsInN0YW5kYWxvbmUiLCJfcG9zIiwiX29yaWVudGF0aW9uIiwic3RlcmVvIiwicGFuIiwicG9zIiwieCIsInkiLCJ6IiwicG9zaXRpb25YIiwic2V0VGFyZ2V0QXRUaW1lIiwicG9zaXRpb25ZIiwicG9zaXRpb25aIiwic2V0UG9zaXRpb24iLCJvcmllbnRhdGlvbiIsInhVcCIsInlVcCIsInpVcCIsIm9yIiwiZm9yd2FyZFgiLCJmb3J3YXJkWSIsImZvcndhcmRaIiwidXBYIiwidXBZIiwidXBaIiwic2V0T3JpZW50YXRpb24iLCJfc3VwZXIiLCJfc3RlcmVvIiwiX3Bhbm5lckF0dHIiLCJjb25lSW5uZXJBbmdsZSIsImNvbmVPdXRlckFuZ2xlIiwiY29uZU91dGVyR2FpbiIsImRpc3RhbmNlTW9kZWwiLCJtYXhEaXN0YW5jZSIsInBhbm5pbmdNb2RlbCIsInJlZkRpc3RhbmNlIiwicm9sbG9mZkZhY3RvciIsIl9vbnN0ZXJlbyIsIm9uc3RlcmVvIiwiX29ucG9zIiwib25wb3MiLCJfb25vcmllbnRhdGlvbiIsIm9ub3JpZW50YXRpb24iLCJwYW5uZXJUeXBlIiwiY3JlYXRlU3RlcmVvUGFubmVyIiwic2V0dXBQYW5uZXIiLCJvcmllbnRhdGlvblgiLCJvcmllbnRhdGlvblkiLCJvcmllbnRhdGlvbloiLCJwYW5uZXJBdHRyIiwiX2NvbmVJbm5lckFuZ2xlIiwiX2NvbmVPdXRlckFuZ2xlIiwiX2NvbmVPdXRlckdhaW4iLCJfZGlzdGFuY2VNb2RlbCIsIl9tYXhEaXN0YW5jZSIsIl9yZWZEaXN0YW5jZSIsIl9yb2xsb2ZmRmFjdG9yIiwiX3Bhbm5pbmdNb2RlbCIsInBhIiwicGFubmVyIiwidHlwZSIsImNyZWF0ZVBhbm5lciIsImRlZmF1bHQiLCJyZWR1Y2UiLCJyYW5kb20iLCJ0b0ZpeGVkIiwibWFwIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImEiLCJ1IiwiW29iamVjdCBPYmplY3RdIiwiZGljdGlvbmFyeSIsImNvbWJpbmF0aW9ucyIsImxhc3RTdGF0ZSIsInRyYW5zaXRpb25NYXRyaXgiLCJjcmVhdGVUcmFuc2l0aW9uTWF0cml4IiwiU2V0IiwiZmluZEluZGV4IiwiZ2V0TmV4dFN0YXRlIiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsImNob29zZSIsImFycmF5IiwiZmxvb3IiLCJnZXRSYXRlRnJvbUZyZXF1ZW5jaWVzIiwiZnJlcSIsImJhc2VGcmVxIiwiZ2V0Q2xvc2VzdE1lbWJlciIsInN1YmplY3QiLCJzZXQiLCJhY2N1bSIsIm1lbWJlciIsInByZXZEaXN0YW5jZSIsImN1cnJlbnREaXN0YW5jZSIsImZpbmRJbkNvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwicHJlZGljYXRlRnVuY3Rpb24iLCJtYXBUb0RvbWFpbiIsImRvbWFpbiIsInNldE9mZnNldCIsImRvbWFpblJhbmdlIiwic2V0UmFuZ2UiLCJmbGlwQ29pbiIsInByb2JhYmlsaXR5IiwibWFrZUZ1bmN0aW9uIiwibW9kIiwibW9kdWxvIiwiTWFya292IiwiUG1hcmtvdiIsInNlZWQiLCJvcmRlciIsImluaXRpYWxTdGF0ZSIsImFzUGF0dGVybiIsInBhdHRlcm5zX1BnZW5ldGljIiwiaW5wdXRQb3B1bGF0aW9uIiwiZ29hbCIsImdlbmV0aWMiLCJwb3B1bGF0aW9uIiwic2NvcmVzIiwiZmlsbCIsInNjb3JlIiwibm9ybWFsaXplZENvbGxlY3Rpb24iLCJnZXREaXN0YW5jZSIsImluZGV4T2ZIaWdoZXN0U2NvcmUiLCJpbmRleE9mTmV4dEhpZ2hlc3RTY29yZSIsInRvcEdlbmVyYXRpb25TY29yZSIsInBhcmVudHMiLCJnZXRTcGxpY2VkT2Zmc3ByaW5nIiwiZ2V0SW50ZXJsYWNlZE9mZnNwcmluZyIsInBhcmVudE9uZSIsInBhcmVudFR3byIsImludGVybGFjZWRPZmZzcHJpbmciLCJzcGxpdFBvaW50IiwiaW5wdXQiLCJnZXRUb3RhbEZpdG5lc3NSYXRpbmciLCJwb3B1bGF0aW9uU2NvcmVzIiwiZ2V0UG9wdWxhdGlvblNjb3JlcyIsInRvcFR3b0dlbmVyYXRpb25zIiwiZ2V0VG9wVHdvR2VuZXJhdGlvbnMiLCJuZXdHZW5lcmF0aW9ucyIsIm1hdGVHZW5lcmF0aW9ucyIsImdldE5leHRHZW5lcmF0aW9uIiwibmV4dFN0YXRlIiwibWFrZURpc3RvcnRpb25DdXJ2ZSIsImFtb3VudCIsImsiLCJjdXJ2ZSIsIkZsb2F0MzJBcnJheSIsImRlZyIsIlBJIiwic3JjX1N5bnRoIiwiY29udGV4dCIsImNvbmZpZyIsIm9zY2lsbGF0b3IiLCJjcmVhdGVPc2NpbGxhdG9yIiwid2F2ZWZvcm1UeXBlIiwiZ2Fpbk5vZGUiLCJ3YXZlU2hhcGVyIiwiY3JlYXRlV2F2ZVNoYXBlciIsIm92ZXJzYW1wbGUiLCJzeW50aE5vZGVzIiwib3B0IiwidGltZSIsImZyZXF1ZW5jeSIsImRpc3RvcnRpb24iLCJOb2lzZV9tYWtlRGlzdG9ydGlvbkN1cnZlIiwiY3JlYXRlQnJvd25Ob2lzZSIsImF1ZGlvQ29udGV4dCIsImxhc3RPdXQiLCJjcmVhdGVTY3JpcHRQcm9jZXNzb3IiLCJvbmF1ZGlvcHJvY2VzcyIsIm91dHB1dCIsIm91dHB1dEJ1ZmZlciIsImdldENoYW5uZWxEYXRhIiwid2hpdGUiLCJzcmNfTXVsdGlTYW1wbGVyIiwicGxheWVycyIsInNhbXBsZXMiLCJzYW1wbGVDb25maWciLCJwbGF5ZXIiLCJob3dsZXIiLCJmaWxlcyIsInNhbXBsZVBsYXllciIsImZpbmRDbG9zZXN0U2FtcGxlUGxheWVyIiwiY3VycmVudGx5UGxheWluZ1NhbXBsZUlEIiwiY2xvc2VzdFBsYXllckZyZXF1ZW5jeSIsIl9fd2VicGFja19leHBvcnRzX18iLCJXTlMiLCJkZWZhdWx0Q29uZmlnIiwic2FtcGxlUGF0aCIsImFzc2lnbiIsImJhY2tncm91bmRTYW1wbGVzIiwic3BlY3RyYWxEYXRhIiwiY2hvcmRPc2NpbGxhdG9ycyIsIm11bHRpU2FtcGxlck9wdHMiLCJtZWxvZHlPc2NpbGxhdG9ycyIsInNvdXJjZVNhbXBsZXMiLCJzYW1wbGVEYXRhIiwiYXVkaW9GaWxlIiwibG93RHJvbmVQbGF5ZXIiLCJiZWxscyIsImZpbHRlciIsImNyZWF0ZUJpcXVhZEZpbHRlciIsImZpbHRlcjIiLCJRIiwiZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSIsInBsYXlCZWxscyIsImZvckVhY2giLCJiZWxsIiwicmFuZG9tTXVsIiwicGxheU5ld1NjZW5lIiwic2FtcGxlSW5kZXgiLCJpbnRlcmx1ZGVKdXN0UGxheWVkIiwibG93RHJvbmVJc1BsYXlpbmciLCJwbGF5SW50ZXJsdWRlIiwicGxheUxvd0Ryb25lIiwic3ludGgiLCJsYXN0SW5kZXgiLCJwb3NzaWJsZUluZGV4ZXMiLCJpdGVtIiwiZ2V0U2VxdWVudGlhbFJhbmRvbUluZGV4IiwiYmFja2dyb3VuZFNhbXBsZSIsImluaXRpYWxQb3B1bGF0aW9uIiwic3BlY3RydW0iLCJiaW4iLCJ0YXJnZXQiLCJtYWduaXR1ZGUiLCJzdHJvbmdlc3RGcmVxIiwiaGFybW9uaWMiLCJnZXRQcm9taW5lbnRGcmVxdWVuY2llcyIsInNjZW5lQ29uZmlnIiwiaXRlbTIiLCJwb3B1bGF0aW9uU2l6ZSIsIm1heEdlbmVyYXRpb25zIiwidGltZUJldHdlZW5FdmVudHMiLCJnYXBCZXR3ZWVuRXZlbnRzIiwib25GaW5pc2giLCJub3RlcyIsImN1cnJlbnRHZW5lcmF0aW9uIiwibmV3Tm90ZXMiLCJuZXh0Iiwib3NjIiwib2N0YXZlIiwicGxheU1lbG9keSIsImVuZE9mU2NlbmUiLCJnZW5lcmF0aW9uIiwiaWRlYWxNZWxvZHkiLCJyaHl0aG1NYXBwaW5ncyIsInJoeXRobSIsInJhbmRvbVNoaWZ0QW1vdW50Iiwib2Zmc2V0IiwibWFya292TWVsb2R5IiwicGxheU5leHROb3RlIiwibmV4dE5vdGUiLCJuZXh0Umh5dGhtIiwibm90ZVJoeXRobSIsIm9uRmluaXNoQ2FsbGJhY2siXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELE9BQUEsU0FBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSxJQUFBRCxJQUVBRCxFQUFBLElBQUFDLElBUkEsQ0FTQ0ssT0FBQSxXQUNELG1CQ1RBLElBQUFDLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQLFFBR0EsSUFBQUMsRUFBQUksRUFBQUUsSUFDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVCxZQVVBLE9BTkFVLEVBQUFILEdBQUFJLEtBQUFWLEVBQUFELFFBQUFDLElBQUFELFFBQUFNLEdBR0FMLEVBQUFRLEdBQUEsRUFHQVIsRUFBQUQsUUEwREEsT0FyREFNLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFRLEVBQUEsU0FBQWQsRUFBQWUsRUFBQUMsR0FDQVYsRUFBQVcsRUFB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QUs4TCxTQUNoQjVELElBQXNCLEVBQWhCbEksS0FBSzhMLFNBQWdCLEdBQzNCbFcsSUFBSyxNQUdUdkQsSUFFQUosT0FBTzJJLFdBQVcsS0FDYndjLElBQWU1aUIsS0FBS3FpQixtQkFBcUJyaUIsS0FBS3FpQixtQkFBcUJyaUIsS0FBSytjLE9BQU9pRixnQkFDaEZtQixFQUFhUCxJQUd3QixLQUFaLEVBQXhCcEssRUFBTzZLLEdBQVksR0FBVSxNQUdwQ0YsRUFBYVAsR0FJUGhMLGFBQ04sTUFBTTJMLEVBQW1CdmpCLEtBQUsrYyxPQUFPb0YsU0FFckNuaUIsS0FBSytjLE9BQU95QyxpQkFBaUJoSSxJQUFLdUosR0FBU0EsRUFBTXpULEtBQUssSUFFdEQ3UCxPQUFPMkksV0FBV21kLEVBQWtCLE9EK0IxQjFCLEdBQWExWCxRQUl6QmtXLEtBS0ZwQixFQUFBIiwiZmlsZSI6Inducy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiV05TXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIldOU1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJXTlNcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsIi8qIVxuICogIGhvd2xlci5qcyB2Mi4wLjE1XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMTgsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSBnbG9iYWwgY29udHJvbGxlci4gQWxsIGNvbnRhaW5lZCBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGFwcGx5XG4gICAqIHRvIGFsbCBzb3VuZHMgdGhhdCBhcmUgY3VycmVudGx5IHBsYXlpbmcgb3Igd2lsbCBiZSBpbiB0aGUgZnV0dXJlLlxuICAgKi9cbiAgdmFyIEhvd2xlckdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlID0ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGdsb2JhbCBJRCBjb3VudGVyLlxuICAgICAgc2VsZi5fY291bnRlciA9IDEwMDA7XG5cbiAgICAgIC8vIEludGVybmFsIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9jb2RlY3MgPSB7fTtcbiAgICAgIHNlbGYuX2hvd2xzID0gW107XG4gICAgICBzZWxmLl9tdXRlZCA9IGZhbHNlO1xuICAgICAgc2VsZi5fdm9sdW1lID0gMTtcbiAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5dGhyb3VnaCc7XG4gICAgICBzZWxmLl9uYXZpZ2F0b3IgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvcikgPyB3aW5kb3cubmF2aWdhdG9yIDogbnVsbDtcblxuICAgICAgLy8gUHVibGljIHByb3BlcnRpZXMuXG4gICAgICBzZWxmLm1hc3RlckdhaW4gPSBudWxsO1xuICAgICAgc2VsZi5ub0F1ZGlvID0gZmFsc2U7XG4gICAgICBzZWxmLnVzaW5nV2ViQXVkaW8gPSB0cnVlO1xuICAgICAgc2VsZi5hdXRvU3VzcGVuZCA9IHRydWU7XG4gICAgICBzZWxmLmN0eCA9IG51bGw7XG5cbiAgICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRoZSBhdXRvIGlPUyBlbmFibGVyLlxuICAgICAgc2VsZi5tb2JpbGVBdXRvRW5hYmxlID0gdHJ1ZTtcblxuICAgICAgLy8gU2V0dXAgdGhlIHZhcmlvdXMgc3RhdGUgdmFsdWVzIGZvciBnbG9iYWwgdHJhY2tpbmcuXG4gICAgICBzZWxmLl9zZXR1cCgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgZ2xvYmFsIHZvbHVtZSBmb3IgYWxsIHNvdW5kcy5cbiAgICAgKiBAcGFyYW0gIHtGbG9hdH0gdm9sIFZvbHVtZSBmcm9tIDAuMCB0byAxLjAuXG4gICAgICogQHJldHVybiB7SG93bGVyL0Zsb2F0fSAgICAgUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24odm9sKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuICAgICAgdm9sID0gcGFyc2VGbG9hdCh2b2wpO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAvLyBEb24ndCB1cGRhdGUgYW55IG9mIHRoZSBub2RlcyBpZiB3ZSBhcmUgbXV0ZWQuXG4gICAgICAgIGlmIChzZWxmLl9tdXRlZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB1c2luZyBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBhZGp1c3QgdGhlIG1hc3RlciBnYWluLlxuICAgICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgY2hhbmdlIHZvbHVtZSBmb3IgYWxsIEhUTUw1IGF1ZGlvIG5vZGVzLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGNoYW5nZSB0aGUgdm9sdW1lcy5cbiAgICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnZvbHVtZSA9IHNvdW5kLl92b2x1bWUgKiB2b2w7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGYuX3ZvbHVtZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIG11dGluZyBhbmQgdW5tdXRpbmcgZ2xvYmFsbHkuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgSXMgbXV0ZWQgb3Igbm90LlxuICAgICAqL1xuICAgIG11dGU6IGZ1bmN0aW9uKG11dGVkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGFuIEF1ZGlvQ29udGV4dCBjcmVhdGVkIHlldCwgcnVuIHRoZSBzZXR1cC5cbiAgICAgIGlmICghc2VsZi5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcblxuICAgICAgLy8gV2l0aCBXZWIgQXVkaW8sIHdlIGp1c3QgbmVlZCB0byBtdXRlIHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgc2VsZi5tYXN0ZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc2VsZi5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFuZCBtdXRlIGFsbCBIVE1MNSBBdWRpbyBub2Rlcy5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2hvd2xzW2ldLl9nZXRTb3VuZElkcygpO1xuXG4gICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIG1hcmsgdGhlIGF1ZGlvIG5vZGUgYXMgbXV0ZWQuXG4gICAgICAgICAgZm9yICh2YXIgaj0wOyBqPGlkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5faG93bHNbaV0uX3NvdW5kQnlJZChpZHNbal0pO1xuXG4gICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSAobXV0ZWQpID8gdHJ1ZSA6IHNvdW5kLl9tdXRlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSBhbGwgY3VycmVudGx5IGxvYWRlZCBIb3dsIG9iamVjdHMuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICBmb3IgKHZhciBpPXNlbGYuX2hvd2xzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgc2VsZi5faG93bHNbaV0udW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgdG8gbWFrZSBzdXJlIGl0IGlzIGZ1bGx5IHJlc2V0LlxuICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbyAmJiBzZWxmLmN0eCAmJiB0eXBlb2Ygc2VsZi5jdHguY2xvc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LmNsb3NlKCk7XG4gICAgICAgIHNlbGYuY3R4ID0gbnVsbDtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBjb2RlYyBzdXBwb3J0IG9mIHNwZWNpZmljIGV4dGVuc2lvbi5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGV4dCBBdWRpbyBmaWxlIGV4dGVudGlvbi5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIGNvZGVjczogZnVuY3Rpb24oZXh0KSB7XG4gICAgICByZXR1cm4gKHRoaXMgfHwgSG93bGVyKS5fY29kZWNzW2V4dC5yZXBsYWNlKC9eeC0vLCAnJyldO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXR1cCB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIHN1c3BlbmQvcmVzdW1lIHN0YXRlIG9mIHRoZSBBdWRpb0NvbnRleHQuXG4gICAgICBzZWxmLnN0YXRlID0gc2VsZi5jdHggPyBzZWxmLmN0eC5zdGF0ZSB8fCAncnVubmluZycgOiAncnVubmluZyc7XG5cbiAgICAgIC8vIEF1dG9tYXRpY2FsbHkgYmVnaW4gdGhlIDMwLXNlY29uZCBzdXNwZW5kIHByb2Nlc3NcbiAgICAgIHNlbGYuX2F1dG9TdXNwZW5kKCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIGF1ZGlvIGlzIGF2YWlsYWJsZS5cbiAgICAgIGlmICghc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIE5vIGF1ZGlvIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHN5c3RlbSBpZiBub0F1ZGlvIGlzIHNldCB0byB0cnVlLlxuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2FucGxheXRocm91Z2ggZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0Lm9uY2FucGxheXRocm91Z2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2NhblBsYXlFdmVudCA9ICdjYW5wbGF5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGVzdCB0byBtYWtlIHN1cmUgYXVkaW8gaXNuJ3QgZGlzYWJsZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuXG4gICAgICB0cnkge1xuICAgICAgICB2YXIgdGVzdCA9IG5ldyBBdWRpbygpO1xuICAgICAgICBpZiAodGVzdC5tdXRlZCkge1xuICAgICAgICAgIHNlbGYubm9BdWRpbyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdXBwb3J0ZWQgY29kZWNzLlxuICAgICAgaWYgKCFzZWxmLm5vQXVkaW8pIHtcbiAgICAgICAgc2VsZi5fc2V0dXBDb2RlY3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGZvciBicm93c2VyIHN1cHBvcnQgZm9yIHZhcmlvdXMgY29kZWNzIGFuZCBjYWNoZSB0aGUgcmVzdWx0cy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwQ29kZWNzOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG4gICAgICB2YXIgYXVkaW9UZXN0ID0gbnVsbDtcblxuICAgICAgLy8gTXVzdCB3cmFwIGluIGEgdHJ5L2NhdGNoIGJlY2F1c2UgSUUxMSBpbiBzZXJ2ZXIgbW9kZSB0aHJvd3MgYW4gZXJyb3IuXG4gICAgICB0cnkge1xuICAgICAgICBhdWRpb1Rlc3QgPSAodHlwZW9mIEF1ZGlvICE9PSAndW5kZWZpbmVkJykgPyBuZXcgQXVkaW8oKSA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXVkaW9UZXN0IHx8IHR5cGVvZiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHZhciBtcGVnVGVzdCA9IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXBlZzsnKS5yZXBsYWNlKC9ebm8kLywgJycpO1xuXG4gICAgICAvLyBPcGVyYSB2ZXJzaW9uIDwzMyBoYXMgbWl4ZWQgTVAzIHN1cHBvcnQsIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGFuZCBibG9jayBpdC5cbiAgICAgIHZhciBjaGVja09wZXJhID0gc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09QUlxcLyhbMC02XS4pL2cpO1xuICAgICAgdmFyIGlzT2xkT3BlcmEgPSAoY2hlY2tPcGVyYSAmJiBwYXJzZUludChjaGVja09wZXJhWzBdLnNwbGl0KCcvJylbMV0sIDEwKSA8IDMzKTtcblxuICAgICAgc2VsZi5fY29kZWNzID0ge1xuICAgICAgICBtcDM6ICEhKCFpc09sZE9wZXJhICYmIChtcGVnVGVzdCB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wMzsnKS5yZXBsYWNlKC9ebm8kLywgJycpKSksXG4gICAgICAgIG1wZWc6ICEhbXBlZ1Rlc3QsXG4gICAgICAgIG9wdXM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cIm9wdXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nZzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2E6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2F2OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vd2F2OyBjb2RlY3M9XCIxXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBhYWM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgY2FmOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1jYWY7JykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRhOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRhOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtcDQ6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYmE6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYm06ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93ZWJtOyBjb2RlY3M9XCJ2b3JiaXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGRvbGJ5OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9XCJlYy0zXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBmbGFjOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtZmxhYzsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2ZsYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJylcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNb2JpbGUgYnJvd3NlcnMgd2lsbCBvbmx5IGFsbG93IGF1ZGlvIHRvIGJlIHBsYXllZCBhZnRlciBhIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHVubG9jayBhdWRpbyBvbiB0aGUgZmlyc3QgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBDb25jZXB0IGZyb206IGh0dHA6Ly9wYXVsYmFrYXVzLmNvbS90dXRvcmlhbHMvaHRtbDUvd2ViLWF1ZGlvLW9uLWlvcy9cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX2VuYWJsZU1vYmlsZUF1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIE9ubHkgcnVuIHRoaXMgb24gbW9iaWxlIGRldmljZXMgaWYgYXVkaW8gaXNuJ3QgYWxyZWFkeSBlYW5ibGVkLlxuICAgICAgdmFyIGlzTW9iaWxlID0gL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZHxCbGFja0JlcnJ5fEJCMTB8U2lsa3xNb2JpfENocm9tZS9pLnRlc3Qoc2VsZi5fbmF2aWdhdG9yICYmIHNlbGYuX25hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgaWYgKHNlbGYuX21vYmlsZUVuYWJsZWQgfHwgIXNlbGYuY3R4IHx8ICFpc01vYmlsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX21vYmlsZUVuYWJsZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYubW9iaWxlQXV0b0VuYWJsZSA9IGZhbHNlO1xuXG4gICAgICAvLyBTb21lIG1vYmlsZSBkZXZpY2VzL3BsYXRmb3JtcyBoYXZlIGRpc3RvcnRpb24gaXNzdWVzIHdoZW4gb3BlbmluZy9jbG9zaW5nIHRhYnMgYW5kL29yIHdlYiB2aWV3cy5cbiAgICAgIC8vIEJ1Z3MgaW4gdGhlIGJyb3dzZXIgKGVzcGVjaWFsbHkgTW9iaWxlIFNhZmFyaSkgY2FuIGNhdXNlIHRoZSBzYW1wbGVSYXRlIHRvIGNoYW5nZSBmcm9tIDQ0MTAwIHRvIDQ4MDAwLlxuICAgICAgLy8gQnkgY2FsbGluZyBIb3dsZXIudW5sb2FkKCksIHdlIGNyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgd2l0aCB0aGUgY29ycmVjdCBzYW1wbGVSYXRlLlxuICAgICAgaWYgKCFzZWxmLl9tb2JpbGVVbmxvYWRlZCAmJiBzZWxmLmN0eC5zYW1wbGVSYXRlICE9PSA0NDEwMCkge1xuICAgICAgICBzZWxmLl9tb2JpbGVVbmxvYWRlZCA9IHRydWU7XG4gICAgICAgIHNlbGYudW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNjcmF0Y2ggYnVmZmVyIGZvciBlbmFibGluZyBpT1MgdG8gZGlzcG9zZSBvZiB3ZWIgYXVkaW8gYnVmZmVycyBjb3JyZWN0bHksIGFzIHBlcjpcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjQxMTk2ODRcbiAgICAgIHNlbGYuX3NjcmF0Y2hCdWZmZXIgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXIoMSwgMSwgMjIwNTApO1xuXG4gICAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIG9uIHRvdWNoIHN0YXJ0IHRvIGNyZWF0ZSBhbmQgcGxheSBhIGJ1ZmZlcixcbiAgICAgIC8vIHRoZW4gY2hlY2sgaWYgdGhlIGF1ZGlvIGFjdHVhbGx5IHBsYXllZCB0byBkZXRlcm1pbmUgaWZcbiAgICAgIC8vIGF1ZGlvIGhhcyBub3cgYmVlbiB1bmxvY2tlZCBvbiBpT1MsIEFuZHJvaWQsIGV0Yy5cbiAgICAgIHZhciB1bmxvY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vIEZpeCBBbmRyb2lkIGNhbiBub3QgcGxheSBpbiBzdXNwZW5kIHN0YXRlLlxuICAgICAgICBIb3dsZXIuX2F1dG9SZXN1bWUoKTtcblxuICAgICAgICAvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyLlxuICAgICAgICB2YXIgc291cmNlID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgIHNvdXJjZS5idWZmZXIgPSBzZWxmLl9zY3JhdGNoQnVmZmVyO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChzZWxmLmN0eC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgZW1wdHkgYnVmZmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzb3VyY2Uubm90ZU9uKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGxpbmcgcmVzdW1lKCkgb24gYSBzdGFjayBpbml0aWF0ZWQgYnkgdXNlciBnZXN0dXJlIGlzIHdoYXQgYWN0dWFsbHkgdW5sb2NrcyB0aGUgYXVkaW8gb24gQW5kcm9pZCBDaHJvbWUgPj0gNTUuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgc2VsZi5jdHgucmVzdW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR1cCBhIHRpbWVvdXQgdG8gY2hlY2sgdGhhdCB3ZSBhcmUgdW5sb2NrZWQgb24gdGhlIG5leHQgZXZlbnQgbG9vcC5cbiAgICAgICAgc291cmNlLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzb3VyY2UuZGlzY29ubmVjdCgwKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdW5sb2NrZWQgc3RhdGUgYW5kIHByZXZlbnQgdGhpcyBjaGVjayBmcm9tIGhhcHBlbmluZyBhZ2Fpbi5cbiAgICAgICAgICBzZWxmLl9tb2JpbGVFbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdG91Y2ggc3RhcnQgbGlzdGVuZXIuXG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5sb2NrLCB0cnVlKTtcblxuICAgICAgICAgIC8vIExldCBhbGwgc291bmRzIGtub3cgdGhhdCBhdWRpbyBoYXMgYmVlbiB1bmxvY2tlZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCd1bmxvY2snKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhIHRvdWNoIHN0YXJ0IGxpc3RlbmVyIHRvIGF0dGVtcHQgYW4gdW5sb2NrIGluLlxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHN1c3BlbmQgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgYWZ0ZXIgbm8gc291bmQgaGFzIHBsYXllZCBmb3IgMzAgc2Vjb25kcy5cbiAgICAgKiBUaGlzIHNhdmVzIHByb2Nlc3NpbmcvZW5lcmd5IGFuZCBmaXhlcyB2YXJpb3VzIGJyb3dzZXItc3BlY2lmaWMgYnVncyB3aXRoIGF1ZGlvIGdldHRpbmcgc3R1Y2suXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvU3VzcGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCB8fCAhc2VsZi5jdHggfHwgdHlwZW9mIHNlbGYuY3R4LnN1c3BlbmQgPT09ICd1bmRlZmluZWQnIHx8ICFIb3dsZXIudXNpbmdXZWJBdWRpbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBzb3VuZHMgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxzZWxmLl9ob3dsc1tpXS5fc291bmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl9zb3VuZHNbal0uX3BhdXNlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gc291bmQgaGFzIHBsYXllZCBhZnRlciAzMCBzZWNvbmRzLCBzdXNwZW5kIHRoZSBjb250ZXh0LlxuICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLmF1dG9TdXNwZW5kKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kaW5nJztcbiAgICAgICAgc2VsZi5jdHguc3VzcGVuZCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdzdXNwZW5kZWQnO1xuXG4gICAgICAgICAgaWYgKHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZDtcbiAgICAgICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSwgMzAwMDApO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSByZXN1bWUgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgd2hlbiBhIG5ldyBzb3VuZCBpcyBwbGF5ZWQuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvUmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcpIHtcbiAgICAgICAgc2VsZi5jdHgucmVzdW1lKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0YXRlID0gJ3J1bm5pbmcnO1xuXG4gICAgICAgICAgLy8gRW1pdCB0byBhbGwgSG93bHMgdGhhdCB0aGUgYXVkaW8gaGFzIHJlc3VtZWQuXG4gICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzZWxmLl9ob3dsc1tpXS5fZW1pdCgncmVzdW1lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5fc3VzcGVuZFRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzZWxmLnN0YXRlID09PSAnc3VzcGVuZGluZycpIHtcbiAgICAgICAgc2VsZi5fcmVzdW1lQWZ0ZXJTdXNwZW5kID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNldHVwIHRoZSBnbG9iYWwgYXVkaW8gY29udHJvbGxlci5cbiAgdmFyIEhvd2xlciA9IG5ldyBIb3dsZXJHbG9iYWwoKTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGF1ZGlvIGdyb3VwIGNvbnRyb2xsZXIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvIFBhc3NlZCBpbiBwcm9wZXJ0aWVzIGZvciB0aGlzIGdyb3VwLlxuICAgKi9cbiAgdmFyIEhvd2wgPSBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgbm8gc291cmNlIGlzIHByb3ZpZGVkLlxuICAgIGlmICghby5zcmMgfHwgby5zcmMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBbiBhcnJheSBvZiBzb3VyY2UgZmlsZXMgbXVzdCBiZSBwYXNzZWQgd2l0aCBhbnkgbmV3IEhvd2wuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc2VsZi5pbml0KG8pO1xuICB9O1xuICBIb3dsLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IEhvd2wgZ3JvdXAgb2JqZWN0LlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIUhvd2xlci5jdHgpIHtcbiAgICAgICAgc2V0dXBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2F1dG9wbGF5ID0gby5hdXRvcGxheSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2Zvcm1hdCA9ICh0eXBlb2Ygby5mb3JtYXQgIT09ICdzdHJpbmcnKSA/IG8uZm9ybWF0IDogW28uZm9ybWF0XTtcbiAgICAgIHNlbGYuX2h0bWw1ID0gby5odG1sNSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX211dGVkID0gby5tdXRlIHx8IGZhbHNlO1xuICAgICAgc2VsZi5fbG9vcCA9IG8ubG9vcCB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX3Bvb2wgPSBvLnBvb2wgfHwgNTtcbiAgICAgIHNlbGYuX3ByZWxvYWQgPSAodHlwZW9mIG8ucHJlbG9hZCA9PT0gJ2Jvb2xlYW4nKSA/IG8ucHJlbG9hZCA6IHRydWU7XG4gICAgICBzZWxmLl9yYXRlID0gby5yYXRlIHx8IDE7XG4gICAgICBzZWxmLl9zcHJpdGUgPSBvLnNwcml0ZSB8fCB7fTtcbiAgICAgIHNlbGYuX3NyYyA9ICh0eXBlb2Ygby5zcmMgIT09ICdzdHJpbmcnKSA/IG8uc3JjIDogW28uc3JjXTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IG8udm9sdW1lICE9PSB1bmRlZmluZWQgPyBvLnZvbHVtZSA6IDE7XG4gICAgICBzZWxmLl94aHJXaXRoQ3JlZGVudGlhbHMgPSBvLnhocldpdGhDcmVkZW50aWFscyB8fCBmYWxzZTtcblxuICAgICAgLy8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gMDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZi5fZW5kVGltZXJzID0ge307XG4gICAgICBzZWxmLl9xdWV1ZSA9IFtdO1xuICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25lbmQgPSBvLm9uZW5kID8gW3tmbjogby5vbmVuZH1dIDogW107XG4gICAgICBzZWxmLl9vbmZhZGUgPSBvLm9uZmFkZSA/IFt7Zm46IG8ub25mYWRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZCA9IG8ub25sb2FkID8gW3tmbjogby5vbmxvYWR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkZXJyb3IgPSBvLm9ubG9hZGVycm9yID8gW3tmbjogby5vbmxvYWRlcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXllcnJvciA9IG8ub25wbGF5ZXJyb3IgPyBbe2ZuOiBvLm9ucGxheWVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe2ZuOiBvLm9ucGF1c2V9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe2ZuOiBvLm9ucGxheX1dIDogW107XG4gICAgICBzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7Zm46IG8ub25zdG9wfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tmbjogby5vbm11dGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tmbjogby5vbnZvbHVtZX1dIDogW107XG4gICAgICBzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7Zm46IG8ub25yYXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tmbjogby5vbnNlZWt9XSA6IFtdO1xuICAgICAgc2VsZi5fb251bmxvY2sgPSBvLm9udW5sb2NrID8gW3tmbjogby5vbnVubG9ja31dIDogW107XG4gICAgICBzZWxmLl9vbnJlc3VtZSA9IFtdO1xuXG4gICAgICAvLyBXZWIgQXVkaW8gb3IgSFRNTDUgQXVkaW8/XG4gICAgICBzZWxmLl93ZWJBdWRpbyA9IEhvd2xlci51c2luZ1dlYkF1ZGlvICYmICFzZWxmLl9odG1sNTtcblxuICAgICAgLy8gQXV0b21hdGljYWxseSB0cnkgdG8gZW5hYmxlIGF1ZGlvIG9uIGlPUy5cbiAgICAgIGlmICh0eXBlb2YgSG93bGVyLmN0eCAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eCAmJiBIb3dsZXIubW9iaWxlQXV0b0VuYWJsZSkge1xuICAgICAgICBIb3dsZXIuX2VuYWJsZU1vYmlsZUF1ZGlvKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhpcyBIb3dsIGdyb3VwIGluIHRoZSBnbG9iYWwgY29udHJvbGxlci5cbiAgICAgIEhvd2xlci5faG93bHMucHVzaChzZWxmKTtcblxuICAgICAgLy8gSWYgdGhleSBzZWxlY3RlZCBhdXRvcGxheSwgYWRkIGEgcGxheSBldmVudCB0byB0aGUgbG9hZCBxdWV1ZS5cbiAgICAgIGlmIChzZWxmLl9hdXRvcGxheSkge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VyY2UgZmlsZSB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAgICAgIGlmIChzZWxmLl9wcmVsb2FkKSB7XG4gICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgYXVkaW8gZmlsZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdXJsID0gbnVsbDtcblxuICAgICAgLy8gSWYgbm8gYXVkaW8gaXMgYXZhaWxhYmxlLCBxdWl0IGltbWVkaWF0ZWx5LlxuICAgICAgaWYgKEhvd2xlci5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBhdWRpbyBzdXBwb3J0LicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgc291cmNlIGlzIGluIGFuIGFycmF5LlxuICAgICAgaWYgKHR5cGVvZiBzZWxmLl9zcmMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNlbGYuX3NyYyA9IFtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHNvdXJjZXMgYW5kIHBpY2sgdGhlIGZpcnN0IG9uZSB0aGF0IGlzIGNvbXBhdGlibGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc3JjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBleHQsIHN0cjtcblxuICAgICAgICBpZiAoc2VsZi5fZm9ybWF0ICYmIHNlbGYuX2Zvcm1hdFtpXSkge1xuICAgICAgICAgIC8vIElmIGFuIGV4dGVuc2lvbiB3YXMgc3BlY2lmaWVkLCB1c2UgdGhhdCBpbnN0ZWFkLlxuICAgICAgICAgIGV4dCA9IHNlbGYuX2Zvcm1hdFtpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdXJjZSBpcyBhIHN0cmluZy5cbiAgICAgICAgICBzdHIgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm9uLXN0cmluZyBmb3VuZCBpbiBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzIC0gaWdub3JpbmcuJyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIHRoZSBVUkwgb3IgYmFzZTY0IGRhdGEgVVJJLlxuICAgICAgICAgIGV4dCA9IC9eZGF0YTphdWRpb1xcLyhbXjssXSspOy9pLmV4ZWMoc3RyKTtcbiAgICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgICAgZXh0ID0gL1xcLihbXi5dKykkLy5leGVjKHN0ci5zcGxpdCgnPycsIDEpWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXh0KSB7XG4gICAgICAgICAgICBleHQgPSBleHRbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2cgYSB3YXJuaW5nIGlmIG5vIGV4dGVuc2lvbiB3YXMgZm91bmQuXG4gICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdObyBmaWxlIGV4dGVuc2lvbiB3YXMgZm91bmQuIENvbnNpZGVyIHVzaW5nIHRoZSBcImZvcm1hdFwiIHByb3BlcnR5IG9yIHNwZWNpZnkgYW4gZXh0ZW5zaW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBleHRlbnNpb24gaXMgYXZhaWxhYmxlLlxuICAgICAgICBpZiAoZXh0ICYmIEhvd2xlci5jb2RlY3MoZXh0KSkge1xuICAgICAgICAgIHVybCA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gY29kZWMgc3VwcG9ydCBmb3Igc2VsZWN0ZWQgYXVkaW8gc291cmNlcy4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9zcmMgPSB1cmw7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkaW5nJztcblxuICAgICAgLy8gSWYgdGhlIGhvc3RpbmcgcGFnZSBpcyBIVFRQUyBhbmQgdGhlIHNvdXJjZSBpc24ndCxcbiAgICAgIC8vIGRyb3AgZG93biB0byBIVE1MNSBBdWRpbyB0byBhdm9pZCBNaXhlZCBDb250ZW50IGVycm9ycy5cbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHVybC5zbGljZSgwLCA1KSA9PT0gJ2h0dHA6Jykge1xuICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBzb3VuZCBvYmplY3QgYW5kIGFkZCBpdCB0byB0aGUgcG9vbC5cbiAgICAgIG5ldyBTb3VuZChzZWxmKTtcblxuICAgICAgLy8gTG9hZCBhbmQgZGVjb2RlIHRoZSBhdWRpbyBkYXRhIGZvciBwbGF5YmFjay5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBsb2FkQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGxheSBhIHNvdW5kIG9yIHJlc3VtZSBwcmV2aW91cyBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmcvTnVtYmVyfSBzcHJpdGUgICBTcHJpdGUgbmFtZSBmb3Igc3ByaXRlIHBsYXliYWNrIG9yIHNvdW5kIGlkIHRvIGNvbnRpbnVlIHByZXZpb3VzLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICBTb3VuZCBJRC5cbiAgICAgKi9cbiAgICBwbGF5OiBmdW5jdGlvbihzcHJpdGUsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgaWQgPSBudWxsO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgYSBzcHJpdGUsIHNvdW5kIGlkIG9yIG5vdGhpbmcgd2FzIHBhc3NlZFxuICAgICAgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gc3ByaXRlO1xuICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnc3RyaW5nJyAmJiBzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIC8vIElmIHRoZSBwYXNzZWQgc3ByaXRlIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBVc2UgdGhlIGRlZmF1bHQgc291bmQgc3ByaXRlIChwbGF5cyB0aGUgZnVsbCBhdWRpbyBsZW5ndGgpLlxuICAgICAgICBzcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHNpbmdsZSBwYXVzZWQgc291bmQgdGhhdCBpc24ndCBlbmRlZC5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMsIHBsYXkgdGhhdCBzb3VuZC4gSWYgbm90LCBjb250aW51ZSBhcyB1c3VhbC5cbiAgICAgICAgdmFyIG51bSA9IDA7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoc2VsZi5fc291bmRzW2ldLl9wYXVzZWQgJiYgIXNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAgIG51bSsrO1xuICAgICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbaV0uX2lkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudW0gPT09IDEpIHtcbiAgICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNlbGVjdGVkIG5vZGUsIG9yIGdldCBvbmUgZnJvbSB0aGUgcG9vbC5cbiAgICAgIHZhciBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX2luYWN0aXZlU291bmQoKTtcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICBpZiAoIXNvdW5kKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWxlY3QgdGhlIHNwcml0ZSBkZWZpbml0aW9uLlxuICAgICAgaWYgKGlkICYmICFzcHJpdGUpIHtcbiAgICAgICAgc3ByaXRlID0gc291bmQuX3Nwcml0ZSB8fCAnX19kZWZhdWx0JztcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIHdlIG11c3Qgd2FpdCB0byBnZXQgdGhlIGF1ZGlvJ3MgZHVyYXRpb24uXG4gICAgICAvLyBXZSBhbHNvIG5lZWQgdG8gd2FpdCB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgcnVuIGludG8gcmFjZSBjb25kaXRpb25zIHdpdGhcbiAgICAgIC8vIHRoZSBvcmRlciBvZiBmdW5jdGlvbiBjYWxscy5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgLy8gU2V0IHRoZSBzcHJpdGUgdmFsdWUgb24gdGhpcyBzb3VuZC5cbiAgICAgICAgc291bmQuX3Nwcml0ZSA9IHNwcml0ZTtcblxuICAgICAgICAvLyBNYWtyIHRoaXMgc291bmRlZCBhcyBub3QgZW5kZWQgaW4gY2FzZSBhbm90aGVyIHNvdW5kIGlzIHBsYXllZCBiZWZvcmUgdGhpcyBvbmUgbG9hZHMuXG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgc291bmQgdG8gdGhlIHF1ZXVlIHRvIGJlIHBsYXllZCBvbiBsb2FkLlxuICAgICAgICB2YXIgc291bmRJZCA9IHNvdW5kLl9pZDtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwbGF5JyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wbGF5KHNvdW5kSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNvdW5kSWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IHBsYXkgdGhlIHNvdW5kIGlmIGFuIGlkIHdhcyBwYXNzZWQgYW5kIGl0IGlzIGFscmVhZHkgcGxheWluZy5cbiAgICAgIGlmIChpZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBwbGF5IGV2ZW50LCBpbiBvcmRlciB0byBrZWVwIGl0ZXJhdGluZyB0aHJvdWdoIHF1ZXVlLlxuICAgICAgICBpZiAoIWludGVybmFsKSB7XG4gICAgICAgICAgc2VsZi5fbG9hZFF1ZXVlKCdwbGF5Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIEF1ZGlvQ29udGV4dCBpc24ndCBzdXNwZW5kZWQsIGFuZCByZXN1bWUgaXQgaWYgaXQgaXMuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgSG93bGVyLl9hdXRvUmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBob3cgbG9uZyB0byBwbGF5IGZvciBhbmQgd2hlcmUgdG8gc3RhcnQgcGxheWluZy5cbiAgICAgIHZhciBzZWVrID0gTWF0aC5tYXgoMCwgc291bmQuX3NlZWsgPiAwID8gc291bmQuX3NlZWsgOiBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDApO1xuICAgICAgdmFyIGR1cmF0aW9uID0gTWF0aC5tYXgoMCwgKChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDApIC0gc2Vlayk7XG4gICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIHNvdW5kXG4gICAgICBzb3VuZC5fcGF1c2VkID0gZmFsc2U7XG4gICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcbiAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG4gICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICBzb3VuZC5fc3RhcnQgPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDA7XG4gICAgICBzb3VuZC5fc3RvcCA9IChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDA7XG4gICAgICBzb3VuZC5fbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgLy8gRW5kIHRoZSBzb3VuZCBpbnN0YW50bHkgaWYgc2VlayBpcyBhdCB0aGUgZW5kLlxuICAgICAgaWYgKHNvdW5kLl9zZWVrID49IHNvdW5kLl9zdG9wKSB7XG4gICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBCZWdpbiB0aGUgYWN0dWFsIHBsYXliYWNrLlxuICAgICAgdmFyIG5vZGUgPSBzb3VuZC5fbm9kZTtcbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBXZWIgQXVkaW8gcGxheWJhY2suXG4gICAgICAgIHZhciBwbGF5V2ViQXVkaW8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLl9yZWZyZXNoQnVmZmVyKHNvdW5kKTtcblxuICAgICAgICAgIC8vIFNldHVwIHRoZSBwbGF5YmFjayBwYXJhbXMuXG4gICAgICAgICAgdmFyIHZvbCA9IChzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQpID8gMCA6IHNvdW5kLl92b2x1bWU7XG4gICAgICAgICAgbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG5cbiAgICAgICAgICAvLyBQbGF5IHRoZSBzb3VuZCB1c2luZyB0aGUgc3VwcG9ydGVkIG1ldGhvZC5cbiAgICAgICAgICBpZiAodHlwZW9mIG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc291bmQuX2xvb3AgPyBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCA4NjQwMCkgOiBub2RlLmJ1ZmZlclNvdXJjZS5ub3RlR3JhaW5PbigwLCBzZWVrLCBkdXJhdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uuc3RhcnQoMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IHRpbWVyIGlmIG5vbmUgaXMgcHJlc2VudC5cbiAgICAgICAgICBpZiAodGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKEhvd2xlci5zdGF0ZSA9PT0gJ3J1bm5pbmcnKSB7XG4gICAgICAgICAgcGxheVdlYkF1ZGlvKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5vbmNlKCdyZXN1bWUnLCBwbGF5V2ViQXVkaW8pO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaXJlIHRoaXMgd2hlbiB0aGUgc291bmQgaXMgcmVhZHkgdG8gcGxheSB0byBiZWdpbiBIVE1MNSBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlIdG1sNSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG5vZGUuY3VycmVudFRpbWUgPSBzZWVrO1xuICAgICAgICAgIG5vZGUubXV0ZWQgPSBzb3VuZC5fbXV0ZWQgfHwgc2VsZi5fbXV0ZWQgfHwgSG93bGVyLl9tdXRlZCB8fCBub2RlLm11dGVkO1xuICAgICAgICAgIG5vZGUudm9sdW1lID0gc291bmQuX3ZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcbiAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgLy8gTW9iaWxlIGJyb3dzZXJzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhpcyBpcyBjYWxsZWQgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcGxheSA9IG5vZGUucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0IG9sZGVyIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBwcm9taXNlcywgYW5kIHRodXMgZG9uJ3QgaGF2ZSB0aGlzIGlzc3VlLlxuICAgICAgICAgICAgaWYgKHBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIChwbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgcGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAvLyBJbXBsZW1lbnRzIGEgbG9jayB0byBwcmV2ZW50IERPTUV4Y2VwdGlvbjogVGhlIHBsYXkoKSByZXF1ZXN0IHdhcyBpbnRlcnJ1cHRlZCBieSBhIGNhbGwgdG8gcGF1c2UoKS5cbiAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIC8vIFJlbGVhc2VzIHRoZSBsb2NrIGFuZCBleGVjdXRlcyBxdWV1ZWQgYWN0aW9ucy5cbiAgICAgICAgICAgICAgcGxheVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9wbGF5TG9jayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICAgICAnb24gbW9iaWxlIGRldmljZXMgYW5kIENocm9tZSB3aGVyZSBwbGF5YmFjayB3YXMgbm90IHdpdGhpbiBhIHVzZXIgaW50ZXJhY3Rpb24uJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5Jywgc291bmQuX2lkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0dGluZyByYXRlIGJlZm9yZSBwbGF5aW5nIHdvbid0IHdvcmsgaW4gSUUsIHNvIHdlIHNldCBpdCBhZ2FpbiBoZXJlLlxuICAgICAgICAgICAgbm9kZS5wbGF5YmFja1JhdGUgPSBzb3VuZC5fcmF0ZTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgaXMgc3RpbGwgcGF1c2VkLCB0aGVuIHdlIGNhbiBhc3N1bWUgdGhlcmUgd2FzIGEgcGxheWJhY2sgaXNzdWUuXG4gICAgICAgICAgICBpZiAobm9kZS5wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCAnUGxheWJhY2sgd2FzIHVuYWJsZSB0byBzdGFydC4gVGhpcyBpcyBtb3N0IGNvbW1vbmx5IGFuIGlzc3VlICcgK1xuICAgICAgICAgICAgICAgICdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR1cCB0aGUgZW5kIHRpbWVyIG9uIHNwcml0ZXMgb3IgbGlzdGVuIGZvciB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICAgICAgICBpZiAoc3ByaXRlICE9PSAnX19kZWZhdWx0JyB8fCBzb3VuZC5fbG9vcCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJlIGVuZGVkIG9uIHRoaXMgYXVkaW8gbm9kZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9lbmRlZChzb3VuZCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXllcnJvcicsIHNvdW5kLl9pZCwgZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUGxheSBpbW1lZGlhdGVseSBpZiByZWFkeSwgb3Igd2FpdCBmb3IgdGhlICdjYW5wbGF5dGhyb3VnaCdlIHZlbnQuXG4gICAgICAgIHZhciBsb2FkZWROb1JlYWR5U3RhdGUgPSAod2luZG93ICYmIHdpbmRvdy5lamVjdGEpIHx8ICghbm9kZS5yZWFkeVN0YXRlICYmIEhvd2xlci5fbmF2aWdhdG9yLmlzQ29jb29uSlMpO1xuICAgICAgICBpZiAobm9kZS5yZWFkeVN0YXRlID49IDMgfHwgbG9hZGVkTm9SZWFkeVN0YXRlKSB7XG4gICAgICAgICAgcGxheUh0bWw1KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBCZWdpbiBwbGF5YmFjay5cbiAgICAgICAgICAgIHBsYXlIdG1sNSgpO1xuXG4gICAgICAgICAgICAvLyBDbGVhciB0aGlzIGxpc3RlbmVyLlxuICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBsaXN0ZW5lciwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIHRoZSBlbmQgdGltZXIuXG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHBsYXliYWNrIGFuZCBzYXZlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHBhdXNlIGFsbCBpbiBncm91cCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQgb3IgYSBwbGF5KCkgcHJvbWlzZSBpcyBwZW5kaW5nLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gcGF1c2Ugd2hlbiBjYXBhYmxlLlxuICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BhdXNlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5wYXVzZShpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgcGF1c2VkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzZWxmLnNlZWsoaWRzW2ldKTtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VuZCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uubm90ZU9mZigwKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihzb3VuZC5fbm9kZS5kdXJhdGlvbikgfHwgc291bmQuX25vZGUuZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBhdXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmlyZSB0aGUgcGF1c2UgZXZlbnQsIHVubGVzcyBgdHJ1ZWAgaXMgcGFzc2VkIGFzIHRoZSAybmQgYXJndW1lbnQuXG4gICAgICAgIGlmICghYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgc2VsZi5fZW1pdCgncGF1c2UnLCBzb3VuZCA/IHNvdW5kLl9pZCA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdG9wIHBsYXliYWNrIGFuZCByZXNldCB0byBzdGFydC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIFRoZSBzb3VuZCBJRCAoZW1wdHkgdG8gc3RvcCBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbihpZCwgaW50ZXJuYWwpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzdG9wIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzdG9wJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zdG9wKGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBzdG9wcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcblxuICAgICAgZm9yICh2YXIgaT0wOyBpPGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBDbGVhciB0aGUgZW5kIHRpbWVyLlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkc1tpXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgLy8gUmVzZXQgdGhlIHNlZWsgcG9zaXRpb24uXG4gICAgICAgICAgc291bmQuX3NlZWsgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSAwO1xuICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBTdG9wIGN1cnJlbnRseSBydW5uaW5nIGZhZGVzLlxuICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdW5kJ3MgQXVkaW9CdWZmZXJTb3VyY2VOb2RlIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICAgICAgICAgIGlmIChzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5zdG9wKDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBidWZmZXIgc291cmNlLlxuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFuQnVmZmVyKHNvdW5kLl9ub2RlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0b3AnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0ZS91bm11dGUgYSBzaW5nbGUgc291bmQgb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gbXV0ZWQgU2V0IHRvIHRydWUgdG8gbXV0ZSBhbmQgZmFsc2UgdG8gdW5tdXRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgVGhlIHNvdW5kIElEIHRvIHVwZGF0ZSAob21pdCB0byBtdXRlL3VubXV0ZSBhbGwpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgbXV0ZTogZnVuY3Rpb24obXV0ZWQsIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gbXV0ZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdtdXRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5tdXRlKG11dGVkLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYXBwbHlpbmcgbXV0ZS91bm11dGUgdG8gYWxsIHNvdW5kcywgdXBkYXRlIHRoZSBncm91cCdzIHZhbHVlLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtdXRlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgc2VsZi5fbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fbXV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbXV0ZWQuXG4gICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIHNvdW5kLl9tdXRlZCA9IG11dGVkO1xuXG4gICAgICAgICAgLy8gQ2FuY2VsIGFjdGl2ZSBmYWRlIGFuZCBzZXQgdGhlIHZvbHVtZSB0byB0aGUgZW5kIHZhbHVlLlxuICAgICAgICAgIGlmIChzb3VuZC5faW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNvdW5kLl92b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gSG93bGVyLl9tdXRlZCA/IHRydWUgOiBtdXRlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdtdXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgdm9sdW1lIG9mIHRoaXMgc291bmQgb3Igb2YgdGhlIEhvd2wgZ3JvdXAuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHZvbHVtZSgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3Mgdm9sdW1lIHZhbHVlLlxuICAgICAqICAgdm9sdW1lKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqICAgdm9sdW1lKHZvbCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgdm9sdW1lKHZvbCwgaWQpIC0+IFNldHMgdGhlIHZvbHVtZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgdm9sLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGdyb3Vwcycgdm9sdW1lLlxuICAgICAgICByZXR1cm4gc2VsZi5fdm9sdW1lO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSB8fCBhcmdzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHZvbHVtZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPj0gMikge1xuICAgICAgICB2b2wgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZvbHVtZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSB2b2x1bWUgd2hlbiBjYXBhYmxlLlxuICAgICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAndm9sdW1lJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYudm9sdW1lLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3VwIHZvbHVtZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb25lIG9yIGFsbCB2b2x1bWVzLlxuICAgICAgICBpZCA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGlkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZFtpXSk7XG5cbiAgICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgICBpZiAoIWFyZ3NbMl0pIHtcbiAgICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUudm9sdW1lID0gdm9sICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCd2b2x1bWUnLCBzb3VuZC5faWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9zb3VuZHNbMF07XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl92b2x1bWUgOiAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRmFkZSBhIGN1cnJlbnRseSBwbGF5aW5nIHNvdW5kIGJldHdlZW4gdHdvIHZvbHVtZXMgKGlmIG5vIGlkIGlzIHBhc3NzZWQsIGFsbCBzb3VuZHMgd2lsbCBmYWRlKS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCAob21pdCB0byBmYWRlIGFsbCBzb3VuZHMpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgZmFkZTogZnVuY3Rpb24oZnJvbSwgdG8sIGxlbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBmYWRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdmYWRlJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5mYWRlKGZyb20sIHRvLCBsZW4sIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGhlIHZvbHVtZSB0byB0aGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICBzZWxmLnZvbHVtZShmcm9tLCBpZCk7XG5cbiAgICAgIC8vIEZhZGUgdGhlIHZvbHVtZSBvZiBvbmUgb3IgYWxsIHNvdW5kcy5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGxpbmVhciBmYWRlIG9yIGZhbGwgYmFjayB0byB0aW1lb3V0cyB3aXRoIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwcmV2aW91cyBmYWRlIGlmIG5vIHNwcml0ZSBpcyBiZWluZyB1c2VkIChvdGhlcndpc2UsIHZvbHVtZSBoYW5kbGVzIHRoaXMpLlxuICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbywgbGV0IHRoZSBuYXRpdmUgbWV0aG9kcyBkbyB0aGUgYWN0dWFsIGZhZGUuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG4gICAgICAgICAgICB2YXIgZW5kID0gY3VycmVudFRpbWUgKyAobGVuIC8gMTAwMCk7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gZnJvbTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoZnJvbSwgY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0bywgZW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9zdGFydEZhZGVJbnRlcnZhbChzb3VuZCwgZnJvbSwgdG8sIGxlbiwgaWRzW2ldLCB0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBpbnRlcm5hbCBpbnRlcnZhbCB0byBmYWRlIGEgc291bmQuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzb3VuZCBSZWZlcmVuY2UgdG8gc291bmQgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGlzR3JvdXAgICBJZiB0cnVlLCBzZXQgdGhlIHZvbHVtZSBvbiB0aGUgZ3JvdXAuXG4gICAgICovXG4gICAgX3N0YXJ0RmFkZUludGVydmFsOiBmdW5jdGlvbihzb3VuZCwgZnJvbSwgdG8sIGxlbiwgaWQsIGlzR3JvdXApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB2b2wgPSBmcm9tO1xuICAgICAgdmFyIGRpZmYgPSB0byAtIGZyb207XG4gICAgICB2YXIgc3RlcHMgPSBNYXRoLmFicyhkaWZmIC8gMC4wMSk7XG4gICAgICB2YXIgc3RlcExlbiA9IE1hdGgubWF4KDQsIChzdGVwcyA+IDApID8gbGVuIC8gc3RlcHMgOiBsZW4pO1xuICAgICAgdmFyIGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gU3RvcmUgdGhlIHZhbHVlIGJlaW5nIGZhZGVkIHRvLlxuICAgICAgc291bmQuX2ZhZGVUbyA9IHRvO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSB2YWx1ZSBvbiBlYWNoIGludGVydmFsIHRpY2suXG4gICAgICBzb3VuZC5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgYmFzZWQgb24gdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgdGljay5cbiAgICAgICAgdmFyIHRpY2sgPSAoRGF0ZS5ub3coKSAtIGxhc3RUaWNrKSAvIGxlbjtcbiAgICAgICAgbGFzdFRpY2sgPSBEYXRlLm5vdygpO1xuICAgICAgICB2b2wgKz0gZGlmZiAqIHRpY2s7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB2b2x1bWUgaXMgaW4gdGhlIHJpZ2h0IGJvdW5kcy5cbiAgICAgICAgdm9sID0gTWF0aC5tYXgoMCwgdm9sKTtcbiAgICAgICAgdm9sID0gTWF0aC5taW4oMSwgdm9sKTtcblxuICAgICAgICAvLyBSb3VuZCB0byB3aXRoaW4gMiBkZWNpbWFsIHBvaW50cy5cbiAgICAgICAgdm9sID0gTWF0aC5yb3VuZCh2b2wgKiAxMDApIC8gMTAwO1xuXG4gICAgICAgIC8vIENoYW5nZSB0aGUgdm9sdW1lLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYudm9sdW1lKHZvbCwgc291bmQuX2lkLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAncyB2b2x1bWUuXG4gICAgICAgIGlmIChpc0dyb3VwKSB7XG4gICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB0aGUgZmFkZSBpcyBjb21wbGV0ZSwgc3RvcCBpdCBhbmQgZmlyZSBldmVudC5cbiAgICAgICAgaWYgKCh0byA8IGZyb20gJiYgdm9sIDw9IHRvKSB8fCAodG8gPiBmcm9tICYmIHZvbCA+PSB0bykpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICBzb3VuZC5fZmFkZVRvID0gbnVsbDtcbiAgICAgICAgICBzZWxmLnZvbHVtZSh0bywgc291bmQuX2lkKTtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSwgc3RlcExlbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IHN0b3BzIHRoZSBjdXJyZW50bHkgcGxheWluZyBmYWRlIHdoZW5cbiAgICAgKiBhIG5ldyBmYWRlIHN0YXJ0cywgdm9sdW1lIGlzIGNoYW5nZWQgb3IgdGhlIHNvdW5kIGlzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfc3RvcEZhZGU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQgJiYgc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICBzZWxmLnZvbHVtZShzb3VuZC5fZmFkZVRvLCBpZCk7XG4gICAgICAgIHNvdW5kLl9mYWRlVG8gPSBudWxsO1xuICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgaWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgbG9vcCBwYXJhbWV0ZXIgb24gYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgbG9vcCgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AobG9vcCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBmb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICBsb29wKGxvb3AsIGlkKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL0Jvb2xlYW59IFJldHVybnMgc2VsZiBvciBjdXJyZW50IGxvb3AgdmFsdWUuXG4gICAgICovXG4gICAgbG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBsb29wLCBpZCwgc291bmQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGZvciBsb29wIGFuZCBpZC5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGdyb3UncyBsb29wIHZhbHVlLlxuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgICBzZWxmLl9sb29wID0gbG9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIGxvb3AgdmFsdWUuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fbG9vcCA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbG9vcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbG9vcCA9IGxvb3A7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBsb29wO1xuICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgcGxheWJhY2sgcmF0ZSBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICByYXRlKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgcGxheWJhY2sgcmF0ZS5cbiAgICAgKiAgIHJhdGUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShyYXRlKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAqICAgcmF0ZShyYXRlLCBpZCkgLT4gU2V0cyB0aGUgcGxheWJhY2sgcmF0ZSBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqL1xuICAgIHJhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgcmF0ZSwgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcmF0ZSBvZiB0aGUgZmlyc3Qgbm9kZS5cbiAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgcmF0ZSB2YWx1ZS5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBwbGF5YmFjayByYXRlIG9yIHJldHVybiB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgIHZhciBzb3VuZDtcbiAgICAgIGlmICh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcGxheWJhY2sgcmF0ZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiAncmF0ZScsXG4gICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBzZWxmLnJhdGUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgcmF0ZS5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzZWxmLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBvdXIgcG9zaXRpb24gd2hlbiB0aGUgcmF0ZSBjaGFuZ2VkIGFuZCB1cGRhdGUgdGhlIHBsYXliYWNrXG4gICAgICAgICAgICAvLyBzdGFydCBwb3NpdGlvbiBzbyB3ZSBjYW4gcHJvcGVybHkgYWRqdXN0IHRoZSBzZWVrIHBvc2l0aW9uIGZvciB0aW1lIGVsYXBzZWQuXG4gICAgICAgICAgICBzb3VuZC5fcmF0ZVNlZWsgPSBzZWxmLnNlZWsoaWRbaV0pO1xuICAgICAgICAgICAgc291bmQuX3BsYXlTdGFydCA9IHNlbGYuX3dlYkF1ZGlvID8gSG93bGVyLmN0eC5jdXJyZW50VGltZSA6IHNvdW5kLl9wbGF5U3RhcnQ7XG4gICAgICAgICAgICBzb3VuZC5fcmF0ZSA9IHJhdGU7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgcGxheWJhY2sgcmF0ZS5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZShyYXRlLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGxheWJhY2tSYXRlID0gcmF0ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVycy5cbiAgICAgICAgICAgIHZhciBzZWVrID0gc2VsZi5zZWVrKGlkW2ldKTtcbiAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9ICgoc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdKSAvIDEwMDApIC0gc2VlaztcbiAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG5cbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgbmV3IGVuZCB0aW1lciBpZiBzb3VuZCBpcyBhbHJlYWR5IHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAoc2VsZi5fZW5kVGltZXJzW2lkW2ldXSB8fCAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkW2ldKTtcbiAgICAgICAgICAgICAgc2VsZi5fZW5kVGltZXJzW2lkW2ldXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdyYXRlJywgc291bmQuX2lkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3JhdGUgOiBzZWxmLl9yYXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgc2VlayBwb3NpdGlvbiBvZiBhIHNvdW5kLiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxseSB0YWtlIDAsIDEgb3IgMiBhcmd1bWVudHMuXG4gICAgICogICBzZWVrKCkgLT4gUmV0dXJucyB0aGUgZmlyc3Qgc291bmQgbm9kZSdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqICAgc2VlayhzZWVrKSAtPiBTZXRzIHRoZSBzZWVrIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBzb3VuZCBub2RlLlxuICAgICAqICAgc2VlayhzZWVrLCBpZCkgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bC9OdW1iZXJ9IFJldHVybnMgc2VsZiBvciB0aGUgY3VycmVudCBzZWVrIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHNlZWs6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgc2VlaywgaWQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSB3aWxsIHNpbXBseSByZXR1cm4gdGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG5vZGUuXG4gICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhpcyBpcyBhbiBJRCwgYW5kIGlmIG5vdCwgYXNzdW1lIGl0IGlzIGEgbmV3IHNlZWsgcG9zaXRpb24uXG4gICAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcygpO1xuICAgICAgICB2YXIgaW5kZXggPSBpZHMuaW5kZXhPZihhcmdzWzBdKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMF0sIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLl9zb3VuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbMF0uX2lkO1xuICAgICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHNlZWsgPSBwYXJzZUZsb2F0KGFyZ3NbMF0pO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gSUQsIGJhaWwgb3V0LlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc2VlayB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc2VlaycsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc2Vlay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgc2VlayA+PSAwKSB7XG4gICAgICAgICAgLy8gUGF1c2UgdGhlIHNvdW5kIGFuZCB1cGRhdGUgcG9zaXRpb24gZm9yIHJlc3RhcnRpbmcgcGxheWJhY2suXG4gICAgICAgICAgdmFyIHBsYXlpbmcgPSBzZWxmLnBsYXlpbmcoaWQpO1xuICAgICAgICAgIGlmIChwbGF5aW5nKSB7XG4gICAgICAgICAgICBzZWxmLnBhdXNlKGlkLCB0cnVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdHJhY2sgYW5kIGNhbmNlbCB0aW1lci5cbiAgICAgICAgICBzb3VuZC5fc2VlayA9IHNlZWs7XG4gICAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIHNlZWsgcG9zaXRpb24gZm9yIEhUTUw1IEF1ZGlvLlxuICAgICAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lID0gc2VlaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTZWVrIGFuZCBlbWl0IHdoZW4gcmVhZHkuXG4gICAgICAgICAgdmFyIHNlZWtBbmRFbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdzZWVrJywgaWQpO1xuXG4gICAgICAgICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBpZiB0aGUgc291bmQgd2FzIHBsYXlpbmcuXG4gICAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgICBzZWxmLnBsYXkoaWQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgcGxheSBsb2NrIHRvIGJlIHVuc2V0IGJlZm9yZSBlbWl0dGluZyAoSFRNTDUgQXVkaW8pLlxuICAgICAgICAgIGlmIChwbGF5aW5nICYmICFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIGVtaXRTZWVrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICghc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgICAgICAgICBzZWVrQW5kRW1pdCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZW1pdFNlZWssIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgc2V0VGltZW91dChlbWl0U2VlaywgMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlZWtBbmRFbWl0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgdmFyIHJlYWxUaW1lID0gc2VsZi5wbGF5aW5nKGlkKSA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgLSBzb3VuZC5fcGxheVN0YXJ0IDogMDtcbiAgICAgICAgICAgIHZhciByYXRlU2VlayA9IHNvdW5kLl9yYXRlU2VlayA/IHNvdW5kLl9yYXRlU2VlayAtIHNvdW5kLl9zZWVrIDogMDtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fc2VlayArIChyYXRlU2VlayArIHJlYWxUaW1lICogTWF0aC5hYnMoc291bmQuX3JhdGUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBzcGVjaWZpYyBzb3VuZCBpcyBjdXJyZW50bHkgcGxheWluZyBvciBub3QgKGlmIGlkIGlzIHByb3ZpZGVkKSwgb3IgY2hlY2sgaWYgYXQgbGVhc3Qgb25lIG9mIHRoZSBzb3VuZHMgaW4gdGhlIGdyb3VwIGlzIHBsYXlpbmcgb3Igbm90LlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gIGlkIFRoZSBzb3VuZCBpZCB0byBjaGVjay4gSWYgbm9uZSBpcyBwYXNzZWQsIHRoZSB3aG9sZSBzb3VuZCBncm91cCBpcyBjaGVja2VkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgcGxheWluZyBhbmQgZmFsc2UgaWYgbm90LlxuICAgICAqL1xuICAgIHBsYXlpbmc6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIENoZWNrIHRoZSBwYXNzZWQgc291bmQgSUQgKGlmIGFueSkuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAnbnVtYmVyJykge1xuICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICByZXR1cm4gc291bmQgPyAhc291bmQuX3BhdXNlZCA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlcndpc2UsIGxvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGVjayBpZiBhbnkgYXJlIHBsYXlpbmcuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghc2VsZi5fc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZHVyYXRpb24gb2YgdGhpcyBzb3VuZC4gUGFzc2luZyBhIHNvdW5kIGlkIHdpbGwgcmV0dXJuIHRoZSBzcHJpdGUgZHVyYXRpb24uXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCByZXR1cm4gZnVsbCBzb3VyY2UgZHVyYXRpb24uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBBdWRpbyBkdXJhdGlvbiBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGR1cmF0aW9uOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGR1cmF0aW9uID0gc2VsZi5fZHVyYXRpb247XG5cbiAgICAgIC8vIElmIHdlIHBhc3MgYW4gSUQsIGdldCB0aGUgc291bmQgYW5kIHJldHVybiB0aGUgc3ByaXRlIGxlbmd0aC5cbiAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgZHVyYXRpb24gPSBzZWxmLl9zcHJpdGVbc291bmQuX3Nwcml0ZV1bMV0gLyAxMDAwO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZHVyYXRpb247XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbG9hZGVkIHN0YXRlIG9mIHRoaXMgSG93bC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICd1bmxvYWRlZCcsICdsb2FkaW5nJywgJ2xvYWRlZCdcbiAgICAgKi9cbiAgICBzdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubG9hZCBhbmQgZGVzdHJveSB0aGUgY3VycmVudCBIb3dsIG9iamVjdC5cbiAgICAgKiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgc3RvcCBhbGwgc291bmQgaW5zdGFuY2VzIGF0dGFjaGVkIHRvIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgdW5sb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU3RvcCBwbGF5aW5nIGFueSBhY3RpdmUgc291bmRzLlxuICAgICAgdmFyIHNvdW5kcyA9IHNlbGYuX3NvdW5kcztcbiAgICAgIGZvciAodmFyIGk9MDsgaTxzb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gU3RvcCB0aGUgc291bmQgaWYgaXQgaXMgY3VycmVudGx5IHBsYXlpbmcuXG4gICAgICAgIGlmICghc291bmRzW2ldLl9wYXVzZWQpIHtcbiAgICAgICAgICBzZWxmLnN0b3Aoc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNvdXJjZSBvciBkaXNjb25uZWN0LlxuICAgICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBzb3VyY2UgdG8gMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cbiAgICAgICAgICB2YXIgY2hlY2tJRSA9IC9NU0lFIHxUcmlkZW50XFwvLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgICAgaWYgKCFjaGVja0lFKSB7XG4gICAgICAgICAgICBzb3VuZHNbaV0uX25vZGUuc3JjID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlnQUFBQlhRVlpGWm0xMElCSUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFBQUJrWVhSaEFnQUFBQUVBJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSZW1vdmUgYW55IGV2ZW50IGxpc3RlbmVycy5cbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzb3VuZHNbaV0uX2Vycm9yRm4sIGZhbHNlKTtcbiAgICAgICAgICBzb3VuZHNbaV0uX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc291bmRzW2ldLl9sb2FkRm4sIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEVtcHR5IG91dCBhbGwgb2YgdGhlIG5vZGVzLlxuICAgICAgICBkZWxldGUgc291bmRzW2ldLl9ub2RlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdGltZXJzIGFyZSBjbGVhcmVkIG91dC5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihzb3VuZHNbaV0uX2lkKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIHRoZSByZWZlcmVuY2VzIGluIHRoZSBnbG9iYWwgSG93bGVyIG9iamVjdC5cbiAgICAgIHZhciBpbmRleCA9IEhvd2xlci5faG93bHMuaW5kZXhPZihzZWxmKTtcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIEhvd2xlci5faG93bHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlIHRoaXMgc291bmQgZnJvbSB0aGUgY2FjaGUgKGlmIG5vIG90aGVyIEhvd2wgaXMgdXNpbmcgaXQpLlxuICAgICAgdmFyIHJlbUNhY2hlID0gdHJ1ZTtcbiAgICAgIGZvciAoaT0wOyBpPEhvd2xlci5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKEhvd2xlci5faG93bHNbaV0uX3NyYyA9PT0gc2VsZi5fc3JjKSB7XG4gICAgICAgICAgcmVtQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FjaGUgJiYgcmVtQ2FjaGUpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGdsb2JhbCBlcnJvcnMuXG4gICAgICBIb3dsZXIubm9BdWRpbyA9IGZhbHNlO1xuXG4gICAgICAvLyBDbGVhciBvdXQgYHNlbGZgLlxuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmID0gbnVsbDtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIG9uY2UgIChJTlRFUk5BTCkgTWFya3MgZXZlbnQgdG8gZmlyZSBvbmx5IG9uY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCwgb25jZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnRzLnB1c2gob25jZSA/IHtpZDogaWQsIGZuOiBmbiwgb25jZTogb25jZX0gOiB7aWQ6IGlkLCBmbjogZm59KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGN1c3RvbSBldmVudC4gQ2FsbCB3aXRob3V0IHBhcmFtZXRlcnMgdG8gcmVtb3ZlIGFsbCBldmVudHMuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIHJlbW92ZS4gTGVhdmUgZW1wdHkgdG8gcmVtb3ZlIGFsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IHJlbW92ZSBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAvLyBBbGxvdyBwYXNzaW5nIGp1c3QgYW4gZXZlbnQgYW5kIElELlxuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBmbjtcbiAgICAgICAgZm4gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm4gfHwgaWQpIHtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCByZW1vdmUgdGhlIHBhc3NlZCBmdW5jdGlvbi5cbiAgICAgICAgZm9yIChpPTA7IGk8ZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGlzSWQgPSAoaWQgPT09IGV2ZW50c1tpXS5pZCk7XG4gICAgICAgICAgaWYgKGZuID09PSBldmVudHNbaV0uZm4gJiYgaXNJZCB8fCAhZm4gJiYgaXNJZCkge1xuICAgICAgICAgICAgZXZlbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudCkge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiB0aGlzIHR5cGUuXG4gICAgICAgIHNlbGZbJ19vbicgKyBldmVudF0gPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIGV2ZXJ5IHR5cGUuXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZik7XG4gICAgICAgIGZvciAoaT0wOyBpPGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoKGtleXNbaV0uaW5kZXhPZignX29uJykgPT09IDApICYmIEFycmF5LmlzQXJyYXkoc2VsZltrZXlzW2ldXSkpIHtcbiAgICAgICAgICAgIHNlbGZba2V5c1tpXV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudCBhbmQgcmVtb3ZlIGl0IG9uY2UgZmlyZWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb25jZTogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLm9uKGV2ZW50LCBmbiwgaWQsIDEpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRW1pdCBhbGwgZXZlbnRzIG9mIGEgc3BlY2lmaWMgdHlwZSBhbmQgcGFzcyB0aGUgc291bmQgaWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgU291bmQgSUQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBtc2cgICBNZXNzYWdlIHRvIGdvIHdpdGggZXZlbnQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW1pdDogZnVuY3Rpb24oZXZlbnQsIGlkLCBtc2cpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIGZpcmUgYWxsIGZ1bmN0aW9ucy5cbiAgICAgIGZvciAodmFyIGk9ZXZlbnRzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgLy8gT25seSBmaXJlIHRoZSBsaXN0ZW5lciBpZiB0aGUgY29ycmVjdCBJRCBpcyB1c2VkLlxuICAgICAgICBpZiAoIWV2ZW50c1tpXS5pZCB8fCBldmVudHNbaV0uaWQgPT09IGlkIHx8IGV2ZW50ID09PSAnbG9hZCcpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGlkLCBtc2cpO1xuICAgICAgICAgIH0uYmluZChzZWxmLCBldmVudHNbaV0uZm4pLCAwKTtcblxuICAgICAgICAgIC8vIElmIHRoaXMgZXZlbnQgd2FzIHNldHVwIHdpdGggYG9uY2VgLCByZW1vdmUgaXQuXG4gICAgICAgICAgaWYgKGV2ZW50c1tpXS5vbmNlKSB7XG4gICAgICAgICAgICBzZWxmLm9mZihldmVudCwgZXZlbnRzW2ldLmZuLCBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQYXNzIHRoZSBldmVudCB0eXBlIGludG8gbG9hZCBxdWV1ZSBzbyB0aGF0IGl0IGNhbiBjb250aW51ZSBzdGVwcGluZy5cbiAgICAgIHNlbGYuX2xvYWRRdWV1ZShldmVudCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBvZiBhY3Rpb25zIGluaXRpYXRlZCBiZWZvcmUgdGhlIHNvdW5kIGhhcyBsb2FkZWQuXG4gICAgICogVGhlc2Ugd2lsbCBiZSBjYWxsZWQgaW4gc2VxdWVuY2UsIHdpdGggdGhlIG5leHQgb25seSBmaXJpbmdcbiAgICAgKiBhZnRlciB0aGUgcHJldmlvdXMgaGFzIGZpbmlzaGVkIGV4ZWN1dGluZyAoZXZlbiBpZiBhc3luYyBsaWtlIHBsYXkpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2xvYWRRdWV1ZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHRhc2sgPSBzZWxmLl9xdWV1ZVswXTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhpcyB0YXNrIGlmIGEgbWF0Y2hpbmcgZXZlbnQgd2FzIHBhc3NlZC5cbiAgICAgICAgaWYgKHRhc2suZXZlbnQgPT09IGV2ZW50KSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgdGFzayBpZiBubyBldmVudCB0eXBlIGlzIHBhc3NlZC5cbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIHRhc2suYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gcGxheWJhY2sgZW5kcyBhdCB0aGUgZW5kIG9mIHRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW5kZWQ6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc3ByaXRlID0gc291bmQuX3Nwcml0ZTtcblxuICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIElFIGFuZCB0aGVyZSB3YXMgbmV0d29yayBsYXRlbmN5IHdlIG1heSBiZSBjbGlwcGluZ1xuICAgICAgLy8gYXVkaW8gYmVmb3JlIGl0IGNvbXBsZXRlcyBwbGF5aW5nLiBMZXRzIGNoZWNrIHRoZSBub2RlIHRvIG1ha2Ugc3VyZSBpdFxuICAgICAgLy8gYmVsaWV2ZXMgaXQgaGFzIGNvbXBsZXRlZCwgYmVmb3JlIGVuZGluZyB0aGUgcGxheWJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5wYXVzZWQgJiYgIXNvdW5kLl9ub2RlLmVuZGVkICYmIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lIDwgc291bmQuX3N0b3ApIHtcbiAgICAgICAgc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgMTAwKTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3VsZCB0aGlzIHNvdW5kIGxvb3A/XG4gICAgICB2YXIgbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgLy8gRmlyZSB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICBzZWxmLl9lbWl0KCdlbmQnLCBzb3VuZC5faWQpO1xuXG4gICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBmb3IgSFRNTDUgQXVkaW8gbG9vcC5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhpcyB0aW1lciBpZiBvbiBhIFdlYiBBdWRpbyBsb29wLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgIHZhciB0aW1lb3V0ID0gKChzb3VuZC5fc3RvcCAtIHNvdW5kLl9zdGFydCkgKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayB0aGUgbm9kZSBhcyBwYXVzZWQuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcblxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gYXV0by1zdXNwZW5kIEF1ZGlvQ29udGV4dCBpZiBubyBzb3VuZHMgYXJlIHN0aWxsIHBsYXlpbmcuXG4gICAgICAgIEhvd2xlci5fYXV0b1N1c3BlbmQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2hlbiB1c2luZyBhIHNwcml0ZSwgZW5kIHRoZSB0cmFjay5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciB0aGUgZW5kIHRpbWVyIGZvciBhIHNvdW5kIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElELlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFyVGltZXI6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRdKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0IG9yIHJlbW92ZSB0aGUgZW5kZWQgbGlzdGVuZXIuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5fZW5kVGltZXJzW2lkXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9lbmRUaW1lcnNbaWRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbaWRdLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHNlbGYuX2VuZFRpbWVyc1tpZF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHNvdW5kIGlkZW50aWZpZWQgYnkgdGhpcyBJRCwgb3IgcmV0dXJuIG51bGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBTb3VuZCBJRFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgU291bmQgb2JqZWN0IG9yIG51bGwuXG4gICAgICovXG4gICAgX3NvdW5kQnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGZpbmQgdGhlIG9uZSB3aXRoIHRoaXMgSUQuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpZCA9PT0gc2VsZi5fc291bmRzW2ldLl9pZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbmFjdGl2ZSBzb3VuZCBmcm9tIHRoZSBwb29sIG9yIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICogQHJldHVybiB7U291bmR9IFNvdW5kIHBsYXliYWNrIG9iamVjdC5cbiAgICAgKi9cbiAgICBfaW5hY3RpdmVTb3VuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHNlbGYuX2RyYWluKCk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGluYWN0aXZlIG5vZGUgdG8gcmVjeWNsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaW5hY3RpdmUgbm9kZSB3YXMgZm91bmQsIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICByZXR1cm4gbmV3IFNvdW5kKHNlbGYpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEcmFpbiBleGNlc3MgaW5hY3RpdmUgc291bmRzIGZyb20gdGhlIHBvb2wuXG4gICAgICovXG4gICAgX2RyYWluOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBsaW1pdCA9IHNlbGYuX3Bvb2w7XG4gICAgICB2YXIgY250ID0gMDtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIGxlc3Mgc291bmRzIHRoYW4gdGhlIG1heCBwb29sIHNpemUsIHdlIGFyZSBkb25lLlxuICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGggPCBsaW1pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgaW5hY3RpdmUgc291bmRzLlxuICAgICAgZm9yIChpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgY250Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMsIGdvaW5nIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgICBmb3IgKGk9c2VsZi5fc291bmRzLmxlbmd0aCAtIDE7IGk+PTA7IGktLSkge1xuICAgICAgICBpZiAoY250IDw9IGxpbWl0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBhdWRpbyBzb3VyY2Ugd2hlbiB1c2luZyBXZWIgQXVkaW8uXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNlbGYuX3NvdW5kc1tpXS5fbm9kZSkge1xuICAgICAgICAgICAgc2VsZi5fc291bmRzW2ldLl9ub2RlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVtb3ZlIHNvdW5kcyB1bnRpbCB3ZSBoYXZlIHRoZSBwb29sIHNpemUuXG4gICAgICAgICAgc2VsZi5fc291bmRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBjbnQtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIElEJ3MgZnJvbSB0aGUgc291bmRzIHBvb2wuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBPbmx5IHJldHVybiBvbmUgSUQgaWYgb25lIGlzIHBhc3NlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gICAgQXJyYXkgb2YgSURzLlxuICAgICAqL1xuICAgIF9nZXRTb3VuZElkczogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWRzLnB1c2goc2VsZi5fc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtpZF07XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHNvdW5kIGJhY2sgaW50byB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfcmVmcmVzaEJ1ZmZlcjogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGJ1ZmZlciBzb3VyY2UgZm9yIHBsYXliYWNrLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlID0gSG93bGVyLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBjYWNoZVtzZWxmLl9zcmNdO1xuXG4gICAgICAvLyBDb25uZWN0IHRvIHRoZSBjb3JyZWN0IG5vZGUuXG4gICAgICBpZiAoc291bmQuX3Bhbm5lcikge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fcGFubmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9ub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgbG9vcGluZyBhbmQgcGxheWJhY2sgcmF0ZS5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gc291bmQuX2xvb3A7XG4gICAgICBpZiAoc291bmQuX2xvb3ApIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wIHx8IDA7XG4gICAgICB9XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9yYXRlLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgbWVtb3J5IGxlYWtzIGJ5IGNsZWFuaW5nIHVwIHRoZSBidWZmZXIgc291cmNlIGFmdGVyIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBTb3VuZCdzIGF1ZGlvIG5vZGUgY29udGFpbmluZyB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhbkJ1ZmZlcjogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoSG93bGVyLl9zY3JhdGNoQnVmZmVyICYmIG5vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgIG5vZGUuYnVmZmVyU291cmNlLm9uZW5kZWQgPSBudWxsO1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5kaXNjb25uZWN0KDApO1xuICAgICAgICB0cnkgeyBub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBIb3dsZXIuX3NjcmF0Y2hCdWZmZXI7IH0gY2F0Y2goZSkge31cbiAgICAgIH1cbiAgICAgIG5vZGUuYnVmZmVyU291cmNlID0gbnVsbDtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNvdW5kIG9iamVjdCwgd2hpY2ggZWFjaCBub2RlIGF0dGFjaGVkIHRvIGEgSG93bCBncm91cCBpcyBjb250YWluZWQgaW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBob3dsIFRoZSBIb3dsIHBhcmVudCBncm91cC5cbiAgICovXG4gIHZhciBTb3VuZCA9IGZ1bmN0aW9uKGhvd2wpIHtcbiAgICB0aGlzLl9wYXJlbnQgPSBob3dsO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuICBTb3VuZC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBTb3VuZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgICAgc2VsZi5fbXV0ZWQgPSBwYXJlbnQuX211dGVkO1xuICAgICAgc2VsZi5fbG9vcCA9IHBhcmVudC5fbG9vcDtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IHBhcmVudC5fdm9sdW1lO1xuICAgICAgc2VsZi5fcmF0ZSA9IHBhcmVudC5fcmF0ZTtcbiAgICAgIHNlbGYuX3NlZWsgPSAwO1xuICAgICAgc2VsZi5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX2VuZGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9ICdfX2RlZmF1bHQnO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIC8vIEFkZCBpdHNlbGYgdG8gdGhlIHBhcmVudCdzIHBvb2wuXG4gICAgICBwYXJlbnQuX3NvdW5kcy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBub2RlLlxuICAgICAgc2VsZi5jcmVhdGUoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbmQgc2V0dXAgYSBuZXcgc291bmQgb2JqZWN0LCB3aGV0aGVyIEhUTUw1IEF1ZGlvIG9yIFdlYiBBdWRpby5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcbiAgICAgIHZhciB2b2x1bWUgPSAoSG93bGVyLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBzZWxmLl9wYXJlbnQuX211dGVkKSA/IDAgOiBzZWxmLl92b2x1bWU7XG5cbiAgICAgIGlmIChwYXJlbnQuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZ2FpbiBub2RlIGZvciBjb250cm9sbGluZyB2b2x1bWUgKHRoZSBzb3VyY2Ugd2lsbCBjb25uZWN0IHRvIHRoaXMpLlxuICAgICAgICBzZWxmLl9ub2RlID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgICBzZWxmLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc2VsZi5fbm9kZS5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBzZWxmLl9ub2RlLmNvbm5lY3QoSG93bGVyLm1hc3RlckdhaW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5fbm9kZSA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgIC8vIExpc3RlbiBmb3IgZXJyb3JzIChodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjLWF1dGhvci12aWV3L3NwZWMuaHRtbCNtZWRpYWVycm9yKS5cbiAgICAgICAgc2VsZi5fZXJyb3JGbiA9IHNlbGYuX2Vycm9yTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yICdjYW5wbGF5dGhyb3VnaCcgZXZlbnQgdG8gbGV0IHVzIGtub3cgdGhlIHNvdW5kIGlzIHJlYWR5LlxuICAgICAgICBzZWxmLl9sb2FkRm4gPSBzZWxmLl9sb2FkTGlzdGVuZXIuYmluZChzZWxmKTtcbiAgICAgICAgc2VsZi5fbm9kZS5hZGRFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcblxuICAgICAgICAvLyBTZXR1cCB0aGUgbmV3IGF1ZGlvIG5vZGUuXG4gICAgICAgIHNlbGYuX25vZGUuc3JjID0gcGFyZW50Ll9zcmM7XG4gICAgICAgIHNlbGYuX25vZGUucHJlbG9hZCA9ICdhdXRvJztcbiAgICAgICAgc2VsZi5fbm9kZS52b2x1bWUgPSB2b2x1bWUgKiBIb3dsZXIudm9sdW1lKCk7XG5cbiAgICAgICAgLy8gQmVnaW4gbG9hZGluZyB0aGUgc291cmNlLlxuICAgICAgICBzZWxmLl9ub2RlLmxvYWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQgdG8gdGhlIG9yaWdpbmFsIHN0YXRlIChmb3IgcmVjeWNsZSkuXG4gICAgICogQHJldHVybiB7U291bmR9XG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUmVzZXQgYWxsIG9mIHRoZSBwYXJhbWV0ZXJzIG9mIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9yYXRlU2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIHNvIHRoYXQgaXQgaXNuJ3QgY29uZnVzZWQgd2l0aCB0aGUgcHJldmlvdXMgc291bmQuXG4gICAgICBzZWxmLl9pZCA9ICsrSG93bGVyLl9jb3VudGVyO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZXJyb3IgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2Vycm9yTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBGaXJlIGFuIGVycm9yIGV2ZW50IGFuZCBwYXNzIGJhY2sgdGhlIGNvZGUuXG4gICAgICBzZWxmLl9wYXJlbnQuX2VtaXQoJ2xvYWRlcnJvcicsIHNlbGYuX2lkLCBzZWxmLl9ub2RlLmVycm9yID8gc2VsZi5fbm9kZS5lcnJvci5jb2RlIDogMCk7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhUTUw1IEF1ZGlvIGNhbnBsYXl0aHJvdWdoIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgICAqL1xuICAgIF9sb2FkTGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gUm91bmQgdXAgdGhlIGR1cmF0aW9uIHRvIGFjY291bnQgZm9yIHRoZSBsb3dlciBwcmVjaXNpb24gaW4gSFRNTDUgQXVkaW8uXG4gICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgLy8gU2V0dXAgYSBzcHJpdGUgaWYgbm9uZSBpcyBkZWZpbmVkLlxuICAgICAgaWYgKE9iamVjdC5rZXlzKHBhcmVudC5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcGFyZW50Ll9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgcGFyZW50Ll9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIHBhcmVudC5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgcGFyZW50Ll9lbWl0KCdsb2FkJyk7XG4gICAgICAgIHBhcmVudC5fbG9hZFF1ZXVlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIHRoZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICB2YXIgY2FjaGUgPSB7fTtcblxuICAvKipcbiAgICogQnVmZmVyIGEgc291bmQgZnJvbSBVUkwsIERhdGEgVVJJIG9yIGNhY2hlIGFuZCBkZWNvZGUgdG8gYXVkaW8gc291cmNlIChXZWIgQXVkaW8gQVBJKS5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKi9cbiAgdmFyIGxvYWRCdWZmZXIgPSBmdW5jdGlvbihzZWxmKSB7XG4gICAgdmFyIHVybCA9IHNlbGYuX3NyYztcblxuICAgIC8vIENoZWNrIGlmIHRoZSBidWZmZXIgaGFzIGFscmVhZHkgYmVlbiBjYWNoZWQgYW5kIHVzZSBpdCBpbnN0ZWFkLlxuICAgIGlmIChjYWNoZVt1cmxdKSB7XG4gICAgICAvLyBTZXQgdGhlIGR1cmF0aW9uIGZyb20gdGhlIGNhY2hlLlxuICAgICAgc2VsZi5fZHVyYXRpb24gPSBjYWNoZVt1cmxdLmR1cmF0aW9uO1xuXG4gICAgICAvLyBMb2FkIHRoZSBzb3VuZCBpbnRvIHRoaXMgSG93bC5cbiAgICAgIGxvYWRTb3VuZChzZWxmKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgvXmRhdGE6W147XSs7YmFzZTY0LC8udGVzdCh1cmwpKSB7XG4gICAgICAvLyBEZWNvZGUgdGhlIGJhc2U2NCBkYXRhIFVSSSB3aXRob3V0IFhIUiwgc2luY2Ugc29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IGl0LlxuICAgICAgdmFyIGRhdGEgPSBhdG9iKHVybC5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxkYXRhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRhdGFWaWV3W2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICAgICAgfVxuXG4gICAgICBkZWNvZGVBdWRpb0RhdGEoZGF0YVZpZXcuYnVmZmVyLCBzZWxmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgYnVmZmVyIGZyb20gdGhlIFVSTC5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHNlbGYuX3hocldpdGhDcmVkZW50aWFscztcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZ2V0IGEgc3VjY2Vzc2Z1bCByZXNwb25zZSBiYWNrLlxuICAgICAgICB2YXIgY29kZSA9ICh4aHIuc3RhdHVzICsgJycpWzBdO1xuICAgICAgICBpZiAoY29kZSAhPT0gJzAnICYmIGNvZGUgIT09ICcyJyAmJiBjb2RlICE9PSAnMycpIHtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRmFpbGVkIGxvYWRpbmcgYXVkaW8gZmlsZSB3aXRoIHN0YXR1czogJyArIHhoci5zdGF0dXMgKyAnLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlY29kZUF1ZGlvRGF0YSh4aHIucmVzcG9uc2UsIHNlbGYpO1xuICAgICAgfTtcbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGVycm9yLCBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8uXG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYuX2h0bWw1ID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl93ZWJBdWRpbyA9IGZhbHNlO1xuICAgICAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgICAgIGRlbGV0ZSBjYWNoZVt1cmxdO1xuICAgICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgc2FmZVhoclNlbmQoeGhyKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgdGhlIFhIUiByZXF1ZXN0IHdyYXBwZWQgaW4gYSB0cnkvY2F0Y2guXG4gICAqIEBwYXJhbSAge09iamVjdH0geGhyIFhIUiB0byBzZW5kLlxuICAgKi9cbiAgdmFyIHNhZmVYaHJTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgeGhyLm9uZXJyb3IoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY29kZSBhdWRpbyBkYXRhIGZyb20gYW4gYXJyYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gIHtBcnJheUJ1ZmZlcn0gYXJyYXlidWZmZXIgVGhlIGF1ZGlvIGRhdGEuXG4gICAqIEBwYXJhbSAge0hvd2x9ICAgICAgICBzZWxmXG4gICAqL1xuICB2YXIgZGVjb2RlQXVkaW9EYXRhID0gZnVuY3Rpb24oYXJyYXlidWZmZXIsIHNlbGYpIHtcbiAgICAvLyBGaXJlIGEgbG9hZCBlcnJvciBpZiBzb21ldGhpbmcgYnJva2UuXG4gICAgdmFyIGVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnRGVjb2RpbmcgYXVkaW8gZGF0YSBmYWlsZWQuJyk7XG4gICAgfTtcblxuICAgIC8vIExvYWQgdGhlIHNvdW5kIG9uIHN1Y2Nlc3MuXG4gICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgIGlmIChidWZmZXIgJiYgc2VsZi5fc291bmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FjaGVbc2VsZi5fc3JjXSA9IGJ1ZmZlcjtcbiAgICAgICAgbG9hZFNvdW5kKHNlbGYsIGJ1ZmZlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvcigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEZWNvZGUgdGhlIGJ1ZmZlciBpbnRvIGFuIGF1ZGlvIHNvdXJjZS5cbiAgICBpZiAodHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlidWZmZXIpLnRoZW4oc3VjY2VzcykuY2F0Y2goZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlciwgc3VjY2VzcywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTb3VuZCBpcyBub3cgbG9hZGVkLCBzbyBmaW5pc2ggc2V0dGluZyBldmVyeXRoaW5nIHVwIGFuZCBmaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICogQHBhcmFtICB7T2JqZWN0fSBidWZmZXIgVGhlIGRlY29kZWQgYnVmZmVyIHNvdW5kIHNvdXJjZS5cbiAgICovXG4gIHZhciBsb2FkU291bmQgPSBmdW5jdGlvbihzZWxmLCBidWZmZXIpIHtcbiAgICAvLyBTZXQgdGhlIGR1cmF0aW9uLlxuICAgIGlmIChidWZmZXIgJiYgIXNlbGYuX2R1cmF0aW9uKSB7XG4gICAgICBzZWxmLl9kdXJhdGlvbiA9IGJ1ZmZlci5kdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgaWYgKE9iamVjdC5rZXlzKHNlbGYuX3Nwcml0ZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxmLl9zcHJpdGUgPSB7X19kZWZhdWx0OiBbMCwgc2VsZi5fZHVyYXRpb24gKiAxMDAwXX07XG4gICAgfVxuXG4gICAgLy8gRmlyZSB0aGUgbG9hZGVkIGV2ZW50LlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ2xvYWRlZCc7XG4gICAgICBzZWxmLl9lbWl0KCdsb2FkJyk7XG4gICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSBhdWRpbyBjb250ZXh0IHdoZW4gYXZhaWxhYmxlLCBvciBzd2l0Y2ggdG8gSFRNTDUgQXVkaW8gbW9kZS5cbiAgICovXG4gIHZhciBzZXR1cEF1ZGlvQ29udGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIENoZWNrIGlmIHdlIGFyZSB1c2luZyBXZWIgQXVkaW8gYW5kIHNldHVwIHRoZSBBdWRpb0NvbnRleHQgaWYgd2UgYXJlLlxuICAgIHRyeSB7XG4gICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgSG93bGVyLmN0eCA9IG5ldyB3ZWJraXRBdWRpb0NvbnRleHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBIb3dsZXIudXNpbmdXZWJBdWRpbyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGEgd2VidmlldyBpcyBiZWluZyB1c2VkIG9uIGlPUzggb3IgZWFybGllciAocmF0aGVyIHRoYW4gdGhlIGJyb3dzZXIpLlxuICAgIC8vIElmIGl0IGlzLCBkaXNhYmxlIFdlYiBBdWRpbyBhcyBpdCBjYXVzZXMgY3Jhc2hpbmcuXG4gICAgdmFyIGlPUyA9ICgvaVAoaG9uZXxvZHxhZCkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IucGxhdGZvcm0pKTtcbiAgICB2YXIgYXBwVmVyc2lvbiA9IEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL09TIChcXGQrKV8oXFxkKylfPyhcXGQrKT8vKTtcbiAgICB2YXIgdmVyc2lvbiA9IGFwcFZlcnNpb24gPyBwYXJzZUludChhcHBWZXJzaW9uWzFdLCAxMCkgOiBudWxsO1xuICAgIGlmIChpT1MgJiYgdmVyc2lvbiAmJiB2ZXJzaW9uIDwgOSkge1xuICAgICAgdmFyIHNhZmFyaSA9IC9zYWZhcmkvLnRlc3QoSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnN0YW5kYWxvbmUgJiYgIXNhZmFyaSB8fCBIb3dsZXIuX25hdmlnYXRvciAmJiAhSG93bGVyLl9uYXZpZ2F0b3Iuc3RhbmRhbG9uZSAmJiAhc2FmYXJpKSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBleHBvc2UgdGhlIG1hc3RlciBHYWluTm9kZSB3aGVuIHVzaW5nIFdlYiBBdWRpbyAodXNlZnVsIGZvciBwbHVnaW5zIG9yIGFkdmFuY2VkIHVzYWdlKS5cbiAgICBpZiAoSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShIb3dsZXIuX211dGVkID8gMCA6IDEsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uY29ubmVjdChIb3dsZXIuY3R4LmRlc3RpbmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyBSZS1ydW4gdGhlIHNldHVwIG9uIEhvd2xlci5cbiAgICBIb3dsZXIuX3NldHVwKCk7XG4gIH07XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIEFNRCAoQXN5bmNocm9ub3VzIE1vZHVsZSBEZWZpbml0aW9uKSBsaWJyYXJpZXMgc3VjaCBhcyByZXF1aXJlLmpzLlxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIEhvd2xlcjogSG93bGVyLFxuICAgICAgICBIb3dsOiBIb3dsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHN1cHBvcnQgZm9yIENvbW1vbkpTIGxpYnJhcmllcyBzdWNoIGFzIGJyb3dzZXJpZnkuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLkhvd2xlciA9IEhvd2xlcjtcbiAgICBleHBvcnRzLkhvd2wgPSBIb3dsO1xuICB9XG5cbiAgLy8gRGVmaW5lIGdsb2JhbGx5IGluIGNhc2UgQU1EIGlzIG5vdCBhdmFpbGFibGUgb3IgdW51c2VkLlxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgd2luZG93Lkhvd2wgPSBIb3dsO1xuICAgIHdpbmRvdy5Tb3VuZCA9IFNvdW5kO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7IC8vIEFkZCB0byBnbG9iYWwgaW4gTm9kZS5qcyAoZm9yIHRlc3RpbmcsIGV0YykuXG4gICAgZ2xvYmFsLkhvd2xlckdsb2JhbCA9IEhvd2xlckdsb2JhbDtcbiAgICBnbG9iYWwuSG93bGVyID0gSG93bGVyO1xuICAgIGdsb2JhbC5Ib3dsID0gSG93bDtcbiAgICBnbG9iYWwuU291bmQgPSBTb3VuZDtcbiAgfVxufSkoKTtcblxuXG4vKiFcbiAqICBTcGF0aWFsIFBsdWdpbiAtIEFkZHMgc3VwcG9ydCBmb3Igc3RlcmVvIGFuZCAzRCBhdWRpbyB3aGVyZSBXZWIgQXVkaW8gaXMgc3VwcG9ydGVkLlxuICogIFxuICogIGhvd2xlci5qcyB2Mi4wLjE1XG4gKiAgaG93bGVyanMuY29tXG4gKlxuICogIChjKSAyMDEzLTIwMTgsIEphbWVzIFNpbXBzb24gb2YgR29sZEZpcmUgU3R1ZGlvc1xuICogIGdvbGRmaXJlc3R1ZGlvcy5jb21cbiAqXG4gKiAgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIFNldHVwIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fcG9zID0gWzAsIDAsIDBdO1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLl9vcmllbnRhdGlvbiA9IFswLCAwLCAtMSwgMCwgMSwgMF07XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgc3RlcmVvIHBhbm5pbmcgcG9zaXRpb24gb2YgYWxsIGN1cnJlbnQgSG93bHMuXG4gICAqIEZ1dHVyZSBIb3dscyB3aWxsIG5vdCB1c2UgdGhpcyB2YWx1ZSB1bmxlc3MgZXhwbGljaXRseSBzZXQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gcGFuIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEByZXR1cm4ge0hvd2xlci9OdW1iZXJ9ICAgICBTZWxmIG9yIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnN0ZXJlbyA9IGZ1bmN0aW9uKHBhbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIEhvd2xzIGFuZCB1cGRhdGUgdGhlaXIgc3RlcmVvIHBhbm5pbmcuXG4gICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICBzZWxmLl9ob3dsc1tpXS5zdGVyZW8ocGFuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyIGluIDNEIGNhcnRlc2lhbiBzcGFjZS4gU291bmRzIHVzaW5nXG4gICAqIDNEIHBvc2l0aW9uIHdpbGwgYmUgcmVsYXRpdmUgdG8gdGhlIGxpc3RlbmVyJ3MgcG9zaXRpb24uXG4gICAqIEBwYXJhbSAge051bWJlcn0geCBUaGUgeC1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiBUaGUgei1wb3NpdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge0hvd2xlci9BcnJheX0gICBTZWxmIG9yIGN1cnJlbnQgbGlzdGVuZXIgcG9zaXRpb24uXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1sxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gc2VsZi5fcG9zWzJdIDogejtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgaWYgKHR5cGVvZiBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWC5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblkuc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRQb3NpdGlvbihzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZyBpbiB0aGUgM0QgY2FydGVzaWFuIHNwYWNlLlxuICAgKiBBIGZyb250IGFuZCB1cCB2ZWN0b3IgbXVzdCBiZSBwcm92aWRlZC4gVGhlIGZyb250IGlzIHRoZSBkaXJlY3Rpb24gdGhlXG4gICAqIGZhY2Ugb2YgdGhlIGxpc3RlbmVyIGlzIHBvaW50aW5nLCBhbmQgdXAgaXMgdGhlIGRpcmVjdGlvbiB0aGUgdG9wIG9mIHRoZVxuICAgKiBsaXN0ZW5lciBpcyBwb2ludGluZy4gVGh1cywgdGhlc2UgdmFsdWVzIGFyZSBleHBlY3RlZCB0byBiZSBhdCByaWdodCBhbmdsZXNcbiAgICogZnJvbSBlYWNoIG90aGVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggICBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICAgVGhlIHotb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHhVcCBUaGUgeC1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5VXAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0gelVwIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdmVjdG9ycy5cbiAgICovXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB2YXIgb3IgPSBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBvclsxXSA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gb3JbMl0gOiB6O1xuICAgIHhVcCA9ICh0eXBlb2YgeFVwICE9PSAnbnVtYmVyJykgPyBvclszXSA6IHhVcDtcbiAgICB5VXAgPSAodHlwZW9mIHlVcCAhPT0gJ251bWJlcicpID8gb3JbNF0gOiB5VXA7XG4gICAgelVwID0gKHR5cGVvZiB6VXAgIT09ICdudW1iZXInKSA/IG9yWzVdIDogelVwO1xuXG4gICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBbeCwgeSwgeiwgeFVwLCB5VXAsIHpVcF07XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYLnNldFRhcmdldEF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWS5zZXRUYXJnZXRBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFouc2V0VGFyZ2V0QXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWC5zZXRUYXJnZXRBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBZLnNldFRhcmdldEF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFouc2V0VGFyZ2V0QXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6LCB4VXAsIHlVcCwgelVwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9yO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBHcm91cCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBBZGQgbmV3IHByb3BlcnRpZXMgdG8gdGhlIGNvcmUgaW5pdC5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBDb3JlIGluaXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBvLm9yaWVudGF0aW9uIHx8IFsxLCAwLCAwXTtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IG8uc3RlcmVvIHx8IG51bGw7XG4gICAgICBzZWxmLl9wb3MgPSBvLnBvcyB8fCBudWxsO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZUlubmVyQW5nbGUgOiAzNjAsXG4gICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IDAsXG4gICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogJ2ludmVyc2UnLFxuICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IDEwMDAwLFxuICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5pbmdNb2RlbCA6ICdIUlRGJyxcbiAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiAxLFxuICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IDFcbiAgICAgIH07XG5cbiAgICAgIC8vIFNldHVwIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgIHNlbGYuX29uc3RlcmVvID0gby5vbnN0ZXJlbyA/IFt7Zm46IG8ub25zdGVyZW99XSA6IFtdO1xuICAgICAgc2VsZi5fb25wb3MgPSBvLm9ucG9zID8gW3tmbjogby5vbnBvc31dIDogW107XG4gICAgICBzZWxmLl9vbm9yaWVudGF0aW9uID0gby5vbm9yaWVudGF0aW9uID8gW3tmbjogby5vbm9yaWVudGF0aW9ufV0gOiBbXTtcblxuICAgICAgLy8gQ29tcGxldGUgaW5pdGlsaXphdGlvbiB3aXRoIGhvd2xlci5qcyBjb3JlJ3MgaW5pdCBmdW5jdGlvbi5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvKTtcbiAgICB9O1xuICB9KShIb3dsLnByb3RvdHlwZS5pbml0KTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgc3RlcmVvIHBhbm5pbmcgb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBhbGwgaW4gdGhlIGdyb3VwLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiAgQSB2YWx1ZSBvZiAtMS4wIGlzIGFsbCB0aGUgd2F5IGxlZnQgYW5kIDEuMCBpcyBhbGwgdGhlIHdheSByaWdodC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAob3B0aW9uYWwpIFRoZSBzb3VuZCBJRC4gSWYgbm9uZSBpcyBwYXNzZWQsIGFsbCBpbiBncm91cCB3aWxsIGJlIHVwZGF0ZWQuXG4gICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc3RlcmVvIHBhbm5pbmcgdmFsdWUuXG4gICAqL1xuICBIb3dsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4sIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2Ugc3RlcmVvIHBhbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnc3RlcmVvJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnN0ZXJlbyhwYW4sIGlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBQYW5uZXJTdGVyZW9Ob2RlIHN1cHBvcnQgYW5kIGZhbGxiYWNrIHRvIFBhbm5lck5vZGUgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICB2YXIgcGFubmVyVHlwZSA9ICh0eXBlb2YgSG93bGVyLmN0eC5jcmVhdGVTdGVyZW9QYW5uZXIgPT09ICd1bmRlZmluZWQnKSA/ICdzcGF0aWFsJyA6ICdzdGVyZW8nO1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3RlcmVvIHBhbm5pbmcgaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiBwYW4gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhbjtcbiAgICAgICAgc2VsZi5fcG9zID0gW3BhbiwgMCwgMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fc3RlcmVvO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3RyZW8gcGFubmluZyBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHNvdW5kLl9zdGVyZW8gPSBwYW47XG4gICAgICAgICAgc291bmQuX3BvcyA9IFtwYW4sIDAsIDBdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZmFsbGluZyBiYWNrLCBtYWtlIHN1cmUgdGhlIHBhbm5pbmdNb2RlbCBpcyBlcXVhbHBvd2VyLlxuICAgICAgICAgICAgc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsID0gJ2VxdWFscG93ZXInO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgIXNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCBwYW5uZXJUeXBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhbm5lclR5cGUgPT09ICdzcGF0aWFsJykge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHBhbiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoMCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoMCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihwYW4sIDAsIDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBhbi5zZXRWYWx1ZUF0VGltZShwYW4sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3N0ZXJlbycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9zdGVyZW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgM0Qgc3BhdGlhbCBwb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlIGZvciB0aGlzIHNvdW5kIG9yIGdyb3VwIHJlbGF0aXZlIHRvIHRoZSBnbG9iYWwgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBwb3NpdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucG9zID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwb3NpdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAncG9zJyxcbiAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzZWxmLnBvcyh4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gMCA6IHk7XG4gICAgeiA9ICh0eXBlb2YgeiAhPT0gJ251bWJlcicpID8gLTAuNSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgcG9zaXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gc2VsZi5fcG9zO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBwb3NpdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fcG9zID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIgfHwgc291bmQuX3Bhbm5lci5wYW4pIHtcbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BvcycsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9wb3M7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKipcbiAgICogR2V0L3NldCB0aGUgZGlyZWN0aW9uIHRoZSBhdWRpbyBzb3VyY2UgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBjb29yZGluYXRlXG4gICAqIHNwYWNlLiBEZXBlbmRpbmcgb24gaG93IGRpcmVjdGlvbiB0aGUgc291bmQgaXMsIGJhc2VkIG9uIHRoZSBgY29uZWAgYXR0cmlidXRlcyxcbiAgICogYSBzb3VuZCBwb2ludGluZyBhd2F5IGZyb20gdGhlIGxpc3RlbmVyIGNhbiBiZSBxdWlldCBvciBzaWxlbnQuXG4gICAqIEBwYXJhbSAge051bWJlcn0geCAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB5ICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL0FycmF5fSAgICBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgM0Qgc3BhdGlhbCBvcmllbnRhdGlvbjogW3gsIHksIHpdLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUub3JpZW50YXRpb24gPSBmdW5jdGlvbih4LCB5LCB6LCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIG9yaWVudGF0aW9uIHdoZW4gY2FwYWJsZS5cbiAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgZXZlbnQ6ICdvcmllbnRhdGlvbicsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5vcmllbnRhdGlvbih4LCB5LCB6LCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gc2VsZi5fb3JpZW50YXRpb25bMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzJdIDogejtcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gSUQgaXMgcGFzc2VkLlxuICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBSZXR1cm4gdGhlIGdyb3VwJ3Mgc3BhdGlhbCBvcmllbnRhdGlvbiBpZiBubyBwYXJhbWV0ZXJzIGFyZSBwYXNzZWQuXG4gICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX29yaWVudGF0aW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoYW5nZSB0aGUgc3BhdGlhbCBvcmllbnRhdGlvbiBvZiBvbmUgb3IgYWxsIHNvdW5kcyBpbiBncm91cC5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fb3JpZW50YXRpb24gPSBbeCwgeSwgel07XG5cbiAgICAgICAgICBpZiAoc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgcGFubmVyIHNldHVwIGFuZCBjcmVhdGUgYSBuZXcgb25lIGlmIG5vdC5cbiAgICAgICAgICAgIGlmICghc291bmQuX3Bhbm5lcikge1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgICAgIGlmICghc291bmQuX3Bvcykge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YLnNldFZhbHVlQXRUaW1lKHgsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZSh5LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoeiwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnNldE9yaWVudGF0aW9uKHgsIHksIHopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ29yaWVudGF0aW9uJywgc291bmQuX2lkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc291bmQuX29yaWVudGF0aW9uO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBhbm5lciBub2RlJ3MgYXR0cmlidXRlcyBmb3IgYSBzb3VuZCBvciBncm91cCBvZiBzb3VuZHMuXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGwgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgKiAgIHBhbm5lckF0dHIoKSAtPiBSZXR1cm5zIHRoZSBncm91cCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIHZhbHVlcy5cbiAgICogICBwYW5uZXJBdHRyKG8pIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAqICAgcGFubmVyQXR0cihvLCBpZCkgLT4gU2V0J3MgdGhlIHZhbHVlcyBvZiBwYXNzZWQgc291bmQgaWQuXG4gICAqXG4gICAqICAgQXR0cmlidXRlczpcbiAgICogICAgIGNvbmVJbm5lckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcbiAgICogICAgICAgICAgICAgICAgICAgICAgaW5zaWRlIG9mIHdoaWNoIHRoZXJlIHdpbGwgYmUgbm8gdm9sdW1lIHJlZHVjdGlvbi5cbiAgICogICAgIGNvbmVPdXRlckFuZ2xlIC0gKDM2MCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyBhbiBhbmdsZSwgaW4gZGVncmVlcyxcbiAgICogICAgICAgICAgICAgICAgICAgICAgb3V0c2lkZSBvZiB3aGljaCB0aGUgdm9sdW1lIHdpbGwgYmUgcmVkdWNlZCB0byBhIGNvbnN0YW50IHZhbHVlIG9mIGBjb25lT3V0ZXJHYWluYC5cbiAgICogICAgIGNvbmVPdXRlckdhaW4gLSAoMCBieSBkZWZhdWx0KSBBIHBhcmFtZXRlciBmb3IgZGlyZWN0aW9uYWwgYXVkaW8gc291cmNlcywgdGhpcyBpcyB0aGUgZ2FpbiBvdXRzaWRlIG9mIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgIGBjb25lT3V0ZXJBbmdsZWAuIEl0IGlzIGEgbGluZWFyIHZhbHVlIGluIHRoZSByYW5nZSBgWzAsIDFdYC5cbiAgICogICAgIGRpc3RhbmNlTW9kZWwgLSAoJ2ludmVyc2UnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgYWxnb3JpdGhtIHVzZWQgdG8gcmVkdWNlIHZvbHVtZSBhcyBhdWRpbyBtb3ZlcyBhd2F5IGZyb21cbiAgICogICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci4gQ2FuIGJlIGBsaW5lYXJgLCBgaW52ZXJzZWAgb3IgYGV4cG9uZW50aWFsLlxuICAgKiAgICAgbWF4RGlzdGFuY2UgLSAoMTAwMDAgYnkgZGVmYXVsdCkgVGhlIG1heGltdW0gZGlzdGFuY2UgYmV0d2VlbiBzb3VyY2UgYW5kIGxpc3RlbmVyLCBhZnRlciB3aGljaCB0aGUgdm9sdW1lXG4gICAqICAgICAgICAgICAgICAgICAgIHdpbGwgbm90IGJlIHJlZHVjZWQgYW55IGZ1cnRoZXIuXG4gICAqICAgICByZWZEaXN0YW5jZSAtICgxIGJ5IGRlZmF1bHQpIEEgcmVmZXJlbmNlIGRpc3RhbmNlIGZvciByZWR1Y2luZyB2b2x1bWUgYXMgc291cmNlIG1vdmVzIGZ1cnRoZXIgZnJvbSB0aGUgbGlzdGVuZXIuXG4gICAqICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgc2ltcGx5IGEgdmFyaWFibGUgb2YgdGhlIGRpc3RhbmNlIG1vZGVsIGFuZCBoYXMgYSBkaWZmZXJlbnQgZWZmZWN0IGRlcGVuZGluZyBvbiB3aGljaCBtb2RlbFxuICAgKiAgICAgICAgICAgICAgICAgICBpcyB1c2VkIGFuZCB0aGUgc2NhbGUgb2YgeW91ciBjb29yZGluYXRlcy4gR2VuZXJhbGx5LCB2b2x1bWUgd2lsbCBiZSBlcXVhbCB0byAxIGF0IHRoaXMgZGlzdGFuY2UuXG4gICAqICAgICByb2xsb2ZmRmFjdG9yIC0gKDEgYnkgZGVmYXVsdCkgSG93IHF1aWNrbHkgdGhlIHZvbHVtZSByZWR1Y2VzIGFzIHNvdXJjZSBtb3ZlcyBmcm9tIGxpc3RlbmVyLiBUaGlzIGlzIHNpbXBseSBhXG4gICAqICAgICAgICAgICAgICAgICAgICAgdmFyaWFibGUgb2YgdGhlIGRpc3RhbmNlIG1vZGVsIGFuZCBjYW4gYmUgaW4gdGhlIHJhbmdlIG9mIGBbMCwgMV1gIHdpdGggYGxpbmVhcmAgYW5kIGBbMCwg4oieXWBcbiAgICogICAgICAgICAgICAgICAgICAgICB3aXRoIGBpbnZlcnNlYCBhbmQgYGV4cG9uZW50aWFsYC5cbiAgICogICAgIHBhbm5pbmdNb2RlbCAtICgnSFJURicgYnkgZGVmYXVsdCkgRGV0ZXJtaW5lcyB3aGljaCBzcGF0aWFsaXphdGlvbiBhbGdvcml0aG0gaXMgdXNlZCB0byBwb3NpdGlvbiBhdWRpby5cbiAgICogICAgICAgICAgICAgICAgICAgICBDYW4gYmUgYEhSVEZgIG9yIGBlcXVhbHBvd2VyYC5cbiAgICpcbiAgICogQHJldHVybiB7SG93bC9PYmplY3R9IFJldHVybnMgc2VsZiBvciBjdXJyZW50IHBhbm5lciBhdHRyaWJ1dGVzLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUucGFubmVyQXR0ciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgbywgaWQsIHNvdW5kO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgcmV0dXJuIHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvID0gYXJnc1swXTtcblxuICAgICAgICAvLyBTZXQgdGhlIGdyb3UncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoIW8ucGFubmVyQXR0cikge1xuICAgICAgICAgICAgby5wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgICBjb25lSW5uZXJBbmdsZTogby5jb25lSW5uZXJBbmdsZSxcbiAgICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IG8uY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IG8uY29uZU91dGVyR2FpbixcbiAgICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogby5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgICBtYXhEaXN0YW5jZTogby5tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgICAgcmVmRGlzdGFuY2U6IG8ucmVmRGlzdGFuY2UsXG4gICAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IG8ucm9sbG9mZkZhY3RvcixcbiAgICAgICAgICAgICAgcGFubmluZ01vZGVsOiBvLnBhbm5pbmdNb2RlbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9wYW5uZXJBdHRyID0ge1xuICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlIDogc2VsZi5fY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8ucGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgOiBzZWxmLl9jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICAgIGNvbmVPdXRlckdhaW46IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIuY29uZU91dGVyR2FpbiA6IHNlbGYuX2NvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWwgOiBzZWxmLl9kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLnBhbm5lckF0dHIubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLm1heERpc3RhbmNlIDogc2VsZi5fbWF4RGlzdGFuY2UsXG4gICAgICAgICAgICByZWZEaXN0YW5jZTogdHlwZW9mIG8ucGFubmVyQXR0ci5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgOiBzZWxmLl9yZWZEaXN0YW5jZSxcbiAgICAgICAgICAgIHJvbGxvZmZGYWN0b3I6IHR5cGVvZiBvLnBhbm5lckF0dHIucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucm9sbG9mZkZhY3RvciA6IHNlbGYuX3JvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICBwYW5uaW5nTW9kZWw6IHR5cGVvZiBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5wYW5uaW5nTW9kZWwgOiBzZWxmLl9wYW5uaW5nTW9kZWxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIHBhbm5lciBhdHRyaWJ1dGUgdmFsdWVzLlxuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChwYXJzZUludChhcmdzWzBdLCAxMCkpO1xuICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fcGFubmVyQXR0ciA6IHNlbGYuX3Bhbm5lckF0dHI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgICAgbyA9IGFyZ3NbMF07XG4gICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgdGhlIHZhbHVlcyBvZiB0aGUgc3BlY2lmaWVkIHNvdW5kcy5cbiAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IHZhbHVlcyBpbnRvIHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHBhID0gc291bmQuX3Bhbm5lckF0dHI7XG4gICAgICAgIHBhID0ge1xuICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogcGEuY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLmNvbmVPdXRlckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyQW5nbGUgOiBwYS5jb25lT3V0ZXJBbmdsZSxcbiAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5jb25lT3V0ZXJHYWluICE9PSAndW5kZWZpbmVkJyA/IG8uY29uZU91dGVyR2FpbiA6IHBhLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8uZGlzdGFuY2VNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLmRpc3RhbmNlTW9kZWwgOiBwYS5kaXN0YW5jZU1vZGVsLFxuICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5tYXhEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLm1heERpc3RhbmNlIDogcGEubWF4RGlzdGFuY2UsXG4gICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnJlZkRpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucmVmRGlzdGFuY2UgOiBwYS5yZWZEaXN0YW5jZSxcbiAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5yb2xsb2ZmRmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IG8ucm9sbG9mZkZhY3RvciA6IHBhLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiBwYS5wYW5uaW5nTW9kZWxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHBhbm5lciB2YWx1ZXMgb3IgY3JlYXRlIGEgbmV3IHBhbm5lciBpZiBub25lIGV4aXN0cy5cbiAgICAgICAgdmFyIHBhbm5lciA9IHNvdW5kLl9wYW5uZXI7XG4gICAgICAgIGlmIChwYW5uZXIpIHtcbiAgICAgICAgICBwYW5uZXIuY29uZUlubmVyQW5nbGUgPSBwYS5jb25lSW5uZXJBbmdsZTtcbiAgICAgICAgICBwYW5uZXIuY29uZU91dGVyQW5nbGUgPSBwYS5jb25lT3V0ZXJBbmdsZTtcbiAgICAgICAgICBwYW5uZXIuY29uZU91dGVyR2FpbiA9IHBhLmNvbmVPdXRlckdhaW47XG4gICAgICAgICAgcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBwYS5kaXN0YW5jZU1vZGVsO1xuICAgICAgICAgIHBhbm5lci5tYXhEaXN0YW5jZSA9IHBhLm1heERpc3RhbmNlO1xuICAgICAgICAgIHBhbm5lci5yZWZEaXN0YW5jZSA9IHBhLnJlZkRpc3RhbmNlO1xuICAgICAgICAgIHBhbm5lci5yb2xsb2ZmRmFjdG9yID0gcGEucm9sbG9mZkZhY3RvcjtcbiAgICAgICAgICBwYW5uZXIucGFubmluZ01vZGVsID0gcGEucGFubmluZ01vZGVsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgcG9zaXRpb24gdG8gc2V0dXAgdGhlIG5vZGUgd2l0aC5cbiAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgIHNvdW5kLl9wb3MgPSBzZWxmLl9wb3MgfHwgWzAsIDAsIC0wLjVdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYW5uZXIgbm9kZS5cbiAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgJ3NwYXRpYWwnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKiBTaW5nbGUgU291bmQgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIFNvdW5kIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBTb3VuZCBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7U291bmR9XG4gICAqL1xuICBTb3VuZC5wcm90b3R5cGUuaW5pdCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBTZXR1cCB1c2VyLWRlZmluZWQgZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSBTb3VuZCdzIGluaXQgZnVuY3Rpb24uXG4gICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBTb3VuZC5yZXNldCBtZXRob2QgdG8gY2xlYW4gdXAgcHJvcGVydGllcyBmcm9tIHRoZSBzcGF0aWFsIHBsdWdpbi5cbiAgICogQHBhcmFtICB7RnVuY3Rpb259IF9zdXBlciBTb3VuZCByZXNldCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLnJlc2V0ID0gKGZ1bmN0aW9uKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFJlc2V0IGFsbCBzcGF0aWFsIHBsdWdpbiBwcm9wZXJ0aWVzIG9uIHRoaXMgc291bmQuXG4gICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IHBhcmVudC5fb3JpZW50YXRpb247XG4gICAgICBzZWxmLl9zdGVyZW8gPSBwYXJlbnQuX3N0ZXJlbztcbiAgICAgIHNlbGYuX3BvcyA9IHBhcmVudC5fcG9zO1xuICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHBhcmVudC5fcGFubmVyQXR0cjtcblxuICAgICAgLy8gSWYgYSBzdGVyZW8gb3IgcG9zaXRpb24gd2FzIHNwZWNpZmllZCwgc2V0IGl0IHVwLlxuICAgICAgaWYgKHNlbGYuX3N0ZXJlbykge1xuICAgICAgICBwYXJlbnQuc3RlcmVvKHNlbGYuX3N0ZXJlbyk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bvcykge1xuICAgICAgICBwYXJlbnQucG9zKHNlbGYuX3Bvc1swXSwgc2VsZi5fcG9zWzFdLCBzZWxmLl9wb3NbMl0sIHNlbGYuX2lkKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5fcGFubmVyKSB7XG4gICAgICAgIC8vIERpc2Nvbm5lY3QgdGhlIHBhbm5lci5cbiAgICAgICAgc2VsZi5fcGFubmVyLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgIHNlbGYuX3Bhbm5lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgcGFyZW50Ll9yZWZyZXNoQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb21wbGV0ZSByZXNldHRpbmcgb2YgdGhlIHNvdW5kLlxuICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMpO1xuICAgIH07XG4gIH0pKFNvdW5kLnByb3RvdHlwZS5yZXNldCk7XG5cbiAgLyoqIEhlbHBlciBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUgYW5kIHNhdmUgaXQgb24gdGhlIHNvdW5kLlxuICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgU3BlY2lmaWMgc291bmQgdG8gc2V0dXAgcGFubmluZyBvbi5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVHlwZSBvZiBwYW5uZXIgdG8gY3JlYXRlOiAnc3RlcmVvJyBvciAnc3BhdGlhbCcuXG4gICAqL1xuICB2YXIgc2V0dXBQYW5uZXIgPSBmdW5jdGlvbihzb3VuZCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlIHx8ICdzcGF0aWFsJztcblxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IHBhbm5lciBub2RlLlxuICAgIGlmICh0eXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVBhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lSW5uZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJBbmdsZSA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlO1xuICAgICAgc291bmQuX3Bhbm5lci5jb25lT3V0ZXJHYWluID0gc291bmQuX3Bhbm5lckF0dHIuY29uZU91dGVyR2FpbjtcbiAgICAgIHNvdW5kLl9wYW5uZXIuZGlzdGFuY2VNb2RlbCA9IHNvdW5kLl9wYW5uZXJBdHRyLmRpc3RhbmNlTW9kZWw7XG4gICAgICBzb3VuZC5fcGFubmVyLm1heERpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIubWF4RGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJlZkRpc3RhbmNlID0gc291bmQuX3Bhbm5lckF0dHIucmVmRGlzdGFuY2U7XG4gICAgICBzb3VuZC5fcGFubmVyLnJvbGxvZmZGYWN0b3IgPSBzb3VuZC5fcGFubmVyQXR0ci5yb2xsb2ZmRmFjdG9yO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW5uaW5nTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5wYW5uaW5nTW9kZWw7XG5cbiAgICAgIGlmICh0eXBlb2Ygc291bmQuX3Bhbm5lci5wb3NpdGlvblggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1syXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnNldFBvc2l0aW9uKHNvdW5kLl9wb3NbMF0sIHNvdW5kLl9wb3NbMV0sIHNvdW5kLl9wb3NbMl0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMF0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWS5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fb3JpZW50YXRpb25bMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbihzb3VuZC5fb3JpZW50YXRpb25bMF0sIHNvdW5kLl9vcmllbnRhdGlvblsxXSwgc291bmQuX29yaWVudGF0aW9uWzJdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc291bmQuX3Bhbm5lciA9IEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7XG4gICAgICBzb3VuZC5fcGFubmVyLnBhbi5zZXRWYWx1ZUF0VGltZShzb3VuZC5fc3RlcmVvLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICB9XG5cbiAgICBzb3VuZC5fcGFubmVyLmNvbm5lY3Qoc291bmQuX25vZGUpO1xuXG4gICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9ucy5cbiAgICBpZiAoIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgIHNvdW5kLl9wYXJlbnQucGF1c2Uoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgfVxuICB9O1xufSkoKTtcbiIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiTWFya292TlwiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuTWFya292Tj1lKCk6dC5NYXJrb3ZOPWUoKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBvPWVbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9cmV0dXJuIG4ubT10LG4uYz1lLG4uZD1mdW5jdGlvbih0LGUscil7bi5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5yPWZ1bmN0aW9uKHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LG4udD1mdW5jdGlvbih0LGUpe2lmKDEmZSYmKHQ9bih0KSksOCZlKXJldHVybiB0O2lmKDQmZSYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTp0fSksMiZlJiZcInN0cmluZ1wiIT10eXBlb2YgdClmb3IodmFyIG8gaW4gdCluLmQocixvLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfS5iaW5kKG51bGwsbykpO3JldHVybiByfSxuLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIG4uZChlLFwiYVwiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPVwiXCIsbihuLnM9MCl9KFtmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKGUpO2NvbnN0IHI9dD0+e2xldCBlPXQucmVkdWNlKCh0LGUpPT50K2UpLG49TWF0aC5yYW5kb20oKSplLHI9MDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrKylpZihuPD0ocj0rKHIrPXRbZV0pLnRvRml4ZWQoMikpKXJldHVybiBlfSxvPXQ9PntsZXQgZT10LnJlZHVjZSgodCxlKT0+dCtlKTtyZXR1cm4gZT4wP3QubWFwKHQ9PnQvZSk6dC5tYXAoKCk9PjApfSxpPSh0LGUpPT57dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCkscj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKTtpZihuLmxlbmd0aCE9ci5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspe3ZhciBpPW5bb107aWYodFtpXSE9PWVbaV0pcmV0dXJuITF9cmV0dXJuITB9LHM9KHQsZSk9Pih0JWUrZSklZTtuLmQoZSxcImdldEFsbFRyYW5zaXRpb25zXCIsZnVuY3Rpb24oKXtyZXR1cm4gYX0pLG4uZChlLFwiTWFya292TlwiLGZ1bmN0aW9uKCl7cmV0dXJuIGx9KTtjb25zdCBhPSh0LGUpPT50LnJlZHVjZSgobixyLG8pPT57Y29uc3QgaT1bXTtmb3IobGV0IG49ZTtuPj0wO24tLSlpLnB1c2godFtzKG8tbix0Lmxlbmd0aCldKTtyZXR1cm4gbi5wdXNoKGkpLG59LFtdKSx1PSh0LGUpPT57Y29uc3Qgbj1bLi4udF07cmV0dXJuIG4uc2hpZnQoKSxuLnB1c2goZSksbn07Y2xhc3MgbHtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuZGljdGlvbmFyeT1bXSx0aGlzLmNvbWJpbmF0aW9ucz1bXSx0aGlzLmxhc3RTdGF0ZT1bXTtmb3IobGV0IG49MDtuPGU7bisrKXRoaXMubGFzdFN0YXRlLnB1c2godFtuXSk7dGhpcy50cmFuc2l0aW9uTWF0cml4PXRoaXMuY3JlYXRlVHJhbnNpdGlvbk1hdHJpeCh0LGUpfWNyZWF0ZVRyYW5zaXRpb25NYXRyaXgodCxlKXt0aGlzLmRpY3Rpb25hcnk9QXJyYXkuZnJvbShuZXcgU2V0KHQpKSx0aGlzLmNvbWJpbmF0aW9ucz1hKHQsZSk7bGV0IG49W107Zm9yKGxldCB0PTA7dDx0aGlzLmNvbWJpbmF0aW9ucy5sZW5ndGg7dCsrKXtsZXQgdD1bXTtmb3IobGV0IGU9MDtlPHRoaXMuZGljdGlvbmFyeS5sZW5ndGg7ZSsrKXQucHVzaCgwKTtuLnB1c2godCl9Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDtyKyspe2xldCBvPVtdO2ZvcihsZXQgbj1lO24+PTA7bi0tKW8ucHVzaCh0W3Moci1uLHQubGVuZ3RoKV0pO2xldCBhPXRoaXMuY29tYmluYXRpb25zLmZpbmRJbmRleCh0PT5pKG8sdCkpLHU9dFsocisxKSV0Lmxlbmd0aF0sbD10aGlzLmRpY3Rpb25hcnkuaW5kZXhPZih1KTtuW2FdW2xdKyt9cmV0dXJuIG49bi5tYXAobyl9Z2V0TmV4dFN0YXRlKHQpe2NvbnN0IGU9dGhpcy50cmFuc2l0aW9uTWF0cml4W3RoaXMuY29tYmluYXRpb25zLmZpbmRJbmRleChlPT5pKHQsZSkpXSxuPXIoZSk7cmV0dXJuIHRoaXMuZGljdGlvbmFyeVtuXX0qYXNQYXR0ZXJuKHQpe2Zvcih0aGlzLmxhc3RTdGF0ZT10Ozspe2xldCB0PXRoaXMuZ2V0TmV4dFN0YXRlKHRoaXMubGFzdFN0YXRlKTt0aGlzLmxhc3RTdGF0ZT11KHRoaXMubGFzdFN0YXRlLHQpLHlpZWxkIHR9fX1lLmRlZmF1bHQ9bH1dKX0pOyIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLCBldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2ggKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuIiwiXG5leHBvcnQgY29uc3QgbXRvZiA9IChub3RlOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5wb3coMiwgKG5vdGUpLzEyKSAqIDQ0MDtcblxuZXhwb3J0IGNvbnN0IGZ0b20gPSAobm90ZTogbnVtYmVyKTogbnVtYmVyID0+IE1hdGguc3FydChub3RlLzQ0MCkvMTI7XG5cbmV4cG9ydCBjb25zdCBjaG9vc2UgPSAoYXJyYXk6IEFycmF5PGFueT4pOiBhbnkgPT4ge1xuICAgIHJldHVybiBhcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpXTtcbiAgfTtcblxuZXhwb3J0IGNvbnN0IGdldFJhdGVGcm9tRnJlcXVlbmNpZXMgPSAoZnJlcSwgYmFzZUZyZXEpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gZnJlcS9iYXNlRnJlcTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRDbG9zZXN0TWVtYmVyID0gKHN1YmplY3QsIHNldCkgPT4ge1xuICByZXR1cm4gc2V0LnJlZHVjZSggKGFjY3VtLCBtZW1iZXIpID0+IHtcbiAgICBjb25zdCBwcmV2RGlzdGFuY2UgPSBhY2N1bSAtIHN1YmplY3Q7XG4gICAgY29uc3QgY3VycmVudERpc3RhbmNlID0gbWVtYmVyIC0gc3ViamVjdDtcblxuICAgIHJldHVybiBNYXRoLmFicyggY3VycmVudERpc3RhbmNlICkgPCBNYXRoLmFicyggcHJldkRpc3RhbmNlICkgPyBtZW1iZXIgOiBhY2N1bTtcbiAgfSwgc2V0WzBdKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaW5kSW5Db2xsZWN0aW9uID0gKGNvbGxlY3Rpb24sIHByZWRpY2F0ZUZ1bmN0aW9uKSA9PiB7XG4gIHJldHVybiBjb2xsZWN0aW9uLnJlZHVjZSggKGFjY3VtLCBtZW1iZXIpID0+IHByZWRpY2F0ZUZ1bmN0aW9uKG1lbWJlcikgPyBtZW1iZXIgOiBhY2N1bSApO1xufTtcblxuZXhwb3J0IGNvbnN0IG1hcFRvRG9tYWluID0gKHNldCwgZG9tYWluKSA9PiB7XG4gIGNvbnN0IHNldE9mZnNldCA9IE1hdGgubWluKC4uLmRvbWFpbikgLSBNYXRoLm1pbiguLi5zZXQpO1xuICBjb25zdCBkb21haW5SYW5nZSA9ICggTWF0aC5tYXgoLi4uZG9tYWluKSAtIE1hdGgubWluKC4uLmRvbWFpbikgKTtcbiAgY29uc3Qgc2V0UmFuZ2UgPSAoIE1hdGgubWF4KC4uLnNldCkgLSBNYXRoLm1pbiguLi5zZXQpICk7XG5cbiAgcmV0dXJuIHNldC5tYXAoIG1lbWJlciA9PiBnZXRDbG9zZXN0TWVtYmVyKCAoKCAobWVtYmVyIC0gTWF0aC5taW4oLi4uc2V0KSkgLyBzZXRSYW5nZSkgKiBkb21haW5SYW5nZSApICsgc2V0T2Zmc2V0LCBkb21haW4pKTtcbn07XG5cbiAgLy8gVE9ETzogSSBkaWQgdGhlIHRydWUvZmFsc2UgYmFja3dhcmRzIG9uIHRoaXMgYnV0IGV2ZXJ5dGhpbmcgdXNlcyBpdCB0aGlzIHdheS5cbmV4cG9ydCBjb25zdCBmbGlwQ29pbiA9IChwcm9iYWJpbGl0eT0wLjUpOiBib29sZWFuID0+IChNYXRoLnJhbmRvbSgpIDwgcHJvYmFiaWxpdHkpID8gZmFsc2UgOiB0cnVlO1xuXG5leHBvcnQgY29uc3QgbWFrZUZ1bmN0aW9uID0gKHZhbHVlKTogRnVuY3Rpb24gPT4ge1xuICBpZih0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gKCkgPT4gdmFsdWU7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB3aW5kZXggPSAod2VpZ2h0czogQXJyYXk8bnVtYmVyPik6IG51bWJlciA9PiB7XG4gIGxldCBzdW1PZldlaWdodHMgPSB3ZWlnaHRzLnJlZHVjZSggKHByZXYsIGN1cnIpID0+IHByZXYgKyBjdXJyKTtcblxuICBsZXQgcmFuZE51bSA9IE1hdGgucmFuZG9tKCkgKiBzdW1PZldlaWdodHM7XG4gIGxldCB3ZWlnaHRTdW0gPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd2VpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgIHdlaWdodFN1bSArPSB3ZWlnaHRzW2ldO1xuICAgIHdlaWdodFN1bSA9ICt3ZWlnaHRTdW0udG9GaXhlZCgyKTtcblxuICAgIGlmIChyYW5kTnVtIDw9IHdlaWdodFN1bSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgbm9ybWFsaXplID0gKGNvbGw6IG51bWJlcltdKTogbnVtYmVyW10gPT4ge1xuICBsZXQgY29sbFN1bSA9IGNvbGwucmVkdWNlKChhLGIpID0+IGErYik7XG4gIHJldHVybiBjb2xsU3VtID4gMCA/IGNvbGwubWFwKCAod2VpZ2h0KSA9PiB3ZWlnaHQgLyBjb2xsU3VtKSA6IGNvbGwubWFwKCgpID0+IDApO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzRXF1aXZhbGVudCA9IChhLCBiKTogYm9vbGVhbiA9PiB7XG4gIC8vIENyZWF0ZSBhcnJheXMgb2YgcHJvcGVydHkgbmFtZXNcbiAgdmFyIGFQcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpO1xuICB2YXIgYlByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYik7XG5cbiAgLy8gSWYgbnVtYmVyIG9mIHByb3BlcnRpZXMgaXMgZGlmZmVyZW50LFxuICAvLyBvYmplY3RzIGFyZSBub3QgZXF1aXZhbGVudFxuICBpZiAoYVByb3BzLmxlbmd0aCAhPSBiUHJvcHMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhUHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcHJvcE5hbWUgPSBhUHJvcHNbaV07XG5cbiAgICAvLyBJZiB2YWx1ZXMgb2Ygc2FtZSBwcm9wZXJ0eSBhcmUgbm90IGVxdWFsLFxuICAgIC8vIG9iamVjdHMgYXJlIG5vdCBlcXVpdmFsZW50XG4gICAgaWYgKGFbcHJvcE5hbWVdICE9PSBiW3Byb3BOYW1lXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlIG1hZGUgaXQgdGhpcyBmYXIsIG9iamVjdHNcbiAgLy8gYXJlIGNvbnNpZGVyZWQgZXF1aXZhbGVudFxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb2QgPSAobnVtLCBtb2R1bG8pID0+IChudW0gJSBtb2R1bG8gKyBtb2R1bG8pICUgbW9kdWxvO1xuXG5leHBvcnQgY29uc3QgZ2V0U2VxdWVudGlhbFJhbmRvbUluZGV4ID0gKCBsYXN0SW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIgKTogbnVtYmVyID0+IHtcbiAgY29uc3QgcG9zc2libGVJbmRleGVzID0gQXJyYXkobGVuZ3RoKS5maWxsKDApLm1hcCggKGl0ZW0saSkgPT4gaSkuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gbGFzdEluZGV4KTtcblxuICByZXR1cm4gY2hvb3NlKHBvc3NpYmxlSW5kZXhlcyk7XG59O1xuIiwiLypcbiAqIEJhc2ljIFBhdHRlcm5zIGltcGxlbWVudGF0aW9uXG4gKi9cblxuY29uc3QgTWFya292ID0gcmVxdWlyZShcIm1hcmtvdm5cIikuZGVmYXVsdDtcbmltcG9ydCB7IEdlbmV0aWMgfSBmcm9tIFwiLi9HZW5ldGljXCI7XG5cbmV4cG9ydCBjb25zdCBQYXR0ZXJuID0gKHBhdHRlcm4pID0+IFsoKSA9PiBwYXR0ZXJuLm5leHQoKS52YWx1ZV07XG5cbmV4cG9ydCBjb25zdCBQc2VxID0gZnVuY3Rpb24qIFBzZXEodmFsdWVzOiBBcnJheTxhbnk+LCByZXBldGl0aW9uczogbnVtYmVyKXtcbiAgdmFyIGluZGV4OiBudW1iZXIgPSAwO1xuICB2YXIgcmVzdWx0ID0gKCk6IGFueSA9PiB2YWx1ZXNbaW5kZXgrKyAlIHZhbHVlcy5sZW5ndGhdO1xuXG4gIGlmKHJlcGV0aXRpb25zID09IHVuZGVmaW5lZCkge1xuICAgIHdoaWxlKHRydWUpIHtcbiAgICAgIHlpZWxkIHJlc3VsdCgpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBmb3IodmFyIGk9MDsgaTxyZXBldGl0aW9uczsgaSsrKSB7XG4gICAgICB5aWVsZCByZXN1bHQoKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBQcmFuZCA9IGZ1bmN0aW9uKiBQcmFuZCh2YWx1ZXM6IEFycmF5PGFueT4sIHJlcGV0aXRpb25zOiBudW1iZXIpe1xuXG4gIHZhciByZXN1bHQgPSAoKTogYW55ID0+IHZhbHVlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWx1ZXMubGVuZ3RoKV07XG5cbiAgaWYocmVwZXRpdGlvbnMgPT0gdW5kZWZpbmVkKSB7XG4gICAgd2hpbGUodHJ1ZSkge1xuICAgICAgeWllbGQgcmVzdWx0KCk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGZvcih2YXIgaT0wOyBpPHJlcGV0aXRpb25zOyBpKyspIHtcbiAgICAgIHlpZWxkIHJlc3VsdCgpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IFBtYXJrb3YgPSBmdW5jdGlvbiBQbWFya292KHNlZWQ6IGFueVtdLCBvcmRlcjogbnVtYmVyLCBpbml0aWFsU3RhdGU6IGFueVtdKSB7XG4gIGNvbnN0IG1hcmtvdkNoYWluID0gbmV3IE1hcmtvdihzZWVkLCBvcmRlcik7XG5cbiAgcmV0dXJuIG1hcmtvdkNoYWluLmFzUGF0dGVybihpbml0aWFsU3RhdGUpO1xufTtcblxuZXhwb3J0IGNvbnN0IFBnZW5ldGljID0gZnVuY3Rpb24qIFBnZW5ldGljKGlucHV0UG9wdWxhdGlvbjogbnVtYmVyW11bXSwgZ29hbDogbnVtYmVyW10pIHtcbiAgbGV0IGdlbmV0aWM6IEdlbmV0aWMgPSBuZXcgR2VuZXRpYyhpbnB1dFBvcHVsYXRpb24sIGdvYWwpO1xuXG4gIGxldCBsYXN0U3RhdGU6IG51bWJlcltdID0gZ29hbDtcblxuICB3aGlsZSh0cnVlKSB7XG4gICAgbGV0IG5leHRTdGF0ZTogYW55ID0gZ2VuZXRpYy5nZXROZXh0U3RhdGUobGFzdFN0YXRlKTtcblxuICAgIGxhc3RTdGF0ZSA9IFtsYXN0U3RhdGVbbGFzdFN0YXRlLmxlbmd0aC0xXSwgbmV4dFN0YXRlXTtcblxuICAgIHlpZWxkIG5leHRTdGF0ZTtcbiAgfVxufTtcblxuIiwiXG5pbXBvcnQgeyBmbGlwQ29pbiB9IGZyb20gXCIuL3V0aWxzXCI7XG5cblxuY2xhc3MgR2VuZXRpYyB7XG4gIHB1YmxpYyBwb3B1bGF0aW9uOiBudW1iZXJbXVtdO1xuICBwcml2YXRlIGdvYWw6IG51bWJlcltdO1xuICBwcml2YXRlIHNjb3JlczogbnVtYmVyW107XG4gIHByaXZhdGUgbGFzdFN0YXRlOiBudW1iZXJbXTtcblxuICBjb25zdHJ1Y3RvcihpbnB1dFBvcHVsYXRpb246IG51bWJlcltdW10sIGdvYWw6IG51bWJlcltdKSB7XG4gICAgdGhpcy5wb3B1bGF0aW9uID0gaW5wdXRQb3B1bGF0aW9uO1xuICAgIHRoaXMuc2NvcmVzID0gQXJyYXkoaW5wdXRQb3B1bGF0aW9uLmxlbmd0aCkuZmlsbCgwKTtcbiAgICB0aGlzLmdvYWwgPSBnb2FsO1xuICAgIHRoaXMubGFzdFN0YXRlID0gaW5wdXRQb3B1bGF0aW9uW01hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoaW5wdXRQb3B1bGF0aW9uLmxlbmd0aC0xKSkgXTtcbiAgfVxuXG5cbiAgLy8gQWNjdW11bGF0ZSBhbmQgcmV0dXJuIHRoZSBzY29yZSBmb3IgYSBzaW5nbGUgY29sbGVjdGlvblxuICBnZXRUb3RhbEZpdG5lc3NSYXRpbmcoY29sbGVjdGlvbjogbnVtYmVyW10sIGdvYWw6IG51bWJlcltdKSB7XG4gICAgbGV0IHNjb3JlOiBudW1iZXIgPSAwOyAvLyBsb3dlciBpcyBiZXR0ZXJcbiAgICBsZXQgbm9ybWFsaXplZENvbGxlY3Rpb24gPSBjb2xsZWN0aW9uLm1hcCgobnVtOiBudW1iZXIpID0+IG51bSAtIE1hdGgubWluLmFwcGx5KG51bGwsIGNvbGxlY3Rpb24pICk7XG5cbiAgICBmb3IobGV0IGk9bm9ybWFsaXplZENvbGxlY3Rpb24ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBzY29yZSArPSB0aGlzLmdldERpc3RhbmNlKG5vcm1hbGl6ZWRDb2xsZWN0aW9uW2ldLCBnb2FsW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICAvLyBUT0RPOiB0ZXN0XG4gIC8vIFVzaW5nIHRoZSBnaXZlbiBzY29yZXMsIGdldCB0aGUgbW9zdCBcImZpdFwiIHR3byBnZW5lcmF0aW9ucyBvdXQgb2YgdGhlIHBvcHVsYXRpb25cbiAgZ2V0VG9wVHdvR2VuZXJhdGlvbnMoc2NvcmVzOiBudW1iZXJbXSwgcG9wdWxhdGlvbjogbnVtYmVyW11bXSk6IG51bWJlcltdW10ge1xuXG4gICAgbGV0IGluZGV4T2ZIaWdoZXN0U2NvcmUgPSAwO1xuXG4gICAgZm9yKGxldCBpPXNjb3Jlcy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICBpZihzY29yZXNbaW5kZXhPZkhpZ2hlc3RTY29yZV0gPCBzY29yZXNbaV0pIHtcbiAgICAgICAgaW5kZXhPZkhpZ2hlc3RTY29yZSA9IGk7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGFyZSB0d28gb2YgdGhlIHNhbWUgc2NvcmVzLCBjaG9vc2Ugb25lIHJhbmRvbWx5XG4gICAgICBpZihzY29yZXNbaW5kZXhPZkhpZ2hlc3RTY29yZV0gPT09IHNjb3Jlc1tpXSkge1xuICAgICAgICBjb25zdCBjb2luRmxpcCA9IE1hdGgucmFuZG9tKCk7XG5cbiAgICAgICAgaW5kZXhPZkhpZ2hlc3RTY29yZSA9IChjb2luRmxpcCA+IDAuNSkgPyBpbmRleE9mSGlnaGVzdFNjb3JlIDogaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgaW5kZXhPZk5leHRIaWdoZXN0U2NvcmU6IG51bWJlciA9IDA7XG4gICAgY29uc3QgdG9wR2VuZXJhdGlvblNjb3JlOiBudW1iZXIgPSBzY29yZXNbaW5kZXhPZkhpZ2hlc3RTY29yZV07XG5cblxuICAgIGNvbnN0IGNvaW5GbGlwRm9yTXV0YXRlID0gZmxpcENvaW4oMC4yNSk7XG5cbiAgICBpZihjb2luRmxpcEZvck11dGF0ZSkge1xuICAgICAgaW5kZXhPZk5leHRIaWdoZXN0U2NvcmUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzY29yZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBmb3IobGV0IGk9c2NvcmVzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgLy8gSWdub3JlIGFueSBzY29yZXMgdGhhdCBhcmUgYWxyZWFkeSB0aGUgaGlnaGVzdCBzY29yZVxuICAgICAgICBpZihzY29yZXNbaV0gIT09IHRvcEdlbmVyYXRpb25TY29yZSkge1xuXG4gICAgICAgICAgaWYoc2NvcmVzW2luZGV4T2ZOZXh0SGlnaGVzdFNjb3JlXSA8IHNjb3Jlc1tpXSkge1xuICAgICAgICAgICAgaW5kZXhPZk5leHRIaWdoZXN0U2NvcmUgPSBpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSB0d28gb2YgdGhlIHNhbWUgc2NvcmVzLCBjaG9vc2Ugb25lIHJhbmRvbWx5XG4gICAgICAgICAgaWYoc2NvcmVzW2luZGV4T2ZOZXh0SGlnaGVzdFNjb3JlXSA9PT0gc2NvcmVzW2ldKSB7XG4gICAgICAgICAgICBjb25zdCBjb2luRmxpcCA9IE1hdGgucmFuZG9tKCk7XG5cbiAgICAgICAgICAgIGluZGV4T2ZOZXh0SGlnaGVzdFNjb3JlID0gKGNvaW5GbGlwID4gMC41KSA/IGluZGV4T2ZOZXh0SGlnaGVzdFNjb3JlIDogaTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3BvcHVsYXRpb25baW5kZXhPZkhpZ2hlc3RTY29yZV0sIHBvcHVsYXRpb25baW5kZXhPZk5leHRIaWdoZXN0U2NvcmVdIF07XG4gIH1cblxuICAvLyBUT0RPOiBNYWtlIG1vcmUgdGhhbiBvbmUgdHlwZSBvZiBtYXRpbmdcbiAgLy8gVGFrZSBpbiB0d28gYXJyYXlzIChwYXJlbnRzKSBhbmQgbWF0ZSB0aGVtIGluIGEgbnVtYmVyIG9mIGRpZmZlcmVudCB3YXlzIHRvIHByb2R1Y2UgbXVsdGlwbGUgb2Zmc3ByaW5nXG4gIG1hdGVHZW5lcmF0aW9ucyhwYXJlbnRzOiBudW1iZXJbXVtdKTogbnVtYmVyW11bXSB7XG5cbiAgICBjb25zdCBzcGxpY2VkT2Zmc3ByaW5nID0gdGhpcy5nZXRTcGxpY2VkT2Zmc3ByaW5nKHBhcmVudHNbMF0sIHBhcmVudHNbMV0pO1xuICAgIGNvbnN0IGludGVybGFjZWRPZmZzcHJpbmcgPSB0aGlzLmdldEludGVybGFjZWRPZmZzcHJpbmcocGFyZW50c1swXSwgcGFyZW50c1sxXSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBtb3JlIHRoYW4gb25lIG9mZnNwcmluZ1xuICAgIHJldHVybiBbc3BsaWNlZE9mZnNwcmluZywgaW50ZXJsYWNlZE9mZnNwcmluZ107XG4gIH1cblxuICAvLyBTcGxpY2UgdHdvIGVxdWFsLWxlbmd0aCBhcnJheXMgdG9nZXRoZXIgYW5kIHJldHVybiB0aGUgcmVzdWx0XG4gIGdldEludGVybGFjZWRPZmZzcHJpbmcocGFyZW50T25lOiBudW1iZXJbXSwgcGFyZW50VHdvOiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgICBjb25zdCBpbnRlcmxhY2VkT2Zmc3ByaW5nID0gQXJyYXkocGFyZW50T25lLmxlbmd0aCk7XG5cbiAgICBmb3IobGV0IGk9aW50ZXJsYWNlZE9mZnNwcmluZy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICBpbnRlcmxhY2VkT2Zmc3ByaW5nW2ldID0gKGklMikgPT09IDAgPyBwYXJlbnRPbmVbaV0gOiBwYXJlbnRUd29baV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGludGVybGFjZWRPZmZzcHJpbmc7XG4gIH1cblxuICBnZXRTcGxpY2VkT2Zmc3ByaW5nKHBhcmVudE9uZTogbnVtYmVyW10sIHBhcmVudFR3bzogbnVtYmVyW10pOiBudW1iZXJbXSB7XG4gICAgY29uc3QgY29pbkZsaXA6IG51bWJlciA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAxIDogMDtcbiAgICBjb25zdCBwYXJlbnRzID0gY29pbkZsaXAgPT0gMCA/IFtwYXJlbnRPbmUsIHBhcmVudFR3b10gOiBbcGFyZW50VHdvLCBwYXJlbnRPbmVdO1xuICAgIGNvbnN0IHNwbGl0UG9pbnQ6IG51bWJlciA9IE1hdGguZmxvb3IocGFyZW50T25lLmxlbmd0aCAvIDIpO1xuXG4gICAgY29uc3Qgc3BsaWNlZE9mZnNwcmluZyA9IFsuLi4ocGFyZW50c1swXS5zbGljZSgwLCBzcGxpdFBvaW50KSksIC4uLihwYXJlbnRzWzFdLnNsaWNlKHNwbGl0UG9pbnQtMSwgcGFyZW50c1sxXS5sZW5ndGgtMSkpIF07XG5cbiAgICByZXR1cm4gc3BsaWNlZE9mZnNwcmluZztcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBudW1lcmljYWwgZGlzdGFuY2UgYmV0d2VlbiBhbiBpbnB1dCBhbmQgYSBnb2FsXG4gIGdldERpc3RhbmNlKGlucHV0OiBudW1iZXIsIGdvYWw6IG51bWJlcikge1xuICAgIGxldCByYXRpbmc6IG51bWJlciA9IGdvYWwgLSBpbnB1dDtcblxuICAgIHJldHVybiByYXRpbmc7XG4gIH1cblxuXG5cblxuXG4gIC8vIENhbGN1bGF0ZSBhbmQgcmV0dXJuIHRoZSBzY29yZXMgZm9yIGFsbCBjdXJyZW50IGNvbGxlY3Rpb25zXG4gIGdldFBvcHVsYXRpb25TY29yZXMocG9wdWxhdGlvbjogbnVtYmVyW11bXSwgZ29hbDogbnVtYmVyW10pOiBudW1iZXJbXSB7XG4gICAgbGV0IHNjb3JlcyA9IEFycmF5KHBvcHVsYXRpb24ubGVuZ3RoKS5maWxsKDApO1xuXG4gICAgZm9yKGxldCBpPShwb3B1bGF0aW9uLmxlbmd0aC0xKTsgaT49MDsgaS0tKSB7XG4gICAgICBzY29yZXNbaV0gPSB0aGlzLmdldFRvdGFsRml0bmVzc1JhdGluZyhwb3B1bGF0aW9uW2ldLCBnb2FsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmVzO1xuICB9XG5cbiAgZ2V0TmV4dEdlbmVyYXRpb24ocG9wdWxhdGlvbjogbnVtYmVyW11bXSwgZ29hbDogbnVtYmVyW10pIHtcbiAgICBjb25zdCBwb3B1bGF0aW9uU2NvcmVzOm51bWJlcltdID0gdGhpcy5nZXRQb3B1bGF0aW9uU2NvcmVzKHBvcHVsYXRpb24sIGdvYWwpO1xuICAgIGNvbnN0IHRvcFR3b0dlbmVyYXRpb25zOm51bWJlcltdW10gPSB0aGlzLmdldFRvcFR3b0dlbmVyYXRpb25zKHBvcHVsYXRpb25TY29yZXMsIHBvcHVsYXRpb24pO1xuICAgIGNvbnN0IG5ld0dlbmVyYXRpb25zOm51bWJlcltdW10gPSB0aGlzLm1hdGVHZW5lcmF0aW9ucyh0b3BUd29HZW5lcmF0aW9ucyk7XG5cbiAgICBmb3IobGV0IGk9MDsgaSA8IChuZXdHZW5lcmF0aW9ucy5sZW5ndGgtMSk7IGkrKykge1xuICAgICAgdGhpcy5wb3B1bGF0aW9uLnNwbGljZShNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAodGhpcy5wb3B1bGF0aW9uLmxlbmd0aC0xKSksIDEpO1xuICAgIH1cbiAgICB0aGlzLnBvcHVsYXRpb24gPSBbLi4udGhpcy5wb3B1bGF0aW9uLCAuLi5uZXdHZW5lcmF0aW9uc107XG4gICAgLy8gRm9yIG5vdyByYW5kb21seSBzZWxlY3Qgb25lIG9mIHRoZSBiZXN0IGdlbmVyYXRpb25zXG4gICAgY29uc3QgYmVzdEZpdEdlbmVyYXRpb24gPSBuZXdHZW5lcmF0aW9uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobmV3R2VuZXJhdGlvbnMubGVuZ3RoICogMC45OTkpKV07XG5cbiAgICByZXR1cm4gYmVzdEZpdEdlbmVyYXRpb247XG4gIH1cblxuICBnZXROZXh0U3RhdGUoc3RhdGU6IG51bWJlcltdKSB7XG4gICAgLy8gVE9ETzogVXNlIHN0YXRlIHRvIGFkZCBpbnRvIHRoZSBwb3B1bGF0aW9uXG5cbiAgICBjb25zdCBuZXh0U3RhdGU6IG51bWJlcltdID0gdGhpcy5nZXROZXh0R2VuZXJhdGlvbih0aGlzLnBvcHVsYXRpb24sIHRoaXMuZ29hbCk7XG5cbiAgICByZXR1cm4gbmV4dFN0YXRlO1xuICB9XG5cbiAgYXNQYXR0ZXJuKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKiBhc1BhdHRlcm4oaW5pdGlhbFN0YXRlOiBudW1iZXJbXSkge1xuICAgICAgc2VsZi5sYXN0U3RhdGUgPSBpbml0aWFsU3RhdGU7XG5cbiAgICAgIHdoaWxlKHRydWUpIHtcbiAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gc2VsZi5nZXROZXh0U3RhdGUoc2VsZi5sYXN0U3RhdGUpO1xuICAgICAgICBzZWxmLmxhc3RTdGF0ZSA9IG5leHRTdGF0ZTtcblxuICAgICAgICB5aWVsZCBuZXh0U3RhdGU7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG59O1xuXG5leHBvcnQgeyBHZW5ldGljIH07XG5cbiIsIi8vIEJhc2ljIGN1cnZlIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dhdmVTaGFwZXJOb2RlXG5jb25zdCBtYWtlRGlzdG9ydGlvbkN1cnZlID0gYW1vdW50ID0+IHtcbiAgdmFyIGsgPSB0eXBlb2YgYW1vdW50ID09PSAnbnVtYmVyJyA/IGFtb3VudCA6IDUwLFxuICAgIG5fc2FtcGxlcyA9IDQ0MTAwLFxuICAgIGN1cnZlID0gbmV3IEZsb2F0MzJBcnJheShuX3NhbXBsZXMpLFxuICAgIGRlZyA9IE1hdGguUEkgLyAxODAsXG4gICAgaSA9IDAsXG4gICAgeDtcbiAgZm9yICggOyBpIDwgbl9zYW1wbGVzOyArK2kgKSB7XG4gICAgeCA9IGkgKiAyIC8gbl9zYW1wbGVzIC0gMTtcbiAgICBjdXJ2ZVtpXSA9ICggMyArIGsgKSAqIHggKiAyMCAqIGRlZyAvICggTWF0aC5QSSArIGsgKiBNYXRoLmFicyh4KSApO1xuICB9XG4gIHJldHVybiBjdXJ2ZTtcbn07XG5cblxuaW1wb3J0IHtJU291bmRQbGF5ZXIsIElQbGF5T3B0aW9uc30gZnJvbSAnLi9Tb3VuZFBsYXllcic7XG5pbXBvcnQgeyBmbGlwQ29pbiB9IGZyb20gJy4vdXRpbHMnO1xuXG5pbnRlcmZhY2UgSVN5bnRoT3B0aW9ucyB7XG4gIC8vIHdhdmVmb3JtVHlwZT86IHN0cmluZyxcbiAgd2F2ZWZvcm1UeXBlPzogT3NjaWxsYXRvclR5cGUsXG59XG5pbnRlcmZhY2UgSVN5bnRoTm9kZXMge1xuICBvc2NpbGxhdG9yOiBhbnk7XG4gIGdhaW5Ob2RlOiBhbnk7XG4gIHdhdmVTaGFwZXI6IGFueTtcbiAgcGFubmVyOiBTdGVyZW9QYW5uZXJOb2RlO1xufVxuXG5jbGFzcyBTeW50aCBpbXBsZW1lbnRzIElTb3VuZFBsYXllciB7XG4gIHByaXZhdGUgc3ludGhOb2RlczogSVN5bnRoTm9kZXM7XG4gIHByaXZhdGUgY29uZmlnOiBJU3ludGhPcHRpb25zO1xuICBwcml2YXRlIGNvbnRleHQ6IEF1ZGlvQ29udGV4dDtcblxuICBjb25zdHJ1Y3Rvcihjb250ZXh0LCBjb25maWc/OiBJU3ludGhPcHRpb25zKSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyA/IGNvbmZpZyA6IHt9O1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG5cbiAgICBjb25zdCBvc2NpbGxhdG9yID0gY29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKCk7XG4gICAgdGhpcy5jb25maWcud2F2ZWZvcm1UeXBlICYmIChvc2NpbGxhdG9yLnR5cGUgPSB0aGlzLmNvbmZpZy53YXZlZm9ybVR5cGUpO1xuXG4gICAgY29uc3QgZ2Fpbk5vZGUgPSBjb250ZXh0LmNyZWF0ZUdhaW4oKTtcbiAgICBjb25zdCBwYW5uZXIgPSBjb250ZXh0LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgIGNvbnN0IHdhdmVTaGFwZXIgPSBjb250ZXh0LmNyZWF0ZVdhdmVTaGFwZXIoKTtcbiAgICB3YXZlU2hhcGVyLmN1cnZlID0gbWFrZURpc3RvcnRpb25DdXJ2ZSg4MDApO1xuICAgIHdhdmVTaGFwZXIub3ZlcnNhbXBsZSA9ICc0eCc7XG5cbiAgICBvc2NpbGxhdG9yLmNvbm5lY3QoZ2Fpbk5vZGUpO1xuICAgIGdhaW5Ob2RlLmNvbm5lY3QocGFubmVyKTtcbiAgICBwYW5uZXIuY29ubmVjdCh3YXZlU2hhcGVyKTtcbiAgICB3YXZlU2hhcGVyLmNvbm5lY3QoY29udGV4dC5kZXN0aW5hdGlvbik7XG5cbiAgICBvc2NpbGxhdG9yLnR5cGUgPSB0aGlzLmNvbmZpZy53YXZlZm9ybVR5cGUgPyB0aGlzLmNvbmZpZy53YXZlZm9ybVR5cGUgOiBmbGlwQ29pbigpID8gJ3RyaWFuZ2xlJyA6ICdzaW5lJztcbiAgICBnYWluTm9kZS5nYWluLnZhbHVlID0gMDtcblxuICAgIHRoaXMuc3ludGhOb2RlcyA9IHtcbiAgICAgIG9zY2lsbGF0b3IsXG4gICAgICBnYWluTm9kZSxcbiAgICAgIHdhdmVTaGFwZXIsXG4gICAgICBwYW5uZXIsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBwbGF5KG9wdDogSVBsYXlPcHRpb25zKSB7XG4gICAgY29uc3Qge2ZyZXE9MjIwLCB0aW1lPTEsIHBhbj0wLCB2b2w9MX0gPSBvcHQ7XG4gICAgdGhpcy5pbml0KCk7XG5cbiAgICBjb25zdCB7XG4gICAgICBvc2NpbGxhdG9yLFxuICAgICAgZ2Fpbk5vZGUsXG4gICAgICB3YXZlU2hhcGVyLFxuICAgICAgcGFubmVyLFxuICAgIH0gPSB0aGlzLnN5bnRoTm9kZXM7XG5cblxuICAgIGxldCBnYWluID0gMC4wMTtcbiAgICBvc2NpbGxhdG9yLmZyZXF1ZW5jeS52YWx1ZSA9IGZyZXE7XG5cbiAgICBvcHQuZGlzdG9ydGlvbiAmJiAod2F2ZVNoYXBlci5jdXJ2ZSA9IG1ha2VEaXN0b3J0aW9uQ3VydmUob3B0LmRpc3RvcnRpb24pICk7XG4gICAgLy8gc29tZSBzdHVwaWQgYmFzaWMgcHN5Y2hvYWNvdXN0aWMgc2hhcGluZ1xuICAgIGlmKGZyZXEgPiAyMDApIGdhaW4gPSBnYWluKjAuMTI7XG4gICAgaWYoZnJlcSA+IDYwMDApIGdhaW4gPSBnYWluKjAuMDg7XG4gICAgcGFubmVyLnBhbi52YWx1ZSA9IHBhbjtcbiAgICBvc2NpbGxhdG9yLnN0YXJ0KDApO1xuICAgIGdhaW5Ob2RlLmdhaW4uc2V0VGFyZ2V0QXRUaW1lKHZvbCAqIGdhaW4gKiAoMC41NSAtIChNYXRoLnJhbmRvbSgpICogMC4wMSkpLCB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUsIHRpbWUgKiAwLjg1ICk7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnN0b3AodGltZSAqIDAuMjUpO1xuICAgIH0sICh0aW1lIC0gKHRpbWUqMC4yNSkpICogMTAwMCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBzdG9wKHRpbWUpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIGNvbnN0IHtcbiAgICAgIG9zY2lsbGF0b3IsXG4gICAgICBnYWluTm9kZSxcbiAgICB9ID0gdGhpcy5zeW50aE5vZGVzO1xuXG4gICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRUYXJnZXRBdFRpbWUoMCwgY29udGV4dC5jdXJyZW50VGltZSwgdGltZSowLjkgKTtcbiAgICBvc2NpbGxhdG9yLnN0b3AoY29udGV4dC5jdXJyZW50VGltZSArICggdGltZSAqIDQgKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTeW50aDtcbiIsIi8vIEJhc2ljIGN1cnZlIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dhdmVTaGFwZXJOb2RlXG5jb25zdCBtYWtlRGlzdG9ydGlvbkN1cnZlID0gYW1vdW50ID0+IHtcbiAgdmFyIGsgPSB0eXBlb2YgYW1vdW50ID09PSAnbnVtYmVyJyA/IGFtb3VudCA6IDUwLFxuICAgIG5fc2FtcGxlcyA9IDQ0MTAwLFxuICAgIGN1cnZlID0gbmV3IEZsb2F0MzJBcnJheShuX3NhbXBsZXMpLFxuICAgIGRlZyA9IE1hdGguUEkgLyAxODAsXG4gICAgaSA9IDAsXG4gICAgeDtcbiAgZm9yICggOyBpIDwgbl9zYW1wbGVzOyArK2kgKSB7XG4gICAgeCA9IGkgKiAyIC8gbl9zYW1wbGVzIC0gMTtcbiAgICBjdXJ2ZVtpXSA9ICggMyArIGsgKSAqIHggKiAyMCAqIGRlZyAvICggTWF0aC5QSSArIGsgKiBNYXRoLmFicyh4KSApO1xuICB9XG4gIHJldHVybiBjdXJ2ZTtcbn07XG5cblxuaW1wb3J0IHtJU291bmRQbGF5ZXIsIElQbGF5T3B0aW9uc30gZnJvbSAnLi9Tb3VuZFBsYXllcic7XG5cbmludGVyZmFjZSBJU3ludGhPcHRpb25zIHtcbiAgd2F2ZWZvcm1UeXBlPzogc3RyaW5nLFxufVxuXG5jb25zdCBidWZmZXJTaXplID0gNDA5NjtcbmNvbnN0IGNyZWF0ZUJyb3duTm9pc2UgPSBhdWRpb0NvbnRleHQgPT4ge1xuICAgIHZhciBsYXN0T3V0ID0gMC4wO1xuICAgIHZhciBub2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihidWZmZXJTaXplLCAxLCAxKTtcbiAgICBub2RlLm9uYXVkaW9wcm9jZXNzID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgb3V0cHV0ID0gZS5vdXRwdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgd2hpdGUgPSBNYXRoLnJhbmRvbSgpICogMiAtIDE7XG4gICAgICAgICAgICBvdXRwdXRbaV0gPSAobGFzdE91dCArICgwLjAyICogd2hpdGUpKSAvIDEuMDI7XG4gICAgICAgICAgICBsYXN0T3V0ID0gb3V0cHV0W2ldO1xuICAgICAgICAgICAgb3V0cHV0W2ldICo9IDMuNTsgLy8gKHJvdWdobHkpIGNvbXBlbnNhdGUgZm9yIGdhaW5cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn07XG5cbmNsYXNzIE5vaXNlIGltcGxlbWVudHMgSVNvdW5kUGxheWVyIHtcbiAgb3NjaWxsYXRvcjogYW55O1xuICBjb250ZXh0OiBBdWRpb0NvbnRleHQ7XG4gIGdhaW5Ob2RlO1xuICB3YXZlU2hhcGVyO1xuICBwYW5uZXI6IFN0ZXJlb1Bhbm5lck5vZGU7XG4gIGZpbHRlcjtcbiAgZmlsdGVyMjtcbiAgY29uZmlnOiBJU3ludGhPcHRpb25zO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRleHQsIGNvbmZpZz86IElTeW50aE9wdGlvbnMpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgPyBjb25maWcgOiB7fTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpIHtcbiAgICB0aGlzLm9zY2lsbGF0b3IgPSBjcmVhdGVCcm93bk5vaXNlKHRoaXMuY29udGV4dCk7XG4gICAgLy90aGlzLmNvbmZpZy53YXZlZm9ybVR5cGUgJiYgKHRoaXMub3NjaWxsYXRvci50eXBlID0gdGhpcy5jb25maWcud2F2ZWZvcm1UeXBlKTtcblxuICAgIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpO1xuICAgIHRoaXMucGFubmVyID0gdGhpcy5jb250ZXh0LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgIHRoaXMuZmlsdGVyID0gdGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpO1xuICAgIHRoaXMuZmlsdGVyLnR5cGUgPSAncGVha2luZyc7XG4gICAgdGhpcy5maWx0ZXIyID0gdGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpO1xuICAgIHRoaXMuZmlsdGVyMi50eXBlID0gJ2JhbmRwYXNzJztcblxuICAgIHRoaXMud2F2ZVNoYXBlciA9IHRoaXMuY29udGV4dC5jcmVhdGVXYXZlU2hhcGVyKCk7XG4gICAgdGhpcy53YXZlU2hhcGVyLmN1cnZlID0gbWFrZURpc3RvcnRpb25DdXJ2ZSg4MCk7XG4gICAgdGhpcy53YXZlU2hhcGVyLm92ZXJzYW1wbGUgPSAnNHgnO1xuXG4gICAgdGhpcy5vc2NpbGxhdG9yLmNvbm5lY3QodGhpcy53YXZlU2hhcGVyKTtcbiAgICB0aGlzLndhdmVTaGFwZXIuY29ubmVjdCh0aGlzLmZpbHRlcik7XG4gICAgdGhpcy5maWx0ZXIuY29ubmVjdCh0aGlzLmZpbHRlcjIpO1xuICAgIHRoaXMuZmlsdGVyMi5jb25uZWN0KHRoaXMucGFubmVyKTtcbiAgICB0aGlzLnBhbm5lci5jb25uZWN0KHRoaXMuZ2Fpbk5vZGUpO1xuICAgIHRoaXMuZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgLy90aGlzLm9zY2lsbGF0b3IudHlwZSA9IHRoaXMuY29uZmlnLndhdmVmb3JtVHlwZSA/IHRoaXMuY29uZmlnLndhdmVmb3JtVHlwZSA6IHV0aWxzLmZsaXBDb2luKCkgPyAndHJpYW5nbGUnIDogJ3NpbmUnO1xuICAgIHRoaXMuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IDA7XG4gIH1cblxuICBwdWJsaWMgcGxheShvcHQ6IElQbGF5T3B0aW9ucykge1xuICAgIGNvbnN0IHtmcmVxPTIyMCwgdGltZT0xLCBwYW49MCwgdm9sPTF9ID0gb3B0O1xuICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgbGV0IGdhaW4gPSAxLjA7XG4gICAgLy90aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gZnJlcTtcbiAgICB0aGlzLmZpbHRlci5mcmVxdWVuY3kudmFsdWUgPSBmcmVxO1xuICAgIHRoaXMuZmlsdGVyLlEudmFsdWUgPSA1MC45MDE7XG4gICAgdGhpcy5maWx0ZXIuZ2Fpbi52YWx1ZSA9IDIwO1xuXG4gICAgdGhpcy5maWx0ZXIyLmZyZXF1ZW5jeS52YWx1ZSA9IGZyZXE7XG4gICAgdGhpcy5maWx0ZXIyLlEudmFsdWUgPSAxNS45MDE7XG4gICAgdGhpcy5maWx0ZXIyLmdhaW4udmFsdWUgPSA2MDtcblxuICAgIG9wdC5kaXN0b3J0aW9uICYmICh0aGlzLndhdmVTaGFwZXIuY3VydmUgPSBtYWtlRGlzdG9ydGlvbkN1cnZlKG9wdC5kaXN0b3J0aW9uKSApO1xuICAgIC8vIHNvbWUgc3R1cGlkIGJhc2ljIHB5c2Nob2Fjb3VzdGljIHNoYXBpbmdcbiAgICBpZihmcmVxID4gMjAwKSBnYWluID0gZ2FpbiowLjEyO1xuICAgIHRoaXMucGFubmVyLnBhbi52YWx1ZSA9IHBhbjtcbiAgICB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSAwLjAwMTtcbiAgICB0aGlzLmdhaW5Ob2RlLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSh2b2wgKiBnYWluLCB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgKyB0aW1lKTtcblxuXG4gICAgc2V0VGltZW91dCh0aGlzLnN0b3AuYmluZCh0aGlzKSwgKHRpbWUrMSkgKiAxMDAwKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIHN0b3AoKSB7XG4gICAgdGhpcy5nYWluTm9kZS5nYWluLnNldFRhcmdldEF0VGltZSgwLCB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUsIDAuMDEgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG59XG5cbmV4cG9ydCB7IE5vaXNlIH07XG4iLCJpbXBvcnQge0hvd2wsIEhvd2xlcn0gZnJvbSAnaG93bGVyJztcbmltcG9ydCB7IGdldFJhdGVGcm9tRnJlcXVlbmNpZXMsIGdldENsb3Nlc3RNZW1iZXIsIGZpbmRJbkNvbGxlY3Rpb24gfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7SVNvdW5kUGxheWVyLCBJUGxheU9wdGlvbnMsIElTYW1wbGV9IGZyb20gJy4vU291bmRQbGF5ZXInO1xuXG5pbnRlcmZhY2UgSVBsYXllciB7XG4gIHBsYXllcjogSG93bCxcbiAgYmFzZUZyZXE6IG51bWJlcixcbn1cblxuY2xhc3MgTXVsdGlTYW1wbGVyIGltcGxlbWVudHMgSVNvdW5kUGxheWVyIHtcbiAgcGxheWVyczogSVBsYXllcltdO1xuICBjb250ZXh0OiBBdWRpb0NvbnRleHQ7XG4gIGdhaW5Ob2RlO1xuICBwYW5uZXI6IFN0ZXJlb1Bhbm5lck5vZGU7XG5cbiAgY29uc3RydWN0b3IoY29udGV4dCwgb3B0OiB7IHNhbXBsZXM6IElTYW1wbGVbXSB9ICkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy5wbGF5ZXJzID0gb3B0LnNhbXBsZXMubWFwKCBzYW1wbGVDb25maWcgPT4gKHtwbGF5ZXI6IG5ldyBIb3dsKHtzcmM6IHNhbXBsZUNvbmZpZy5maWxlc30pLCBiYXNlRnJlcTogc2FtcGxlQ29uZmlnLmZyZXF9KSApO1xuICB9XG5cbiAgcHVibGljIHBsYXkob3B0OiBJUGxheU9wdGlvbnMpIHtcbiAgICBjb25zdCB7ZnJlcT0yMjAsIHRpbWU9MSwgcGFuPTAsIHZvbD0xfSA9IG9wdDtcblxuICAgIGxldCBnYWluID0gMTtcbiAgICBjb25zdCBzYW1wbGVQbGF5ZXIgPSB0aGlzLmZpbmRDbG9zZXN0U2FtcGxlUGxheWVyKCBmcmVxICk7XG4gICAgY29uc3QgY3VycmVudGx5UGxheWluZ1NhbXBsZUlEID0gc2FtcGxlUGxheWVyLnBsYXllci5wbGF5KCk7XG4gICAgc2FtcGxlUGxheWVyLnBsYXllci5sb29wKCBmYWxzZSwgY3VycmVudGx5UGxheWluZ1NhbXBsZUlEICk7XG4gICAgc2FtcGxlUGxheWVyLnBsYXllci5yYXRlKCBnZXRSYXRlRnJvbUZyZXF1ZW5jaWVzKCBmcmVxLCBzYW1wbGVQbGF5ZXIuYmFzZUZyZXEgKSwgY3VycmVudGx5UGxheWluZ1NhbXBsZUlEICk7XG4gICAgLy8gc29tZSBzdHVwaWQgYmFzaWMgcHlzY2hvYWNvdXN0aWMgc2hhcGluZ1xuICAgIGlmKGZyZXEgPiAyMDApIGdhaW4gPSBnYWluKjAuMjtcbiAgICBzYW1wbGVQbGF5ZXIucGxheWVyLmZhZGUoIDAsIGdhaW4gKiB2b2wsIDIwMCwgY3VycmVudGx5UGxheWluZ1NhbXBsZUlEICk7XG4gICAgc2FtcGxlUGxheWVyLnBsYXllci5zdGVyZW8oIHBhbiwgY3VycmVudGx5UGxheWluZ1NhbXBsZUlEICk7XG5cblxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgc2FtcGxlUGxheWVyLnBsYXllci5mYWRlKCBnYWluICogdm9sLCAwLCAyMDAsIGN1cnJlbnRseVBsYXlpbmdTYW1wbGVJRCApO1xuICAgICAgdGhpcy5zdG9wKHRpbWUsIHNhbXBsZVBsYXllciwgY3VycmVudGx5UGxheWluZ1NhbXBsZUlEICk7XG4gICAgfS5iaW5kKHRoaXMpLCAoIHRpbWUgKiAxMDAwICkgKyAyMDApOyAvLyBhZGRpbmcgYSAxMDAgbXMgYnVmZmVyIHRvIGF2b2lkIGFueSBpc3N1ZXNcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIHN0b3AodGltZSwgc2FtcGxlUGxheWVyLCBjdXJyZW50bHlQbGF5aW5nU2FtcGxlSUQpIHtcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNhbXBsZVBsYXllci5wbGF5ZXIuc3RvcCgpO1xuICAgIH0uYmluZCh0aGlzKSwgMzAwKTsgLy8gYWRkaW5nIGEgMTAwIG1zIGJ1ZmZlciB0byBhdm9pZCBhbnkgaXNzdWVzXG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgZmluZENsb3Nlc3RTYW1wbGVQbGF5ZXIoIGZyZXE6bnVtYmVyICk6IElQbGF5ZXIge1xuICAgIC8vIENhbiBvbmx5IGdldCB0aGUgY2xvc2VzdCBmcmVxdWVuY3kgaW4gdGhlIHNldCBvZiBQbGF5ZXJzJyBmcmVxdWVuY2llcyBzbyBnZXQgdGhhdCBmcmVxdWVuY3ksIHRoZW4gZmlsdGVyIHRoZSBwbGF5ZXJzXG4gICAgY29uc3QgY2xvc2VzdFBsYXllckZyZXF1ZW5jeSA9IGdldENsb3Nlc3RNZW1iZXIoZnJlcSwgdGhpcy5wbGF5ZXJzLm1hcCggcGxheWVyID0+IHBsYXllci5iYXNlRnJlcSkgKTtcbiAgICByZXR1cm4gZmluZEluQ29sbGVjdGlvbiggdGhpcy5wbGF5ZXJzLCBtZW1iZXIgPT4gbWVtYmVyID09PSBjbG9zZXN0UGxheWVyRnJlcXVlbmN5ICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTXVsdGlTYW1wbGVyO1xuIiwiaW1wb3J0IHsgU2NlbmUsIElTY2VuZUNvbmZpZyB9IGZyb20gJy4vU2NlbmUnO1xuaW1wb3J0IFN5bnRoIGZyb20gJy4vU3ludGgnO1xuaW1wb3J0IHsgTm9pc2UgfSBmcm9tICcuL05vaXNlJztcbmltcG9ydCBNdWx0aVNhbXBsZXIgZnJvbSAnLi9NdWx0aVNhbXBsZXInO1xuaW1wb3J0IHsgSUZyZXFCaW4gfSBmcm9tICcuLi90b29scy9zcGVjdHJ1bVBlYWtQYXJzZXInO1xuaW1wb3J0IHsgZ2V0U2VxdWVudGlhbFJhbmRvbUluZGV4LCBmbGlwQ29pbiwgY2hvb3NlIH0gZnJvbSAnLi91dGlscyc7XG5cbmltcG9ydCBzcGVjdHJhbERhdGEgZnJvbSAnLi9zcGVjdHJhbERhdGEuanNvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVdOU0NvbmZpZyB7XG4gIHNhbXBsZVBhdGg6IHN0cmluZ1xufTtcblxuY29uc3QgZGVmYXVsdENvbmZpZzogSVdOU0NvbmZpZyA9IHtcbiAgc2FtcGxlUGF0aDogXCJzYW1wbGVzL1wiLFxufTtcblxuY29uc3QgV05TID0gKGNvbmZpZz86IElXTlNDb25maWcpID0+IHtcbiAgY29uZmlnID0gY29uZmlnID8gey4uLmRlZmF1bHRDb25maWcsIC4uLmNvbmZpZ30gOiBkZWZhdWx0Q29uZmlnO1xuXG4gIGNvbnN0IGJhY2tncm91bmRTYW1wbGVzID0gPGFueT5zcGVjdHJhbERhdGE7XG5cbiAgLy8gU2V0dXBcbiAgY29uc3QgcG9wdWxhdGlvblNpemUgPSAxNjtcbiAgY29uc3QgY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKTtcblxuICBjb25zdCBjaG9yZE9zY2lsbGF0b3JzID0gQXJyYXkocG9wdWxhdGlvblNpemUpLmZpbGwoMCkubWFwKCgpID0+XG4gICAgbmV3IFN5bnRoKGNvbnRleHQpXG4gICk7XG5cbiAgY29uc3QgbXVsdGlTYW1wbGVyT3B0cyA9IHtcbiAgICBzYW1wbGVzOiBbXG4gICAgICAvL3sgZmlsZXM6IFsgY29uZmlnLnNhbXBsZVBhdGggKyBcInBpcGVHLm1wM1wiIF0sIGZyZXE6IDE5OSB9LFxuICAgICAgLy97IGZpbGVzOiBbIGNvbmZpZy5zYW1wbGVQYXRoICsgXCJwaXBlRC5tcDNcIiBdLCBmcmVxOiAzMDYgfSxcbiAgICAgIHsgZmlsZXM6IFsgY29uZmlnLnNhbXBsZVBhdGggKyBcInBpcGVBLm1wM1wiIF0sIGZyZXE6IDQ0NSB9LFxuICAgICAgeyBmaWxlczogWyBjb25maWcuc2FtcGxlUGF0aCArIFwicGlwZUUubXAzXCIgXSwgZnJlcTogNjY2IH0sXG4gICAgICB7IGZpbGVzOiBbIGNvbmZpZy5zYW1wbGVQYXRoICsgXCJwaWFubzItMzI0Lm1wM1wiIF0sIGZyZXE6IDMyNCB9LFxuICAgICAgeyBmaWxlczogWyBjb25maWcuc2FtcGxlUGF0aCArIFwicGlhbm8zLTgxNC5tcDNcIiBdLCBmcmVxOiA4MTQgfSxcbiAgICBdLFxuICB9O1xuICBjb25zdCBtZWxvZHlPc2NpbGxhdG9ycyA9IEFycmF5KHBvcHVsYXRpb25TaXplKS5maWxsKDApLm1hcCgoKSA9PiBmbGlwQ29pbigpID8gbmV3IE11bHRpU2FtcGxlciggY29udGV4dCwgbXVsdGlTYW1wbGVyT3B0cyApIDogbmV3IFN5bnRoKGNvbnRleHQpKTtcbiAgY29uc3Qgc291cmNlU2FtcGxlcyA9IGJhY2tncm91bmRTYW1wbGVzLm1hcCggc2FtcGxlRGF0YSA9PiBuZXcgTXVsdGlTYW1wbGVyKGNvbnRleHQsIHtcbiAgICBzYW1wbGVzOiBbXG4gICAgICB7IGZpbGVzOiBbIGNvbmZpZy5zYW1wbGVQYXRoICsgc2FtcGxlRGF0YS5hdWRpb0ZpbGUgXSwgZnJlcTogMSB9LFxuICAgIF0sXG4gIH0pKTtcbiAgY29uc3QgbG93RHJvbmVQbGF5ZXIgPSBuZXcgTXVsdGlTYW1wbGVyKGNvbnRleHQsIHtcbiAgICBzYW1wbGVzOiBbXG4gICAgICB7IGZpbGVzOiBbIGNvbmZpZy5zYW1wbGVQYXRoICsgXCJsb3dEcm9uZS5tcDNcIiBdLCBmcmVxOiAxIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgY29uc3QgYmVsbHMgPSBBcnJheSgyKS5maWxsKDApLm1hcCggKCkgPT5cbiAgICBuZXcgTm9pc2UoY29udGV4dClcbiAgKTtcblxuICBjb25zdCBnZXRQcm9taW5lbnRGcmVxdWVuY2llcyA9IHNwZWN0cnVtID0+IHNwZWN0cnVtXG4gICAgLnJlZHVjZSggKGFjY3VtOiBJRnJlcUJpbltdLCBiaW46IElGcmVxQmluKSA9PiBhY2N1bVswXS5tYWduaXR1ZGUgPCBiaW4ubWFnbml0dWRlID8gWyBiaW4gXSA6IGFjY3VtLCBbe2ZyZXE6IDAsIG1hZ25pdHVkZTogLTEwMH1dKVxuICAgIC5tYXAoIGJpbiA9PiBiaW4uZnJlcSlcbiAgICAubWFwKCAoIHN0cm9uZ2VzdEZyZXE6IG51bWJlciApID0+IEFycmF5KHNwZWN0cnVtLmxlbmd0aCkuZmlsbCgwKS5tYXAoIChpdGVtLCBpKSA9PiB7XG4gICAgICBjb25zdCBoYXJtb25pYyA9IHN0cm9uZ2VzdEZyZXEgKiAoaSsxKTtcbiAgICAgIGNvbnN0IGhpZ2hlc3RGcmVxID0gNzAwMDtcbiAgICAgIGlmIChoYXJtb25pYyA+IGhpZ2hlc3RGcmVxKSB7XG4gICAgICAgIGNvbnN0IGRpdmlzb3IgPSBNYXRoLmNlaWwoaGFybW9uaWMgLyBoaWdoZXN0RnJlcSk7XG4gICAgICAgIHJldHVybiBoYXJtb25pYyAvIGRpdmlzb3I7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGhhcm1vbmljO1xuICAgICAgfVxuICAgIH0pXG4gICAgKVswXTtcblxuICBjb25zdCBwbGF5QmVsbHMgPSAoKSA9PiB7XG4gICAgY29uc3QgZHVyYXRpb24gPSA0NTtcbiAgICBiZWxscy5mb3JFYWNoKCAoYmVsbCwgaSkgPT4ge1xuICAgICAgY29uc3QgcmFuZG9tTXVsID0gKE1hdGgucmFuZG9tKCkgKiAwLjI1KSArIDE7XG4gICAgICBjb25zdCBmcmVxcyA9IFsyMDkwLCAyMzkzXTtcbiAgICAgIGJlbGwucGxheSh7XG4gICAgICAgIHBhbjogKGkgKiAyKSAtIDEsXG4gICAgICAgIGZyZXE6IGZyZXFzW2ldICogcmFuZG9tTXVsLFxuICAgICAgICB2b2w6IDcuOCxcbiAgICAgICAgdGltZTogZHVyYXRpb24sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQocGxheU5ld1NjZW5lLCAoZHVyYXRpb24gKyAxMikgKiAxMDAwKTsgLy8gVGltaW5nIGlzIHdlaXJkIGluIHRoZSBwbGF5ZXIuIFRoaXMgcmVzdWx0cyBpbiBhIGdhcCB3aGljaCBpcyB3aGF0IEkgd2FudFxuICB9O1xuXG4gIGNvbnN0IHBsYXlEcm9uZSA9ICgpID0+IHtcbiAgICBsb3dEcm9uZUlzUGxheWluZyA9IHRydWU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGxvd0Ryb25lSXNQbGF5aW5nID0gZmFsc2U7IH0sIDMzMCAqIDEwMDApOyAvLyBMb3cgRHJvbmUgbGFzdHMgMzAwKjEwMDAgbWlsbGlzZWNvbmRzLCBhZGQgYW4gZXh0cmEgMzAgc2Vjb25kcyBhZnRlciB0byBkZWNyZWFzZSByZXBldGl0aW9uXG4gICAgbG93RHJvbmVQbGF5ZXIucGxheSh7ZnJlcTogMSwgdGltZTogMzAwICogMTAwMCwgdm9sOiAxLjB9KTtcbiAgfTtcblxuICBsZXQgc2FtcGxlSW5kZXggPSAwO1xuXG4gIGxldCBpbnRlcmx1ZGVKdXN0UGxheWVkID0gZmFsc2U7XG4gIGxldCBsb3dEcm9uZUlzUGxheWluZyA9IGZhbHNlO1xuICBjb25zdCBwbGF5TmV3U2NlbmUgPSAoKSA9PiB7XG4gICAgLy8gT2NjYXNpb25hbGx5IHdlIHdhbnQgdG8gcGF1c2UgZm9yIGEgbW9tZW50IHRvIHBsYXkgYW4gaW50ZXJsdWRlIGluIHNpbGVuY2VcbiAgICBjb25zdCBwbGF5SW50ZXJsdWRlID0gZmxpcENvaW4oMC44MCk7XG4gICAgY29uc3QgcGxheUxvd0Ryb25lID0gZmxpcENvaW4oMC44NSk7XG5cbiAgICBpZihwbGF5SW50ZXJsdWRlICYmICFpbnRlcmx1ZGVKdXN0UGxheWVkKSB7XG4gICAgICBpbnRlcmx1ZGVKdXN0UGxheWVkID0gdHJ1ZTtcbiAgICAgIHBsYXlCZWxscygpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PlxuICAgICAgICB7XG4gICAgICAgICAgc291cmNlU2FtcGxlcy5mb3JFYWNoKCBzYW1wbGVQbGF5ZXIgPT4gc2FtcGxlUGxheWVyLnN0b3AoMCwgc2FtcGxlUGxheWVyLnBsYXllcnNbMF0pICk7XG4gICAgICAgICAgY2hvcmRPc2NpbGxhdG9ycy5mb3JFYWNoKCBzeW50aCA9PiBzeW50aC5zdG9wKDApICk7XG4gICAgICAgIH0sXG4gICAgICAgIDE1ICogMTAwMFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmKHBsYXlMb3dEcm9uZSAmJiAhbG93RHJvbmVJc1BsYXlpbmcpIHtcbiAgICAgIHBsYXlEcm9uZSgpO1xuICAgIH1cblxuICAgIGludGVybHVkZUp1c3RQbGF5ZWQgPSBmYWxzZTtcbiAgICBzYW1wbGVJbmRleCA9IGdldFNlcXVlbnRpYWxSYW5kb21JbmRleChzYW1wbGVJbmRleCwgYmFja2dyb3VuZFNhbXBsZXMubGVuZ3RoKTtcbiAgICAvL2NvbnN0IHRhcmdldCA9IFsxOTMsIDQyMywgMTY2OCwgMjMzMywgMjY2NSwgMzA3OCwgNDAzOCwgNjMxOSwgMTkzKzEsIDQyMysxLCAxNjY4KzEsIDIzMzMrMSwgMjY2NSsxLCAzMDc4KzEsIDQwMzgrMSwgNjMxOSsxIF07IC8vIGluIGZyZXF1ZW5jeVxuICAgIGNvbnN0IGJhY2tncm91bmRTYW1wbGUgPSBiYWNrZ3JvdW5kU2FtcGxlc1tzYW1wbGVJbmRleF07XG4gICAgY29uc3QgaW5pdGlhbFBvcHVsYXRpb24gPSBBcnJheSg4MCkuZmlsbCggYmFja2dyb3VuZFNhbXBsZS5zcGVjdHJ1bS5tYXAoIGJpbiA9PiBiaW4uZnJlcSkgKTtcbiAgICBjb25zdCB0YXJnZXQgPSBnZXRQcm9taW5lbnRGcmVxdWVuY2llcyhiYWNrZ3JvdW5kU2FtcGxlLnNwZWN0cnVtKTsgLy8gVGFyZ2V0IGlzIHRoZSBvdmVydG9uZXMgb2YgdGhlIG1vc3QgcHJvbWluZW50IGZyZXF1ZW5jeSBpbiB0aGUgc3BlY3RydW1cblxuICAgIGNvbnN0IHNjZW5lQ29uZmlnOiBJU2NlbmVDb25maWcgPSB7XG4gICAgICBpbml0aWFsUG9wdWxhdGlvbjogaW5pdGlhbFBvcHVsYXRpb24ubWFwKFxuICAgICAgICBpdGVtID0+IGl0ZW0ubWFwKFxuICAgICAgICAgIGl0ZW0yID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAqICh0YXJnZXRbdGFyZ2V0Lmxlbmd0aC0xXSAtIHRhcmdldFswXSkpICsgKHRhcmdldFswXS0yMClcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICksXG4gICAgICBwb3B1bGF0aW9uU2l6ZTogMTYsXG4gICAgICBtYXhHZW5lcmF0aW9uczogMixcbiAgICAgIHRhcmdldCwgLy8gaW4gZnJlcXVlbmN5XG4gICAgICB0aW1lQmV0d2VlbkV2ZW50czogKCkgPT4gKE1hdGgucmFuZG9tKCkgKiAxNSkgKyAxMCxcbiAgICAgIGdhcEJldHdlZW5FdmVudHM6ICgpID0+IGNob29zZShbMjUsMTBdKSxcbiAgICAgIG1lbG9keU9zY2lsbGF0b3JzLFxuICAgICAgY2hvcmRPc2NpbGxhdG9ycyxcbiAgICAgIG9uRmluaXNoOiBwbGF5TmV3U2NlbmVcbiAgICB9O1xuXG4gICAgc291cmNlU2FtcGxlc1tzYW1wbGVJbmRleF0ucGxheSh7ZnJlcTogMSwgdGltZTogNjAgKiAzICogMTAwMCwgdm9sOiAwLjI4fSk7XG5cbiAgICAvLyBTdGFydCB0aGUgc2NlbmVcbiAgICBuZXcgU2NlbmUoc2NlbmVDb25maWcpLnBsYXkoKTtcbiAgfTtcblxuICAvLyBwbGF5TmV3U2NlbmUoKTtcbiAgcGxheUJlbGxzKCk7XG4gIC8vIHBsYXlEcm9uZSgpO1xuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBXTlM7XG5leHBvcnQgeyBXTlMgfTtcbiIsImltcG9ydCBTeW50aCBmcm9tICcuL1N5bnRoJztcbmltcG9ydCB7IFBtYXJrb3YsIFBnZW5ldGljIH0gZnJvbSAnLi9wYXR0ZXJucyc7XG5pbXBvcnQgeyBJU291bmRQbGF5ZXIgfSBmcm9tICcuL1NvdW5kUGxheWVyJztcbmltcG9ydCB7IElGcmVxQmluIH0gZnJvbSAnLi4vdG9vbHMvc3BlY3RydW1QZWFrUGFyc2VyJztcbmltcG9ydCB7IG1vZCwgbWFrZUZ1bmN0aW9uLCBtYXBUb0RvbWFpbiwgZmxpcENvaW4sIGNob29zZSB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTcGVjdHJ1bUNvbmZpZyB7XG4gIGF1ZGlvRmlsZTogc3RyaW5nLFxuICBzcGVjdHJ1bTogSUZyZXFCaW5bXSxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2NlbmVDb25maWcge1xuICBwb3B1bGF0aW9uU2l6ZTogbnVtYmVyLFxuICBpbml0aWFsUG9wdWxhdGlvbjogYW55W11bXSxcbiAgdGFyZ2V0OiBhbnlbXSwgLy8gSW4gRnJlcXVlbmN5XG4gIG1heEdlbmVyYXRpb25zOiBudW1iZXI7XG4gIHRpbWVCZXR3ZWVuRXZlbnRzOiBhbnkgfG51bWJlciB8IEZ1bmN0aW9uLFxuICBnYXBCZXR3ZWVuRXZlbnRzOiBhbnkgfCBudW1iZXIgfCBGdW5jdGlvbixcbiAgbWVsb2R5T3NjaWxsYXRvcnM6IElTb3VuZFBsYXllcltdLFxuICBjaG9yZE9zY2lsbGF0b3JzOiBJU291bmRQbGF5ZXJbXSxcbiAgb25GaW5pc2g6IEZ1bmN0aW9uLFxufVxuXG5leHBvcnQgY2xhc3MgU2NlbmUge1xuICBub3RlczogSXRlcmFibGVJdGVyYXRvcjxhbnk+O1xuICBjdXJyZW50R2VuZXJhdGlvbjogbnVtYmVyO1xuICBjb25maWc6IElTY2VuZUNvbmZpZztcbiAgb25GaW5pc2g6IEZ1bmN0aW9uO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb25maWc6IElTY2VuZUNvbmZpZykge1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuXG4gICAgdGhpcy5jb25maWcudGltZUJldHdlZW5FdmVudHMgPSBtYWtlRnVuY3Rpb24odGhpcy5jb25maWcudGltZUJldHdlZW5FdmVudHMpO1xuICAgIHRoaXMuY29uZmlnLmdhcEJldHdlZW5FdmVudHMgPSBtYWtlRnVuY3Rpb24odGhpcy5jb25maWcuZ2FwQmV0d2VlbkV2ZW50cyk7XG4gICAgdGhpcy5ub3RlcyA9IFBnZW5ldGljKGNvbmZpZy5pbml0aWFsUG9wdWxhdGlvbiwgY29uZmlnLnRhcmdldCk7XG4gICAgdGhpcy5jb25maWcubWF4R2VuZXJhdGlvbnMgPSBjb25maWcubWF4R2VuZXJhdGlvbnM7XG4gICAgdGhpcy5jdXJyZW50R2VuZXJhdGlvbiA9IDA7XG5cbiAgICB0aGlzLmNvbmZpZy5vbkZpbmlzaCA9IGNvbmZpZy5vbkZpbmlzaDtcbiAgfVxuXG4gIHB1YmxpYyBwbGF5KCk6IFNjZW5lIHtcbiAgICBjb25zdCBuZXh0R2VuOiBudW1iZXJbXSA9IHRoaXMubm90ZXMubmV4dCgpLnZhbHVlO1xuICAgIGNvbnN0IG5ld05vdGVzOiBudW1iZXJbXSA9IG5leHRHZW47XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IGsgPSAoTWF0aC5yYW5kb20oKSA+IDAuNSkgPyAwIDogMTtcbiAgICB0aGlzLmNvbmZpZy5jaG9yZE9zY2lsbGF0b3JzLm1hcCgob3NjKSA9PiB7XG4gICAgICBjb25zdCBvY3RhdmUgPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDUpO1xuICAgICAgb3NjLnBsYXkoe2ZyZXE6IG5ld05vdGVzW2ldL29jdGF2ZSwgdGltZTogdGhpcy5jb25maWcudGltZUJldHdlZW5FdmVudHMoKSwgcGFuOiAoKGslMikqMikgLSAxLCB2b2w6IDAuNDV9KTsgaSsrOyBrKys7XG4gICAgfSk7XG5cbiAgICB0aGlzLnBsYXlNZWxvZHkobmV3Tm90ZXMsIHRoaXMuY3VycmVudEdlbmVyYXRpb24pO1xuXG4gICAgaWYodGhpcy5jdXJyZW50R2VuZXJhdGlvbiA8PSAodGhpcy5jb25maWcubWF4R2VuZXJhdGlvbnMtMSkgKSB7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudEdlbmVyYXRpb24rKztcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICB9LCAodGhpcy5jb25maWcudGltZUJldHdlZW5FdmVudHMoKSArIHRoaXMuY29uZmlnLmdhcEJldHdlZW5FdmVudHMoKSkgKiAxMDAwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRHZW5lcmF0aW9uKys7XG4gICAgICB0aGlzLmVuZE9mU2NlbmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHByaXZhdGUgcGxheU1lbG9keSggbm90ZXMsIGdlbmVyYXRpb24gKTogdm9pZCB7XG4gICAgY29uc3Qgb3JkZXIgPSAzO1xuICAgIGNvbnN0IG5ld05vdGVzID0gbm90ZXM7XG5cbiAgICAvLyBUYWtlbiBmcm9tIHRoZSBzZXF1ZW5jZSBvZiBwaXRjaGVzIGluIFwiRm9yZXZlciBpbiBCbHVlIEplYW5zXCIgYnkgTmVpbCBEaWFtb25kXG4gICAgY29uc3QgaWRlYWxNZWxvZHkgPSBtYXBUb0RvbWFpbihbMCw0LDIsMCw3LDQsMiw3LDcsNCwyLDIsNCw0LDIsMF0sIG5ld05vdGVzKTtcbiAgICBjb25zdCByaHl0aG1NYXBwaW5ncyA9IFswLjUsIDAuNSwgMC41LCAwLjUsIDAuNSwgMSwgMiwgMC4yNSwgMC41LCAxLCAxLCAwLjUsIDAuNSwgMC41LCAwLjI1LCAyIF1cbiAgICAgIC5tYXAoICggcmh5dGhtLCBpICkgPT4gW2lkZWFsTWVsb2R5W2ldLCByaHl0aG1dKTtcbiAgICBjb25zdCByYW5kb21TaGlmdEFtb3VudCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpZGVhbE1lbG9keS5sZW5ndGgpKTtcblxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IFtdO1xuICAgIGZvcihsZXQgb2Zmc2V0ID0gb3JkZXI7IG9mZnNldCA+PSAwOyBvZmZzZXQtLSkge1xuICAgICAgaW5pdGlhbFN0YXRlLnB1c2goIGlkZWFsTWVsb2R5W21vZChyYW5kb21TaGlmdEFtb3VudC1vZmZzZXQsIGlkZWFsTWVsb2R5Lmxlbmd0aCldKTtcbiAgICB9XG5cbiAgICBjb25zdCBtYXJrb3ZNZWxvZHkgPSBQbWFya292KGlkZWFsTWVsb2R5LCBvcmRlciwgaW5pdGlhbFN0YXRlICk7XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgY29uc3QgcGxheU5leHROb3RlID0gKGdlbmVyYXRpb24pID0+IHtcbiAgICAgIGNvbnN0IG9jdGF2ZSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMykgKyBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDMgKSArIDI7XG4gICAgICBjb25zdCBuZXh0Tm90ZSA9IG1hcmtvdk1lbG9keS5uZXh0KCkudmFsdWU7XG4gICAgICBjb25zdCBuZXh0Umh5dGhtID0gcmh5dGhtTWFwcGluZ3MuZmlsdGVyKCBub3RlUmh5dGhtID0+IG5vdGVSaHl0aG1bMF0gPT09IG5leHROb3RlKTtcblxuICAgICAgaWYobmV4dE5vdGUgIT09IHVuZGVmaW5lZCAmJiBmbGlwQ29pbigwLjU1KSApIHsgLy8gU29tZXRpbWVzIHByb2JhYmxpdGllcyBhcmUgemVybywgc28gd2UnbGwgZ2V0IGFuIHVuZGVmaW5lZCBuZXh0IHN0YXRlXG4gICAgICAgIHRoaXMuY29uZmlnLm1lbG9keU9zY2lsbGF0b3JzW2kgJSB0aGlzLmNvbmZpZy5tZWxvZHlPc2NpbGxhdG9ycy5sZW5ndGhdLnBsYXkoe1xuICAgICAgICAgIGZyZXE6IG5leHROb3RlL29jdGF2ZSxcbiAgICAgICAgICB0aW1lOiAxICsgKE1hdGgucmFuZG9tKCkgKiA2KSxcbiAgICAgICAgICBwYW46IChNYXRoLnJhbmRvbSgpICogMSkgLSAwLjUsXG4gICAgICAgICAgdm9sOiAwLjM1XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaSsrO1xuXG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmKGdlbmVyYXRpb24gPT09IHRoaXMuY3VycmVudEdlbmVyYXRpb24gJiYgdGhpcy5jdXJyZW50R2VuZXJhdGlvbiA8PSB0aGlzLmNvbmZpZy5tYXhHZW5lcmF0aW9ucykge1xuICAgICAgICAgIHBsYXlOZXh0Tm90ZShnZW5lcmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgLy8gfSwgKChNYXRoLnJhbmRvbSgpICogMikgKyAwLjUpICogMTAwMCk7XG4gICAgICB9LCAoKGNob29zZShuZXh0Umh5dGhtKVsxXSAqIDIpICsgMC41KSAqIDEwMDApO1xuICAgIH1cblxuICAgIHBsYXlOZXh0Tm90ZShnZW5lcmF0aW9uKTtcblxuICB9XG5cbiAgcHJpdmF0ZSBlbmRPZlNjZW5lKCkge1xuICAgIGNvbnN0IG9uRmluaXNoQ2FsbGJhY2sgPSB0aGlzLmNvbmZpZy5vbkZpbmlzaDtcblxuICAgIHRoaXMuY29uZmlnLmNob3JkT3NjaWxsYXRvcnMubWFwKCBzeW50aCA9PiBzeW50aC5zdG9wKDEpICk7XG5cbiAgICB3aW5kb3cuc2V0VGltZW91dChvbkZpbmlzaENhbGxiYWNrLCAxMDAwKTtcbiAgfVxufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9